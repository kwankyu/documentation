
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="viewport" content="width=600, initial-scale=1">
    <title>Elements, Array and Lists With Clone Protocol &#8212; Sage 9.2 Reference Manual: Parents and Elements</title>
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script async="async" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Elements, Array and Lists With Clone Protocol, demonstration classes" href="list_clone_demo.html" />
    <link rel="prev" title="Element Wrapper" href="element_wrapper.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="list_clone_demo.html" title="Elements, Array and Lists With Clone Protocol, demonstration classes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="element_wrapper.html" title="Element Wrapper"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.2 Reference Manual: Parents and Elements</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Elements, Array and Lists With Clone Protocol</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="elements-array-and-lists-with-clone-protocol">
<span id="sage-structure-list-clone"></span><h1>Elements, Array and Lists With Clone Protocol<a class="headerlink" href="#elements-array-and-lists-with-clone-protocol" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.structure.list_clone"></span><p>This module defines several classes which are subclasses of
<a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> and which roughly implement
the “prototype” design pattern (see <a class="reference internal" href="../../../references/index.html#prototype-pattern" id="id1"><span>[Prototype_pattern]</span></a>, <a class="reference internal" href="../../../references/index.html#ghjv1994" id="id2"><span>[GHJV1994]</span></a>). Those classes are
intended to be used to model <em>mathematical</em> objects, which are by essence
immutable. However, in many occasions, one wants to construct the
data-structure encoding of a new mathematical object by small modifications of
the data structure encoding some already built object. For the resulting
data-structure to correctly encode the mathematical object, some structural
invariants must hold. One problem is that, in many cases, during the
modification process, there is no possibility but to break the invariants.</p>
<p>For example, in a list modeling a permutation of <span class="math notranslate nohighlight">\(\{1,\dots,n\}\)</span>, the integers
must be distinct. A very common operation is to take a permutation to make a
copy with some small modifications, like exchanging two consecutive values in
the list or cycling some values. Though the result is clearly a permutations
there’s no way to avoid breaking the permutations invariants at some point
during the modifications.</p>
<p>The main purpose of this module is to define the class</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a> as an abstract super class,</p></li>
</ul>
<p>and its subclasses:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sage.structure.list_clone.ClonableArray" title="sage.structure.list_clone.ClonableArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableArray</span></code></a> for arrays (lists of fixed length) of objects;</p></li>
<li><p><a class="reference internal" href="#sage.structure.list_clone.ClonableList" title="sage.structure.list_clone.ClonableList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableList</span></code></a> for (resizable) lists of objects;</p></li>
<li><p><a class="reference internal" href="#sage.structure.list_clone.NormalizedClonableList" title="sage.structure.list_clone.NormalizedClonableList"><code class="xref py py-class docutils literal notranslate"><span class="pre">NormalizedClonableList</span></code></a> for lists of objects with a normalization method;</p></li>
<li><p><a class="reference internal" href="#sage.structure.list_clone.ClonableIntArray" title="sage.structure.list_clone.ClonableIntArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableIntArray</span></code></a> for arrays of int.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The following parents from <a class="reference internal" href="list_clone_demo.html#module-sage.structure.list_clone_demo" title="sage.structure.list_clone_demo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.structure.list_clone_demo</span></code></a>
demonstrate how to use them:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IncreasingArrays()</span></code> (see
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingArray" title="sage.structure.list_clone_demo.IncreasingArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingArray</span></code></a>
and the parent class
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingArrays" title="sage.structure.list_clone_demo.IncreasingArrays"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingArrays</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IncreasingLists()</span></code> (see
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingList" title="sage.structure.list_clone_demo.IncreasingList"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingList</span></code></a>
and the parent class
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingLists" title="sage.structure.list_clone_demo.IncreasingLists"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingLists</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SortedLists()</span></code> (see
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.SortedList" title="sage.structure.list_clone_demo.SortedList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SortedList</span></code></a>
and the parent class
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.SortedLists" title="sage.structure.list_clone_demo.SortedLists"><code class="xref py py-class docutils literal notranslate"><span class="pre">SortedLists</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IncreasingIntArrays()</span></code> (see
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingIntArray" title="sage.structure.list_clone_demo.IncreasingIntArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingIntArray</span></code></a>
and the parent class
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingIntArrays" title="sage.structure.list_clone_demo.IncreasingIntArrays"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingIntArrays</span></code></a>)</p></li>
</ul>
</div>
<p>EXAMPLES:</p>
<p>We now demonstrate how
<a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingArray" title="sage.structure.list_clone_demo.IncreasingArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingArray</span></code></a> works, creating an
instance <code class="docutils literal notranslate"><span class="pre">el</span></code> through its parent <code class="docutils literal notranslate"><span class="pre">IncreasingArrays()</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span> <span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="go">[1, 4, 8]</span>
</pre></div>
</div>
<p>If one tries to create this way a list which in not increasing, an error is
raised:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span> <span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: array is not increasing</span>
</pre></div>
</div>
<p>Once created modifying <code class="docutils literal notranslate"><span class="pre">el</span></code> is forbidden:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span> <span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
<p>However, you can modify a temporarily mutable clone:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">el</span><span class="p">,</span> <span class="n">elc</span><span class="p">]</span>
<span class="go">[[1, 4, 8], [1, 3, 8]]</span>
</pre></div>
</div>
<p>We check that the original and the modified copy now are in a proper immutable
state:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">(),</span> <span class="n">elc</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()</span>
<span class="go">(True, True)</span>
<span class="gp">sage: </span><span class="n">elc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
<p>You can break the property that the list is increasing during the
modification:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc2</span><span class="p">:</span>
<span class="gp">....: </span>    <span class="n">elc2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
<span class="gp">....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">elc2</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="n">elc2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">25</span>
<span class="go">[1, 12, 8]</span>
<span class="gp">sage: </span><span class="n">elc2</span>
<span class="go">[1, 12, 25]</span>
</pre></div>
</div>
<p>But this property must be restored at the end of the <code class="docutils literal notranslate"><span class="pre">with</span></code> block; otherwise
an error is raised:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">with</span> <span class="n">elc2</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">el3</span><span class="p">:</span>
<span class="gp">....: </span>    <span class="n">el3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: array is not increasing</span>
</pre></div>
</div>
<p>Finally, as an alternative to the <code class="docutils literal notranslate"><span class="pre">with</span></code> syntax one can use:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">el4</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">elc2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el4</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">sage: </span><span class="n">el4</span><span class="o">.</span><span class="n">set_immutable</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el4</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
<p>REFERENCES:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../references/index.html#prototype-pattern" id="id3"><span>[Prototype_pattern]</span></a></p></li>
<li><p><a class="reference internal" href="../../../references/index.html#ghjv1994" id="id4"><span>[GHJV1994]</span></a></p></li>
</ul>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Florent Hivert (2010-03): initial revision</p></li>
</ul>
<dl class="py class">
<dt id="sage.structure.list_clone.ClonableArray">
<em class="property">class </em><code class="sig-prename descclassname">sage.structure.list_clone.</code><code class="sig-name descname">ClonableArray</code><a class="headerlink" href="#sage.structure.list_clone.ClonableArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.list_clone.ClonableElement</span></code></a></p>
<p>Array with clone protocol</p>
<p>The class of objects which are
<a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> behave as arrays
(i.e. lists of fixed length) and implement the clone protocol. See
<a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a> for details about clone protocol.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code> – a <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lst</span></code>    – a list</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code>  – a boolean specifying if the invariant must be checked
using method <a class="reference internal" href="#sage.structure.list_clone.ClonableArray.check" title="sage.structure.list_clone.ClonableArray.check"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check()</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">immutable</span></code> – a boolean telling wether the created element is
immutable (defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingArray" title="sage.structure.list_clone_demo.IncreasingArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingArray</span></code></a> for
an example of usage.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">IA</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">ia1</span> <span class="o">=</span> <span class="n">IA</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]);</span> <span class="n">ia1</span>
<span class="go">[1, 4, 6]</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">ia1</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">ia2</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">ia2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">sage: </span><span class="n">ia2</span>
<span class="go">[1, 5, 6]</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">ia1</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">ia2</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">ia2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: array is not increasing</span>
</pre></div>
</div>
<dl class="py method">
<dt id="sage.structure.list_clone.ClonableArray.check">
<code class="sig-name descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableArray.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that <code class="docutils literal notranslate"><span class="pre">self</span></code> fulfill the invariants</p>
<p>This is an abstract method. Subclasses are supposed to overload
<code class="docutils literal notranslate"><span class="pre">check</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone</span> <span class="kn">import</span> <span class="n">ClonableArray</span>
<span class="gp">sage: </span><span class="n">ClonableArray</span><span class="p">(</span><span class="n">Parent</span><span class="p">(),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># indirect doctest</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">NotImplementedError: this should never be called, please overload the check method</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># indirect doctest</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableArray.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableArray.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of <code class="docutils literal notranslate"><span class="pre">i</span></code>’s for which <code class="docutils literal notranslate"><span class="pre">s[i]</span> <span class="pre">==</span> <span class="pre">key</span></code></p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableArray.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableArray.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the smallest <code class="docutils literal notranslate"><span class="pre">k</span></code> such that <code class="docutils literal notranslate"><span class="pre">s[k]</span> <span class="pre">==</span> <span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;=</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">j</span></code></p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: 5 is not in list</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="sage.structure.list_clone.ClonableElement">
<em class="property">class </em><code class="sig-prename descclassname">sage.structure.list_clone.</code><code class="sig-name descname">ClonableElement</code><a class="headerlink" href="#sage.structure.list_clone.ClonableElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.element.Element</span></code></a></p>
<p>Abstract class for elements with clone protocol</p>
<p>This class is a subclass of <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>
and implements the “prototype” design pattern (see <a class="reference internal" href="../../../references/index.html#prototype-pattern" id="id5"><span>[Prototype_pattern]</span></a>, <a class="reference internal" href="../../../references/index.html#ghjv1994" id="id6"><span>[GHJV1994]</span></a>). The role
of this class is:</p>
<ul class="simple">
<li><p>to manage copy and mutability and hashing of elements</p></li>
<li><p>to ensure that at the end of a piece of code an object is restored in a
meaningful mathematical state.</p></li>
</ul>
<p>A class <code class="docutils literal notranslate"><span class="pre">C</span></code> inheriting from <a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a> must implement
the following two methods</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj.__copy__()</span></code> – returns a fresh copy of obj</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obj.check()</span></code> – returns nothing, raise an exception if <code class="docutils literal notranslate"><span class="pre">obj</span></code>
doesn’t satisfy the data structure invariants</p></li>
</ul>
<p>and ensure to call <code class="docutils literal notranslate"><span class="pre">obj._require_mutable()</span></code> at the beginning of any
modifying method.</p>
<p>Additionally, one can also implement</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj._hash_()</span></code> – return the hash value of <code class="docutils literal notranslate"><span class="pre">obj</span></code>.</p></li>
</ul>
<p>Then, given an instance <code class="docutils literal notranslate"><span class="pre">obj</span></code> of <code class="docutils literal notranslate"><span class="pre">C</span></code>, the following sequences of
instructions ensures that the invariants of <code class="docutils literal notranslate"><span class="pre">new_obj</span></code> are properly
restored at the end:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">with obj.clone() as new_obj:</span>
<span class="go">    ...</span>
<span class="go">    # lot of invariant breaking modifications on new_obj</span>
<span class="go">    ...</span>
<span class="go"># invariants are ensured to be fulfilled</span>
</pre></div>
</div>
<p>The following equivalent sequence of instructions can be used if speed is
needed, in particular in Cython code:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">new_obj = obj.__copy__()</span>
<span class="go">...</span>
<span class="go"># lot of invariant breaking modifications on new_obj</span>
<span class="go">...</span>
<span class="go">new_obj.set_immutable()</span>
<span class="go">new_obj.check()</span>
<span class="go"># invariants are ensured to be fulfilled</span>
</pre></div>
</div>
<p>Finally, if the class implements the <code class="docutils literal notranslate"><span class="pre">_hash_</span></code> method, then
<a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a> ensures that the hash value can only be
computed on an immutable object. It furthermore caches it so that
it is only computed once.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>for the hash caching mechanism to work correctly, the hash
value cannot be 0.</p>
</div>
<p>EXAMPLES:</p>
<p>The following code shows a minimal example of usage of
<a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a>. We implement a class or pairs <span class="math notranslate nohighlight">\((x,y)\)</span>
such that <span class="math notranslate nohighlight">\(x &lt; y\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone</span> <span class="kn">import</span> <span class="n">ClonableElement</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">IntPair</span><span class="p">(</span><span class="n">ClonableElement</span><span class="p">):</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">....: </span>         <span class="n">ClonableElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
<span class="gp">....: </span>         <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">....: </span>         <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>
<span class="gp">....: </span>         <span class="bp">self</span><span class="o">.</span><span class="n">set_immutable</span><span class="p">()</span>
<span class="gp">....: </span>         <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>         <span class="k">return</span> <span class="s2">&quot;(x=</span><span class="si">%s</span><span class="s2">, y=</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">)</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">:</span>
<span class="gp">....: </span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Incorrectly ordered pair&quot;</span><span class="p">)</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="nf">get_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="nf">get_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="nf">set_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_mutable</span><span class="p">();</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">v</span>
<span class="gp">....: </span>     <span class="k">def</span> <span class="nf">set_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_mutable</span><span class="p">();</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">v</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>we don’t need to define <code class="docutils literal notranslate"><span class="pre">__copy__</span></code> since it is properly
inherited from <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>.</p>
</div>
<p>We now demonstrate the behavior. Let’s create an <code class="docutils literal notranslate"><span class="pre">IntPair</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">myParent</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IntPair</span><span class="p">(</span><span class="n">myParent</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="n">el</span>
<span class="go">(x=1, y=3)</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Modifying it is forbidden:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
<p>However, you can modify a mutable copy:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">el1</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">el1</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">el</span><span class="p">,</span> <span class="n">el1</span><span class="p">]</span>
<span class="go">[(x=1, y=3), (x=2, y=3)]</span>
</pre></div>
</div>
<p>We check that the original and the modified copy are in a proper immutable
state:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">(),</span> <span class="n">el1</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()</span>
<span class="go">(True, True)</span>
<span class="gp">sage: </span><span class="n">el1</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
<p>A modification which doesn’t restore the invariant <span class="math notranslate nohighlight">\(x &lt; y\)</span> at the end is
illegal and raise an exception:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc2</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc2</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Incorrectly ordered pair</span>
</pre></div>
</div>
<dl class="py method">
<dt id="sage.structure.list_clone.ClonableElement.clone">
<code class="sig-name descname">clone</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableElement.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a clone that is mutable copy of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code> – a boolean indicating if <code class="docutils literal notranslate"><span class="pre">self.check()</span></code> must be called
after modifications.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">el1</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">el1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">sage: </span><span class="n">el1</span>
<span class="go">[1, 2, 5]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableElement.is_immutable">
<code class="sig-name descname">is_immutable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableElement.is_immutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="docutils literal notranslate"><span class="pre">self</span></code> is immutable (can not be changed)
and <code class="docutils literal notranslate"><span class="pre">False</span></code> if it is not.</p>
<p>To make <code class="docutils literal notranslate"><span class="pre">self</span></code> immutable use <code class="docutils literal notranslate"><span class="pre">self.set_immutable()</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">copy</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">el1</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="k">print</span><span class="p">([</span><span class="n">el</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">(),</span> <span class="n">el1</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()])</span>
<span class="go">[True, False]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableElement.is_mutable">
<code class="sig-name descname">is_mutable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableElement.is_mutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="docutils literal notranslate"><span class="pre">self</span></code> is mutable (can be changed) and <code class="docutils literal notranslate"><span class="pre">False</span></code>
if it is not.</p>
<p>To make this object immutable use <code class="docutils literal notranslate"><span class="pre">self.set_immutable()</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">is_mutable</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">copy</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="o">.</span><span class="n">is_mutable</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">el1</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="k">print</span><span class="p">([</span><span class="n">el</span><span class="o">.</span><span class="n">is_mutable</span><span class="p">(),</span> <span class="n">el1</span><span class="o">.</span><span class="n">is_mutable</span><span class="p">()])</span>
<span class="go">[False, True]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableElement.set_immutable">
<code class="sig-name descname">set_immutable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableElement.set_immutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes <code class="docutils literal notranslate"><span class="pre">self</span></code> immutable, so it can never again be changed.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingArrays</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el1</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">el</span><span class="p">);</span> <span class="n">el1</span><span class="o">.</span><span class="n">is_mutable</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">el1</span><span class="o">.</span><span class="n">set_immutable</span><span class="p">();</span>  <span class="n">el1</span><span class="o">.</span><span class="n">is_mutable</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">el1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="sage.structure.list_clone.ClonableIntArray">
<em class="property">class </em><code class="sig-prename descclassname">sage.structure.list_clone.</code><code class="sig-name descname">ClonableIntArray</code><a class="headerlink" href="#sage.structure.list_clone.ClonableIntArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.list_clone.ClonableElement</span></code></a></p>
<p>Array of int with clone protocol</p>
<p>The class of objects which are
<a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> behave as list of int and
implement the clone protocol. See <a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a> for details
about clone protocol.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code> – a <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parent</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lst</span></code>      – a list</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code> – a boolean specifying if the invariant must be checked
using method <a class="reference internal" href="#sage.structure.list_clone.ClonableIntArray.check" title="sage.structure.list_clone.ClonableIntArray.check"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">immutable</span></code> – a boolean telling wether the created element is
immutable (defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingIntArray" title="sage.structure.list_clone_demo.IncreasingIntArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingIntArray</span></code></a>
for an example of usage.</p>
</div>
<dl class="py method">
<dt id="sage.structure.list_clone.ClonableIntArray.check">
<code class="sig-name descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableIntArray.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that <code class="docutils literal notranslate"><span class="pre">self</span></code> fulfill the invariants</p>
<p>This is an abstract method. Subclasses are supposed to overload
<code class="docutils literal notranslate"><span class="pre">check</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone</span> <span class="kn">import</span> <span class="n">ClonableArray</span>
<span class="gp">sage: </span><span class="n">ClonableArray</span><span class="p">(</span><span class="n">Parent</span><span class="p">(),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># indirect doctest</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">NotImplementedError: this should never be called, please overload the check method</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingIntArrays</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingIntArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># indirect doctest</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableIntArray.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableIntArray.index" title="Permalink to this definition">¶</a></dt>
<dd><p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingIntArrays</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">IncreasingIntArrays</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: list.index(x): x not in list</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableIntArray.list">
<code class="sig-name descname">list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableIntArray.list" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert self into a Python list.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingIntArrays</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">=</span> <span class="n">IncreasingIntArrays</span><span class="p">()(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">I</span><span class="o">.</span><span class="n">list</span><span class="p">()</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">=</span> <span class="n">IncreasingIntArrays</span><span class="p">()(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">I</span><span class="o">.</span><span class="n">list</span><span class="p">()</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="sage.structure.list_clone.ClonableList">
<em class="property">class </em><code class="sig-prename descclassname">sage.structure.list_clone.</code><code class="sig-name descname">ClonableList</code><a class="headerlink" href="#sage.structure.list_clone.ClonableList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.list_clone.ClonableArray" title="sage.structure.list_clone.ClonableArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.list_clone.ClonableArray</span></code></a></p>
<p>List with clone protocol</p>
<p>The class of objects which are
<a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> behave as lists and
implement the clone protocol. See <a class="reference internal" href="#sage.structure.list_clone.ClonableElement" title="sage.structure.list_clone.ClonableElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableElement</span></code></a> for details
about clone protocol.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.IncreasingList" title="sage.structure.list_clone_demo.IncreasingList"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncreasingList</span></code></a> for
an example of usage.</p>
</div>
<dl class="py method">
<dt id="sage.structure.list_clone.ClonableList.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">el</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends <code class="docutils literal notranslate"><span class="pre">el</span></code> to <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">el</span></code> – any object</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingLists</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingLists</span><span class="p">()([</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 4, 6]</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: array is not increasing</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableList.extend">
<code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">it</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends <code class="docutils literal notranslate"><span class="pre">self</span></code> by the content of the iterable <code class="docutils literal notranslate"><span class="pre">it</span></code></p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">it</span></code> – any iterable</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingLists</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingLists</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>

<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 4, 5, 8, 9, 10, 11]</span>

<span class="gp">sage: </span><span class="n">el2</span> <span class="o">=</span> <span class="n">IncreasingLists</span><span class="p">()([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">])</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">el2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 4, 5, 8, 9, 15, 16]</span>

<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: array is not increasing</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableList.insert">
<code class="sig-name descname">insert</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">el</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts <code class="docutils literal notranslate"><span class="pre">el</span></code> in <code class="docutils literal notranslate"><span class="pre">self</span></code> at position <code class="docutils literal notranslate"><span class="pre">index</span></code></p>
<p>INPUT:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">el</span></code> – any object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> – any int</p></li>
</ul>
</div></blockquote>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingLists</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingLists</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 4, 5, 6, 8, 9]</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: array is not increasing</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableList.pop">
<code class="sig-name descname">pop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">- 1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableList.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <code class="docutils literal notranslate"><span class="pre">self[index]</span></code> from <code class="docutils literal notranslate"><span class="pre">self</span></code> and returns it</p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">index</span></code> - any int, default to -1</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingLists</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingLists</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="k">print</span><span class="p">(</span><span class="n">elc</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<span class="go">9</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 4, 5, 8]</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="k">print</span><span class="p">(</span><span class="n">elc</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="go">5</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 4, 8, 9]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.structure.list_clone.ClonableList.remove">
<code class="sig-name descname">remove</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">el</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.ClonableList.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first occurrence of <code class="docutils literal notranslate"><span class="pre">el</span></code> from <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">el</span></code> - any object</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">IncreasingLists</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">IncreasingLists</span><span class="p">()([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">elc</span>
<span class="go">[1, 5, 8, 9]</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">el</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">elc</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">elc</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: list.remove(x): x not in list</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="sage.structure.list_clone.NormalizedClonableList">
<em class="property">class </em><code class="sig-prename descclassname">sage.structure.list_clone.</code><code class="sig-name descname">NormalizedClonableList</code><a class="headerlink" href="#sage.structure.list_clone.NormalizedClonableList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.list_clone.ClonableList" title="sage.structure.list_clone.ClonableList"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.list_clone.ClonableList</span></code></a></p>
<p>List with clone protocol and normal form</p>
<p>This is a subclass of <a class="reference internal" href="#sage.structure.list_clone.ClonableList" title="sage.structure.list_clone.ClonableList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClonableList</span></code></a> which call a method
<a class="reference internal" href="#sage.structure.list_clone.NormalizedClonableList.normalize" title="sage.structure.list_clone.NormalizedClonableList.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">normalize()</span></code></a> at creation and after any modification of its instance.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="list_clone_demo.html#sage.structure.list_clone_demo.SortedList" title="sage.structure.list_clone_demo.SortedList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SortedList</span></code></a> for an
example of usage.</p>
</div>
<p>EXAMPLES:</p>
<p>We construct a sorted list through its parent:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">SortedLists</span>
<span class="gp">sage: </span><span class="n">SL</span> <span class="o">=</span> <span class="n">SortedLists</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sl1</span> <span class="o">=</span> <span class="n">SL</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span> <span class="n">sl1</span>
<span class="go">[1, 2, 4, 6]</span>
</pre></div>
</div>
<p>Normalization is also performed atfer modification:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">with</span> <span class="n">sl1</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">sl2</span><span class="p">:</span>
<span class="gp">....: </span>     <span class="n">sl2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
<span class="gp">sage: </span><span class="n">sl2</span>
<span class="go">[1, 4, 6, 12]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="sage.structure.list_clone.NormalizedClonableList.normalize">
<code class="sig-name descname">normalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.list_clone.NormalizedClonableList.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<p>This is an abstract method. Subclasses are supposed to overload
<a class="reference internal" href="#sage.structure.list_clone.NormalizedClonableList.normalize" title="sage.structure.list_clone.NormalizedClonableList.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">normalize()</span></code></a>. The call <code class="docutils literal notranslate"><span class="pre">self.normalize()</span></code> is supposed to</p>
<ul class="simple">
<li><p>call <code class="docutils literal notranslate"><span class="pre">self._require_mutable()</span></code> to check that <code class="docutils literal notranslate"><span class="pre">self</span></code> is in a
proper mutable state</p></li>
<li><p>modify <code class="docutils literal notranslate"><span class="pre">self</span></code> to put it in a normal form</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.list_clone_demo</span> <span class="kn">import</span> <span class="n">SortedList</span><span class="p">,</span> <span class="n">SortedLists</span>
<span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">(</span><span class="n">SortedLists</span><span class="p">(),</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">[2, 2, 3]</span>
<span class="gp">sage: </span><span class="n">l</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: list is not strictly increasing</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="element_wrapper.html"
                        title="previous chapter">Element Wrapper</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="list_clone_demo.html"
                        title="next chapter">Elements, Array and Lists With Clone Protocol, demonstration classes</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/structure/list_clone.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="list_clone_demo.html" title="Elements, Array and Lists With Clone Protocol, demonstration classes"
             >next</a> |</li>
        <li class="right" >
          <a href="element_wrapper.html" title="Element Wrapper"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.2 Reference Manual: Parents and Elements</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Elements, Array and Lists With Clone Protocol</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2020, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>