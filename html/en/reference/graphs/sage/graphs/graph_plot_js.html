
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Graph plotting in Javascript with d3.js &#8212; Sage 9.5 Reference Manual: Graph Theory</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sage.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script async="async" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Tree decompositions" href="graph_decompositions/tree_decomposition.html" />
    <link rel="prev" title="Graph Plotting" href="graph_plot.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="graph_decompositions/tree_decomposition.html" title="Tree decompositions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="graph_plot.html" title="Graph Plotting"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.5 Reference Manual: Graph Theory</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Graph plotting in Javascript with d3.js</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="graph-plotting-in-javascript-with-d3-js">
<span id="sage-graphs-graph-plot-js"></span><h1>Graph plotting in Javascript with d3.js<a class="headerlink" href="#graph-plotting-in-javascript-with-d3-js" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.graphs.graph_plot_js"></span><p>This module implements everything that can be used to draw graphs with <a class="reference external" href="https://d3js.org/">d3.js</a> in Sage.</p>
<p>On Python’s side, this is mainly done by wrapping a graph’s edges and vertices
in a structure that can then be used in the javascript code. This javascript
code is then inserted into a .html file to be opened by a browser.</p>
<p>In the browser, the displayed page contains at the bottom right a menu
that allows to save the picture under the svg file format.</p>
<p>What Sage feeds javascript with is a “graph” object with the following content:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">vertices</span></code> – each vertex is a dictionary defining :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>  – The vertex’s label</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group</span></code> – the vertex’ color (integer)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The ID of a vertex is its index in the vertex list.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">edges</span></code> – each edge is a dictionary defining :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> – the ID (int) of the edge’s source</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code> – the ID (int) of the edge’s destination</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color</span></code>  – the edge’s color (integer)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> – thickness of the edge</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strength</span></code> – the edge’s strength in the automatic layout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color</span></code> – color (hexadecimal code)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curve</span></code> – distance from the barycenter of the two endpoints and the
center of the edge. It defines the curve of the edge, which can be useful
for multigraphs.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pos</span></code> – a list whose <span class="math notranslate nohighlight">\(i\)</span> th element is a dictionary defining the position
of the <span class="math notranslate nohighlight">\(i\)</span> th vertex</p></li>
</ul>
<p>It also contains the definition of some numerical/boolean variables whose
definition can be found in the documentation of
<a class="reference internal" href="generic_graph.html#sage.graphs.generic_graph.GenericGraph.show" title="sage.graphs.generic_graph.GenericGraph.show"><code class="xref py py-meth docutils literal notranslate"><span class="pre">show()</span></code></a> : <code class="docutils literal notranslate"><span class="pre">directed</span></code>, <code class="docutils literal notranslate"><span class="pre">charge</span></code>,
<code class="docutils literal notranslate"><span class="pre">link_distance</span></code>, <code class="docutils literal notranslate"><span class="pre">link_strength</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span></code>, <code class="docutils literal notranslate"><span class="pre">vertex_size</span></code>,
<code class="docutils literal notranslate"><span class="pre">edge_thickness</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since the d3js package is not standard yet, the javascript is fetched from
d3js.org website by the browser. If you want to avoid that (e.g.  to protect
your privacy or by lack of internet connection), you can install the d3js
package for offline use by running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">d3js</span></code> from the command line.</p>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Add tooltip like in <a class="reference external" href="http://bl.ocks.org/bentwonk/2514276">http://bl.ocks.org/bentwonk/2514276</a>.</p></li>
<li><p>Add a zoom through scrolling (<a class="reference external" href="http://bl.ocks.org/mbostock/3681006">http://bl.ocks.org/mbostock/3681006</a>).</p></li>
</ul>
</div>
<p>Authors:</p>
<ul class="simple">
<li><p>Nathann Cohen, Brice Onfroy – July 2013 –
Initial version of the Sage code,
Javascript code, using examples from <a class="reference external" href="https://d3js.org/">d3.js</a>.</p></li>
<li><p>Thierry Monteil (June 2014): allow offline use of d3.js provided by d3js spkg.</p></li>
</ul>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="sage.graphs.graph_plot_js.gen_html_code">
<span class="sig-prename descclassname"><span class="pre">sage.graphs.graph_plot_js.</span></span><span class="sig-name descname"><span class="pre">gen_html_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">G</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_spring_layout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">120</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_strength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gravity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.04</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.graph_plot_js.gen_html_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a .html file showing the graph using <a class="reference external" href="https://d3js.org/">d3.js</a>.</p>
<p>This function returns the name of the .html file. If you want to visualize
the actual graph use <a class="reference internal" href="generic_graph.html#sage.graphs.generic_graph.GenericGraph.show" title="sage.graphs.generic_graph.GenericGraph.show"><code class="xref py py-meth docutils literal notranslate"><span class="pre">show()</span></code></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">G</span></code> – the graph</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vertex_labels</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); whether to display
vertex labels</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge_labels</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); whether to display edge
labels</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vertex_partition</span></code> – list (default: <code class="docutils literal notranslate"><span class="pre">[]</span></code>); a list of lists
representing a partition of the vertex set. Vertices are then colored in
the graph according to the partition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vertex_colors</span></code> – dict (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>); a dictionary representing a
partition of the vertex set. Keys are colors (ignored) and values are
lists of vertices. Vertices are then colored in the graph according to the
partition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge_partition</span></code> – list (default: <code class="docutils literal notranslate"><span class="pre">[]</span></code>); same as
<code class="docutils literal notranslate"><span class="pre">vertex_partition</span></code>, with edges instead</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force_spring_layout</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); whether to take
previously computed position of nodes into account if there is one, or to
compute a spring layout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vertex_size</span></code> – integer (default: <code class="docutils literal notranslate"><span class="pre">7</span></code>); the size of a vertex’ circle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge_thickness</span></code> – integer (default: <code class="docutils literal notranslate"><span class="pre">4</span></code>); thickness of an edge</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">charge</span></code> – integer (default: <code class="docutils literal notranslate"><span class="pre">-120</span></code>); the vertices’ charge. Defines
how they repulse each other. See
<a class="reference external" href="https://github.com/mbostock/d3/wiki/Force-Layout">https://github.com/mbostock/d3/wiki/Force-Layout</a> for more
information</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">link_distance</span></code> – integer (default: <code class="docutils literal notranslate"><span class="pre">30</span></code>); see
<a class="reference external" href="https://github.com/mbostock/d3/wiki/Force-Layout">https://github.com/mbostock/d3/wiki/Force-Layout</a> for more
information</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">link_strength</span></code> – integer (default: <code class="docutils literal notranslate"><span class="pre">2</span></code>); see
<a class="reference external" href="https://github.com/mbostock/d3/wiki/Force-Layout">https://github.com/mbostock/d3/wiki/Force-Layout</a> for more
information</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gravity</span></code> – float (default: <code class="docutils literal notranslate"><span class="pre">0.04</span></code>); see
<a class="reference external" href="https://github.com/mbostock/d3/wiki/Force-Layout">https://github.com/mbostock/d3/wiki/Force-Layout</a> for more
information</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since the d3js package is not standard yet, the javascript is fetched
from d3js.org website by the browser. If you want to avoid that (e.g.
to protect your privacy or by lack of internet connection), you can
install the d3js package for offline use by running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">d3js</span></code>
from the command line.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">graphs</span><span class="o">.</span><span class="n">RandomTree</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;js&quot;</span><span class="p">)</span> <span class="c1"># optional -- internet</span>

<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">graphs</span><span class="o">.</span><span class="n">PetersenGraph</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;js&quot;</span><span class="p">,</span> <span class="n">vertex_partition</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">coloring</span><span class="p">())</span> <span class="c1"># optional -- internet</span>

<span class="gp">sage: </span><span class="n">graphs</span><span class="o">.</span><span class="n">DodecahedralGraph</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;js&quot;</span><span class="p">,</span> <span class="n">force_spring_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># optional -- internet</span>

<span class="gp">sage: </span><span class="n">graphs</span><span class="o">.</span><span class="n">DodecahedralGraph</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;js&quot;</span><span class="p">)</span> <span class="c1"># optional -- internet</span>

<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">digraphs</span><span class="o">.</span><span class="n">DeBruijn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">allow_multiple_edges</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;01&quot;</span><span class="p">,</span> <span class="s2">&quot;11&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;js&quot;</span><span class="p">,</span> <span class="n">vertex_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">edge_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">....: </span>       <span class="n">link_distance</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">gravity</span><span class="o">=</span><span class="mf">.05</span><span class="p">,</span> <span class="n">charge</span><span class="o">=-</span><span class="mi">500</span><span class="p">,</span>
<span class="gp">....: </span>       <span class="n">edge_partition</span><span class="o">=</span><span class="p">[[(</span><span class="s2">&quot;11&quot;</span><span class="p">,</span> <span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;21&quot;</span><span class="p">,</span> <span class="s2">&quot;21&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)]],</span>
<span class="gp">....: </span>       <span class="n">edge_thickness</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># optional -- internet</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Graph plotting in Javascript with d3.js</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="graph_plot.html"
                        title="previous chapter">Graph Plotting</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="graph_decompositions/tree_decomposition.html"
                        title="next chapter">Tree decompositions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/graphs/graph_plot_js.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="graph_decompositions/tree_decomposition.html" title="Tree decompositions"
             >next</a> |</li>
        <li class="right" >
          <a href="graph_plot.html" title="Graph Plotting"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.5 Reference Manual: Graph Theory</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Graph plotting in Javascript with d3.js</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2022, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>