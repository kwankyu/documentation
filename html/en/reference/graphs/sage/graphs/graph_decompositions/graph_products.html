
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="viewport" content="width=600, initial-scale=1">
    <title>Products of graphs &#8212; Sage 9.3 Reference Manual: Graph Theory</title>
    <link rel="stylesheet" href="../../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/language_data.js"></script>
    <script async="async" src="../../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Modular Decomposition" href="modular_decomposition.html" />
    <link rel="prev" title="Cutwidth" href="cutwidth.html" />
    <link rel="icon" href="../../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modular_decomposition.html" title="Modular Decomposition"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cutwidth.html" title="Cutwidth"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../../index.html"><img src="../../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../../index.html">Sage 9.3 Reference Manual: Graph Theory</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Products of graphs</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="products-of-graphs">
<span id="sage-graphs-graph-decompositions-graph-products"></span><h1>Products of graphs<a class="headerlink" href="#products-of-graphs" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.graphs.graph_decompositions.graph_products"></span><p>This module gathers everything related to graph products. At the moment it
contains an implementation of a recognition algorithm for graphs that can be
written as a Cartesian product of smaller ones.</p>
<p>Author:</p>
<ul class="simple">
<li><p>Nathann Cohen (May 2012 – coded while watching the election of Francois
Hollande on TV)</p></li>
</ul>
<div class="section" id="cartesian-product-of-graphs-the-recognition-problem">
<h2>Cartesian product of graphs – the recognition problem<a class="headerlink" href="#cartesian-product-of-graphs-the-recognition-problem" title="Permalink to this headline">¶</a></h2>
<p>First, a definition:</p>
<blockquote>
<div><p><strong>Definition</strong> The Cartesian product of two graphs <span class="math notranslate nohighlight">\(G\)</span> and <span class="math notranslate nohighlight">\(H\)</span>, denoted
<span class="math notranslate nohighlight">\(G\square H\)</span>, is a graph defined on the pairs <span class="math notranslate nohighlight">\((g, h)\in V(G)\times V(H)\)</span>.</p>
<p>Two elements <span class="math notranslate nohighlight">\((g, h),(g', h')\in V(G\square H)\)</span> are adjacent in <span class="math notranslate nohighlight">\(G\square H\)</span>
if and only if :</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(g=g'\)</span> and <span class="math notranslate nohighlight">\(hh'\in H\)</span>; or</p></li>
<li><p><span class="math notranslate nohighlight">\(h=h'\)</span> and <span class="math notranslate nohighlight">\(gg'\in G\)</span></p></li>
</ul>
</div></blockquote>
<p>Two remarks follow :</p>
<ol class="arabic simple">
<li><p>The Cartesian product is commutative</p></li>
<li><p>Any edge <span class="math notranslate nohighlight">\(uv\)</span> of a graph <span class="math notranslate nohighlight">\(G_1 \square \cdots \square G_k\)</span> can be given a
color <span class="math notranslate nohighlight">\(i\)</span> corresponding to the unique index <span class="math notranslate nohighlight">\(i\)</span> such that <span class="math notranslate nohighlight">\(u_i\)</span> and <span class="math notranslate nohighlight">\(v_i\)</span>
differ.</p></li>
</ol>
<p>The problem that is of interest to us in the present module is the following:</p>
<blockquote>
<div><p><strong>Recognition problem</strong> Given a graph <span class="math notranslate nohighlight">\(G\)</span>, can we guess whether there exist
graphs <span class="math notranslate nohighlight">\(G_1, ..., G_k\)</span> such that <span class="math notranslate nohighlight">\(G=G_1\square \cdots \square G_k\)</span> ?</p>
</div></blockquote>
<p>This problem can actually be solved, and the resulting factorization is
unique. What is explained below can be found in the book <em>Handbook of Product
Graphs</em> <a class="reference internal" href="../../../../references/index.html#hik2011" id="id1"><span>[HIK2011]</span></a>.</p>
<p>Everything is actually based on simple observations. Given a graph <span class="math notranslate nohighlight">\(G\)</span>, finding
out whether <span class="math notranslate nohighlight">\(G\)</span> can be written as the product of several graphs can be attempted
by trying to color its edges according to some rules. Indeed, if we are to color
the edges of <span class="math notranslate nohighlight">\(G\)</span> in such a way that each color class represents a factor of <span class="math notranslate nohighlight">\(G\)</span>,
we must ensure several things.</p>
<blockquote>
<div><p><strong>Remark 1</strong> In any cycle of <span class="math notranslate nohighlight">\(G\)</span> no color can appear exactly once.</p>
<p>Indeed, if only one edge <span class="math notranslate nohighlight">\(uv\)</span> of a cycle were labelled with color <span class="math notranslate nohighlight">\(i\)</span>, it
would mean that:</p>
<ol class="arabic simple">
<li><p>The only difference between <span class="math notranslate nohighlight">\(u\)</span> and <span class="math notranslate nohighlight">\(v\)</span> lies in their <span class="math notranslate nohighlight">\(i\)</span> th coordinate</p></li>
<li><p>It is possible to go from <span class="math notranslate nohighlight">\(u\)</span> to <span class="math notranslate nohighlight">\(v\)</span> by changing only coordinates
different from the <span class="math notranslate nohighlight">\(i\)</span> th</p></li>
</ol>
<p>A contradiction indeed.</p>
<img alt="../../../_images/cycle.png" src="../../../_images/cycle.png" />
<p>That means that, for instance, the edges of a triangle necessarily have the
same color.</p>
<p><strong>Remark 2</strong> If two consecutive edges <span class="math notranslate nohighlight">\(u_1u_2\)</span> and <span class="math notranslate nohighlight">\(u_2u_3\)</span> have different
colors, there necessarily exists a unique vertex <span class="math notranslate nohighlight">\(u_4\)</span> different from <span class="math notranslate nohighlight">\(u_2\)</span>
and incident to both <span class="math notranslate nohighlight">\(u_1\)</span> and <span class="math notranslate nohighlight">\(u_3\)</span>.</p>
<p>In this situation, opposed edges necessarily have the same colors because of
the previous remark.</p>
<img alt="../../../_images/square.png" src="../../../_images/square.png" />
<p><strong>1st criterion</strong> : As a corollary, we know that:</p>
<ol class="arabic simple">
<li><p>If two vertices <span class="math notranslate nohighlight">\(u,v\)</span> have a <em>unique</em> common neighbor <span class="math notranslate nohighlight">\(x\)</span>, then <span class="math notranslate nohighlight">\(ux\)</span> and
<span class="math notranslate nohighlight">\(xv\)</span> have the same color.</p></li>
<li><p>If two vertices <span class="math notranslate nohighlight">\(u, v\)</span> have more that two common neighbors <span class="math notranslate nohighlight">\(x_1, ...,
x_k\)</span> then all edges between the <span class="math notranslate nohighlight">\(x_i\)</span> and the vertices of <span class="math notranslate nohighlight">\(u,v\)</span> have the
same color. This is also a consequence of the first remark.</p></li>
</ol>
<p><strong>2nd criterion</strong> : if two edges <span class="math notranslate nohighlight">\(uv\)</span> and <span class="math notranslate nohighlight">\(u'v'\)</span> of the product graph
<span class="math notranslate nohighlight">\(G\square H\)</span> are such that <span class="math notranslate nohighlight">\(d(u,u')+d(v,v')\neq d(u,v') + d(v,u')\)</span> then the
two edges <span class="math notranslate nohighlight">\(uv\)</span> and <span class="math notranslate nohighlight">\(u'v'\)</span> necessarily have the same color.</p>
<blockquote>
<div><p>This is a consequence of the fact that for any two vertices <span class="math notranslate nohighlight">\(u,v\)</span> of
<span class="math notranslate nohighlight">\(G\square H\)</span> (where <span class="math notranslate nohighlight">\(u=(u_G,u_H)\)</span> and <span class="math notranslate nohighlight">\(v=(v_G,v_H)\)</span>), we have <span class="math notranslate nohighlight">\(d(u,v) =
d_G(u_G,v_G)+d_H(u_H,v_H)\)</span>. Indeed, a shortest path from <span class="math notranslate nohighlight">\(u\)</span> to <span class="math notranslate nohighlight">\(v\)</span> in
<span class="math notranslate nohighlight">\(G\square H\)</span> contains the information of a shortest path from <span class="math notranslate nohighlight">\(u_G\)</span> to <span class="math notranslate nohighlight">\(v_G\)</span>
in <span class="math notranslate nohighlight">\(G\)</span>, and a shortest path from <span class="math notranslate nohighlight">\(u_H\)</span> to <span class="math notranslate nohighlight">\(v_H\)</span> in <span class="math notranslate nohighlight">\(H\)</span>.</p>
</div></blockquote>
</div></blockquote>
<div class="section" id="the-algorithm">
<h3>The algorithm<a class="headerlink" href="#the-algorithm" title="Permalink to this headline">¶</a></h3>
<p>The previous remarks tell us that some edges are in some way equivalent to some
others, i.e. that their colors are equal. In order to compute the coloring we
are looking for, we therefore build a graph on the <em>edges</em> of a graph <span class="math notranslate nohighlight">\(G\)</span>,
linking two edges whenever they are found to be equivalent according to the
previous remarks.</p>
<p>All that is left to do is to compute the connected components of this new graph,
as each of them representing the edges of a factor. Of course, only one
connected component indicates that the graph has no factorization.</p>
<p>Then again, please refer to <a class="reference internal" href="../../../../references/index.html#hik2011" id="id2"><span>[HIK2011]</span></a> for any technical question.</p>
</div>
<div class="section" id="to-do">
<h3>To Do<a class="headerlink" href="#to-do" title="Permalink to this headline">¶</a></h3>
<p>This implementation is made at Python level, and some parts of the algorithm
could be rewritten in Cython to save time. Especially when enumerating all pairs
of edges and computing their distances. This can easily be done in C with the
functions from the <a class="reference internal" href="../distances_all_pairs.html#module-sage.graphs.distances_all_pairs" title="sage.graphs.distances_all_pairs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.graphs.distances_all_pairs</span></code></a> module.</p>
</div>
</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="sage.graphs.graph_decompositions.graph_products.is_cartesian_product">
<code class="sig-prename descclassname">sage.graphs.graph_decompositions.graph_products.</code><code class="sig-name descname">is_cartesian_product</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">g</span></em>, <em class="sig-param"><span class="n">certificate</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">relabeling</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.graph_decompositions.graph_products.is_cartesian_product" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether the graph is a Cartesian product.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">certificate</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); if <code class="docutils literal notranslate"><span class="pre">certificate</span> <span class="pre">=</span>
<span class="pre">False</span></code> (default) the method only returns <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>
answers. If <code class="docutils literal notranslate"><span class="pre">certificate</span> <span class="pre">=</span> <span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">True</span></code> answers are replaced by
the list of the factors of the graph.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relabeling</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); if <code class="docutils literal notranslate"><span class="pre">relabeling</span> <span class="pre">=</span> <span class="pre">True</span></code>
(implies <code class="docutils literal notranslate"><span class="pre">certificate</span> <span class="pre">=</span> <span class="pre">True</span></code>), the method also returns a dictionary
associating to each vertex its natural coordinates as a vertex of a
product graph. If <span class="math notranslate nohighlight">\(g\)</span> is not a Cartesian product, <code class="docutils literal notranslate"><span class="pre">None</span></code> is returned
instead.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../generic_graph.html#sage.graphs.generic_graph.GenericGraph.cartesian_product" title="sage.graphs.generic_graph.GenericGraph.cartesian_product"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.graphs.generic_graph.GenericGraph.cartesian_product()</span></code></a></p></li>
<li><p><a class="reference internal" href="#module-sage.graphs.graph_decompositions.graph_products" title="sage.graphs.graph_decompositions.graph_products"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graph_products</span></code></a> – a module on
graph products.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This algorithm may run faster whenever the graph’s vertices are integers
(see <a class="reference internal" href="../generic_graph.html#sage.graphs.generic_graph.GenericGraph.relabel" title="sage.graphs.generic_graph.GenericGraph.relabel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">relabel()</span></code></a>). Give it a
try if it is too slow !</p>
</div>
<p>EXAMPLES:</p>
<p>The Petersen graph is prime:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.graph_decompositions.graph_products</span> <span class="kn">import</span> <span class="n">is_cartesian_product</span>
<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">graphs</span><span class="o">.</span><span class="n">PetersenGraph</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">is_cartesian_product</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>A 2d grid is the product of paths:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">graphs</span><span class="o">.</span><span class="n">Grid2dGraph</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">is_cartesian_product</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">certificate</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">p1</span><span class="o">.</span><span class="n">is_isomorphic</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">PathGraph</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">p2</span><span class="o">.</span><span class="n">is_isomorphic</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">PathGraph</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Forgetting the graph’s labels, then finding them back:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">relabel</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">b</span><span class="p">,</span><span class="n">D</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">is_cartesian_product</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">relabeling</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">b</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">D</span>  <span class="c1"># random isomorphism</span>
<span class="go">{0: (20, 0), 1: (20, 1), 2: (20, 2), 3: (20, 3), 4: (20, 4),</span>
<span class="go"> 5: (15, 0), 6: (15, 1), 7: (15, 2), 8: (15, 3), 9: (15, 4),</span>
<span class="go"> 10: (10, 0), 11: (10, 1), 12: (10, 2), 13: (10, 3), 14: (10, 4),</span>
<span class="go"> 15: (5, 0), 16: (5, 1), 17: (5, 2), 18: (5, 3), 19: (5, 4),</span>
<span class="go"> 20: (0, 0), 21: (0, 1), 22: (0, 2), 23: (0, 3), 24: (0, 4)}</span>
</pre></div>
</div>
<p>And of course, we find the factors back when we build a graph from a
product:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">graphs</span><span class="o">.</span><span class="n">PetersenGraph</span><span class="p">()</span><span class="o">.</span><span class="n">cartesian_product</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">CycleGraph</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span> <span class="o">=</span> <span class="n">is_cartesian_product</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">certificate</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">any</span><span class="p">(</span> <span class="n">x</span><span class="o">.</span><span class="n">is_isomorphic</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">PetersenGraph</span><span class="p">())</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">g1</span><span class="p">,</span><span class="n">g2</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">any</span><span class="p">(</span> <span class="n">x</span><span class="o">.</span><span class="n">is_isomorphic</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">CycleGraph</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">g1</span><span class="p">,</span><span class="n">g2</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Products of graphs</a><ul>
<li><a class="reference internal" href="#cartesian-product-of-graphs-the-recognition-problem">Cartesian product of graphs – the recognition problem</a><ul>
<li><a class="reference internal" href="#the-algorithm">The algorithm</a></li>
<li><a class="reference internal" href="#to-do">To Do</a></li>
</ul>
</li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cutwidth.html"
                        title="previous chapter">Cutwidth</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modular_decomposition.html"
                        title="next chapter">Modular Decomposition</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/sage/graphs/graph_decompositions/graph_products.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modular_decomposition.html" title="Modular Decomposition"
             >next</a> |</li>
        <li class="right" >
          <a href="cutwidth.html" title="Cutwidth"
             >previous</a> |</li>
  
    
      <a href="../../../../../index.html"><img src="../../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../../index.html">Sage 9.3 Reference Manual: Graph Theory</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Products of graphs</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2021, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>