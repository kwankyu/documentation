
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Static Sparse Graphs &#8212; Sage Reference Manual v8.4: Graph Theory</title>
    <link rel="stylesheet" href="../../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Static sparse graph backend" href="static_sparse_backend.html" />
    <link rel="prev" title="Static dense graphs" href="static_dense_graph.html" />
    <link rel="icon" href="../../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="static_sparse_backend.html" title="Static sparse graph backend"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="static_dense_graph.html" title="Static dense graphs"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../../index.html"><img src="../../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../../index.html">Graph Theory</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="static-sparse-graphs">
<span id="sage-graphs-base-static-sparse-graph"></span><h1>Static Sparse Graphs<a class="headerlink" href="#static-sparse-graphs" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.graphs.base.static_sparse_graph"></span><div class="section" id="what-is-the-point">
<h2>What is the point ?<a class="headerlink" href="#what-is-the-point" title="Permalink to this headline">¶</a></h2>
<p>This class implements a Cython (di)graph structure made for efficiency. The
graphs are <em>static</em>, i.e. no add/remove vertex/edges methods are available, nor
can they easily or efficiently be implemented within this data structure.</p>
<p>The data structure, however, is made to save the maximum amount of computations
for graph algorithms whose main operation is to <em>list the out-neighbours of a
vertex</em> (which is precisely what BFS, DFS, distance computations and the
flow-related stuff waste their life on).</p>
<p>The code contained in this module is written C-style. The purpose is efficiency
and simplicity.</p>
<p>For an overview of graph data structures in sage, see
<a class="reference internal" href="overview.html#module-sage.graphs.base.overview" title="sage.graphs.base.overview"><code class="xref py py-mod docutils literal notranslate"><span class="pre">overview</span></code></a>.</p>
<p>Author:</p>
<ul class="simple">
<li>Nathann Cohen (2011)</li>
</ul>
</div>
<div class="section" id="data-structure">
<h2>Data structure<a class="headerlink" href="#data-structure" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/structure.png" src="../../../_images/structure.png" />
<p>The data structure is actually pretty simple and compact. <code class="docutils literal notranslate"><span class="pre">short_digraph</span></code> has
five fields</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">n</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>) – the number of vertices in the graph.</li>
<li><code class="docutils literal notranslate"><span class="pre">m</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>) – the number of edges in the graph.</li>
<li><code class="docutils literal notranslate"><span class="pre">edges</span></code> (<code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">*</span></code>) – array whose length is the number of edges of
the graph.</li>
<li><code class="docutils literal notranslate"><span class="pre">neighbors</span></code> (<code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">**</span></code>) – this array has size <span class="math notranslate nohighlight">\(n+1\)</span>, and
describes how the data of <code class="docutils literal notranslate"><span class="pre">edges</span></code> should be read : the neighbors of
vertex <span class="math notranslate nohighlight">\(i\)</span> are the elements of <code class="docutils literal notranslate"><span class="pre">edges</span></code> addressed by
<code class="docutils literal notranslate"><span class="pre">neighbors[i]...neighbors[i+1]-1</span></code>. The element <code class="docutils literal notranslate"><span class="pre">neighbors[n]</span></code>, which
corresponds to no vertex (they are numbered from <span class="math notranslate nohighlight">\(0\)</span> to <span class="math notranslate nohighlight">\(n-1\)</span>) is present
so that it remains easy to enumerate the neighbors of vertex <span class="math notranslate nohighlight">\(n-1\)</span> : the
last of them is the element addressed by <code class="docutils literal notranslate"><span class="pre">neighbors[n]-1</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">edge_labels</span></code> – this cython list associates a label to each edge of the
graph. If a given edge is represented by <code class="docutils literal notranslate"><span class="pre">edges[i]</span></code>, this its associated
label can be found at <code class="docutils literal notranslate"><span class="pre">edge_labels[i]</span></code>. This object is usually NULL,
unless the call to <code class="docutils literal notranslate"><span class="pre">init_short_digraph</span></code> explicitly requires the labels
to be stored in the data structure.</li>
</ul>
</div></blockquote>
<p>In the example given above, vertex 0 has 2,3,5,7,8 and 9 as out-neighbors, but
not 4, which is an out-neighbour of vertex 1. Vertex <span class="math notranslate nohighlight">\(n-1\)</span> has 2, 5, 8 and 9 as
out-neighbors. <span class="math notranslate nohighlight">\(\text{neighbors[n]}\)</span> points toward the cell immediately <em>after</em>
the end of <span class="math notranslate nohighlight">\(\text{edges}\)</span>, hence <em>outside of the allocated memory</em>. It is used
to indicate the end of the outneighbors of vertex <span class="math notranslate nohighlight">\(n-1\)</span></p>
<p><strong>Iterating over the edges</strong></p>
<p>This is <em>the one thing</em> to have in mind when working with this data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdef</span> <span class="n">list_edges</span><span class="p">(</span><span class="n">short_digraph</span> <span class="n">g</span><span class="p">):</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">neighbors</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">g</span><span class="o">.</span><span class="n">neighbors</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There is an edge from </span><span class="si">{}</span><span class="s2"> to </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">neighbors</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span>
</pre></div>
</div>
<p><strong>Advantages</strong></p>
<p>Two great points :</p>
<blockquote>
<div><ul class="simple">
<li>The neighbors of a vertex are C types, and are contiguous in memory.</li>
<li>Storing such graphs is incredibly cheaper than storing Python structures.</li>
</ul>
</div></blockquote>
<p>Well, I think it would be hard to have anything more efficient than that to
enumerate out-neighbors in sparse graphs ! :-)</p>
</div>
<div class="section" id="technical-details">
<h2>Technical details<a class="headerlink" href="#technical-details" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>When creating a <code class="docutils literal notranslate"><span class="pre">fast_digraph</span></code> from a <code class="docutils literal notranslate"><span class="pre">Graph</span></code> or <code class="docutils literal notranslate"><span class="pre">DiGraph</span></code> named
<code class="docutils literal notranslate"><span class="pre">G</span></code>, the <span class="math notranslate nohighlight">\(i^{\text{th}}\)</span> vertex corresponds to <code class="docutils literal notranslate"><span class="pre">G.vertices()[i]</span></code></li>
<li>Some methods return <code class="docutils literal notranslate"><span class="pre">bitset_t</span></code> objets when lists could be
expected. There is a very useful <code class="docutils literal notranslate"><span class="pre">bitset_list</span></code> function for this kind of
problems :-)</li>
<li>When the edges are labelled, most of the space taken by this graph is
taken by edge labels. If no edge is labelled then this space is not
allocated, but if <em>any</em> edge has a label then a (possibly empty) label is
stored for each edge, which can double the memory needs.</li>
<li>The data structure stores the number of edges, even though it appears that
this number can be reconstructed with
<code class="docutils literal notranslate"><span class="pre">g.neighbors[n]-g.neighbors[0]</span></code>. The trick is that not all elements of
the <code class="docutils literal notranslate"><span class="pre">g.edges</span></code> array are necessarily used : when an undirected graph
contains loops, only one entry of the array of size <span class="math notranslate nohighlight">\(2m\)</span> is used to store
it, instead of the expected two. Storing the number of edges is the only
way to avoid an uselessly costly computation to obtain the number of edges
of an undirected, looped, AND labelled graph (think of several loops on
the same vertex with different labels).</li>
<li>The codes of this module are well documented, and many answers can be
found directly in the code.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cython-functions">
<h2>Cython functions<a class="headerlink" href="#cython-functions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given contentstable docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">init_short_digraph(short_digraph</span> <span class="pre">g,</span> <span class="pre">G)</span></code></td>
<td>Initializes <code class="docutils literal notranslate"><span class="pre">short_digraph</span> <span class="pre">g</span></code> from a Sage (Di)Graph.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">n_edges(short_digraph</span> <span class="pre">g)</span></code></td>
<td>Returns the number of edges in <code class="docutils literal notranslate"><span class="pre">g</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">out_degree(short_digraph</span> <span class="pre">g,</span> <span class="pre">int</span> <span class="pre">i)</span></code></td>
<td>Returns the out-degree of vertex <span class="math notranslate nohighlight">\(i\)</span> in <code class="docutils literal notranslate"><span class="pre">g</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">has_edge(short_digraph</span> <span class="pre">g,</span> <span class="pre">int</span> <span class="pre">u,</span> <span class="pre">int</span> <span class="pre">v)</span></code></td>
<td>Tests the existence of an edge.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">edge_label(short_digraph</span> <span class="pre">g,</span> <span class="pre">int</span> <span class="pre">*</span> <span class="pre">edge)</span></code></td>
<td>Returns the label associated with a given edge</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">init_empty_copy(short_digraph</span> <span class="pre">dst,</span> <span class="pre">short_digraph</span> <span class="pre">src)</span></code></td>
<td>Allocates <code class="docutils literal notranslate"><span class="pre">dst</span></code> so that it can contain as many vertices and edges as <code class="docutils literal notranslate"><span class="pre">src</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">init_reverse(short_digraph</span> <span class="pre">dst,</span> <span class="pre">short_digraph</span> <span class="pre">src)</span></code></td>
<td>Initializes <code class="docutils literal notranslate"><span class="pre">dst</span></code> to a copy of <code class="docutils literal notranslate"><span class="pre">src</span></code> with all edges in the opposite direction.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">free_short_digraph(short_digraph</span> <span class="pre">g)</span></code></td>
<td>Free the ressources used by <code class="docutils literal notranslate"><span class="pre">g</span></code></td>
</tr>
</tbody>
</table>
<p><strong>Connectivity</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">can_be_reached_from(short_digraph</span> <span class="pre">g,</span> <span class="pre">int</span> <span class="pre">src,</span> <span class="pre">bitset_t</span> <span class="pre">reached)</span></code></p>
<blockquote>
<div>Assuming <code class="docutils literal notranslate"><span class="pre">bitset_t</span> <span class="pre">reached</span></code> has size at least <code class="docutils literal notranslate"><span class="pre">g.n</span></code>, this method updates
<code class="docutils literal notranslate"><span class="pre">reached</span></code> so that it represents the set of vertices that can be reached
from <code class="docutils literal notranslate"><span class="pre">src</span></code> in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">strongly_connected_component_containing_vertex(short_digraph</span> <span class="pre">g,</span> <span class="pre">short_digraph</span> <span class="pre">g_reversed,</span> <span class="pre">int</span> <span class="pre">v,</span> <span class="pre">bitset_t</span> <span class="pre">scc)</span></code></p>
<blockquote>
<div>Assuming <code class="docutils literal notranslate"><span class="pre">bitset_t</span> <span class="pre">reached</span></code> has size at least <code class="docutils literal notranslate"><span class="pre">g.n</span></code>, this method updates
<code class="docutils literal notranslate"><span class="pre">scc</span></code> so that it represents the vertices of the strongly connected
component containing <code class="docutils literal notranslate"><span class="pre">v</span></code> in <code class="docutils literal notranslate"><span class="pre">g</span></code>. The variable <code class="docutils literal notranslate"><span class="pre">g_reversed</span></code> is assumed
to represent the reverse of <code class="docutils literal notranslate"><span class="pre">g</span></code>.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tarjan_strongly_connected_components_C(short_digraph</span> <span class="pre">g,</span> <span class="pre">int</span> <span class="pre">*scc)</span></code></p>
<blockquote>
<div>Assuming <code class="docutils literal notranslate"><span class="pre">scc</span></code> is already allocated and has size at least <code class="docutils literal notranslate"><span class="pre">g.n</span></code>, this
method computes the strongly connected components of <code class="docutils literal notranslate"><span class="pre">g</span></code>, and outputs in
<code class="docutils literal notranslate"><span class="pre">scc[v]</span></code> the number of the strongly connected component containing <code class="docutils literal notranslate"><span class="pre">v</span></code>.
It returns the number of strongly connected components.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">strongly_connected_components_digraph_C(short_digraph</span> <span class="pre">g,</span> <span class="pre">int</span> <span class="pre">nscc,</span> <span class="pre">int</span> <span class="pre">*scc,</span> <span class="pre">short_digraph</span> <span class="pre">output):</span></code></p>
<blockquote>
<div>Assuming <code class="docutils literal notranslate"><span class="pre">nscc</span></code> and <code class="docutils literal notranslate"><span class="pre">scc</span></code> are the outputs of
<code class="docutils literal notranslate"><span class="pre">tarjan_strongly_connected_components_C</span></code> on <code class="docutils literal notranslate"><span class="pre">g</span></code>, this routine
sets <code class="docutils literal notranslate"><span class="pre">output</span></code> to the
strongly connected component digraph of <code class="docutils literal notranslate"><span class="pre">g</span></code>, that is, the vertices of
<code class="docutils literal notranslate"><span class="pre">output</span></code> are the strongly connected components of <code class="docutils literal notranslate"><span class="pre">g</span></code> (numbers are
provided by <code class="docutils literal notranslate"><span class="pre">scc</span></code>), and <code class="docutils literal notranslate"><span class="pre">output</span></code> contains an arc <code class="docutils literal notranslate"><span class="pre">(C1,C2)</span></code> if <code class="docutils literal notranslate"><span class="pre">g</span></code>
has an arc from a vertex in <code class="docutils literal notranslate"><span class="pre">C1</span></code> to a vertex in <code class="docutils literal notranslate"><span class="pre">C2</span></code>.</div></blockquote>
</div>
<div class="section" id="what-is-this-module-used-for">
<h2>What is this module used for ?<a class="headerlink" href="#what-is-this-module-used-for" title="Permalink to this headline">¶</a></h2>
<p>At the moment, it is used in the <a class="reference internal" href="../distances_all_pairs.html#module-sage.graphs.distances_all_pairs" title="sage.graphs.distances_all_pairs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.graphs.distances_all_pairs</span></code></a> module,
and in the
<a class="reference internal" href="../digraph.html#sage.graphs.digraph.DiGraph.strongly_connected_components" title="sage.graphs.digraph.DiGraph.strongly_connected_components"><code class="xref py py-meth docutils literal notranslate"><span class="pre">strongly_connected_components()</span></code></a> method.</p>
</div>
<div class="section" id="python-functions">
<h2>Python functions<a class="headerlink" href="#python-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions are available so that Python modules from Sage can call the
Cython routines this module implements (as they can not directly call methods
with C arguments).</p>
<dl class="attribute">
<dt id="sage.graphs.base.static_sparse_graph.spectral_radius">
<code class="descclassname">sage.graphs.base.static_sparse_graph.</code><code class="descname">spectral_radius</code><a class="headerlink" href="#sage.graphs.base.static_sparse_graph.spectral_radius" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an interval of floating point number that encloses the spectral
radius of this graph</p>
<p>The input graph <code class="docutils literal notranslate"><span class="pre">G</span></code> must be <em>strongly connected</em>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">prec</span></code> – (default <code class="docutils literal notranslate"><span class="pre">1e-10</span></code>) an upper bound for the relative precision
of the interval</li>
</ul>
<p>The algorithm is iterative and uses an inequality valid for non-negative
matrices. Namely, if <span class="math notranslate nohighlight">\(A\)</span> is a non-negative square matrix with
Perron-Frobenius eigenvalue <span class="math notranslate nohighlight">\(\lambda\)</span> then the following inequality is valid
for any vector <span class="math notranslate nohighlight">\(x\)</span></p>
<div class="math notranslate nohighlight">
\[\min_i  \frac{(Ax)_i}{x_i} \leq \lambda \leq \max_i \frac{(Ax)_i}{x_i}\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The speed of convergence of the algorithm is governed by the spectral
gap (the distance to the second largest modulus of other eigenvalues).
If this gap is small, then this function might not be appropriate.</p>
<p class="last">The algorithm is not smart and not parallel! It uses basic interval
arithmetic and native floating point arithmetic.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.base.static_sparse_graph</span> <span class="kn">import</span> <span class="n">spectral_radius</span>

<span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)],</span> <span class="n">loops</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">phi</span> <span class="o">=</span> <span class="p">(</span><span class="n">RR</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">RR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="gp">sage: </span><span class="n">phi</span>  <span class="c1"># abs tol 1e-14</span>
<span class="go">1.618033988749895</span>
<span class="gp">sage: </span><span class="n">e_min</span><span class="p">,</span> <span class="n">e_max</span> <span class="o">=</span> <span class="n">spectral_radius</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mf">1e-14</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">e_min</span><span class="p">,</span> <span class="n">e_max</span>     <span class="c1"># abs tol 1e-14</span>
<span class="go">(1.618033988749894, 1.618033988749896)</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">e_max</span> <span class="o">-</span> <span class="n">e_min</span><span class="p">)</span>  <span class="c1"># abs tol 1e-14</span>
<span class="go">1e-14</span>
<span class="gp">sage: </span><span class="n">e_min</span> <span class="o">&lt;</span> <span class="n">phi</span> <span class="o">&lt;</span> <span class="n">e_max</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This function also works for graphs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">e_min</span><span class="p">,</span> <span class="n">e_max</span> <span class="o">=</span> <span class="n">spectral_radius</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mf">1e-14</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">adjacency_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">charpoly</span><span class="p">()</span><span class="o">.</span><span class="n">roots</span><span class="p">(</span><span class="n">AA</span><span class="p">,</span> <span class="n">multiplicities</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">e_min</span> <span class="o">&lt;</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="n">e_max</span>
<span class="go">True</span>

<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">spectral_radius</span><span class="p">()</span>  <span class="c1"># abs tol 1e-9</span>
<span class="go">(2.48119430408, 2.4811943041)</span>
</pre></div>
</div>
<p>A larger example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">add_edges</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">e_min</span><span class="p">,</span> <span class="n">e_max</span> <span class="o">=</span> <span class="n">spectral_radius</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mf">0.00001</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">adjacency_matrix</span><span class="p">(</span><span class="n">sparse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">charpoly</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">p</span>
<span class="go">x^201 - x^199 - 1</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">roots</span><span class="p">(</span><span class="n">AA</span><span class="p">,</span> <span class="n">multiplicities</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">e_min</span> <span class="o">&lt;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">e_max</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A much larger example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span>
<span class="gp">sage: </span><span class="k">while</span> <span class="ow">not</span> <span class="n">G</span><span class="o">.</span><span class="n">is_strongly_connected</span><span class="p">():</span>
<span class="go">....:     shuffle(r)</span>
<span class="go">....:     G.add_edges(enumerate(r), loops=False)</span>
<span class="gp">sage: </span><span class="n">spectral_radius</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mf">1e-10</span><span class="p">)</span>  <span class="c1"># random</span>
<span class="go">(1.9997956006500042, 1.9998043797692782)</span>
</pre></div>
</div>
<p>The algorithm takes care of multiple edges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">loops</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">multiedges</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">add_edges</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">spectral_radius</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mf">1e-14</span><span class="p">)</span>  <span class="c1"># abs tol 1e-14</span>
<span class="go">(2.414213562373094, 2.414213562373095)</span>
<span class="gp">sage: </span><span class="nb">max</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">adjacency_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">eigenvalues</span><span class="p">(</span><span class="n">AA</span><span class="p">))</span>
<span class="go">2.414213562373095?</span>
</pre></div>
</div>
<p>Some bipartite graphs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">spectral_radius</span><span class="p">()</span>  <span class="c1"># abs tol 1e-10</span>
<span class="go">(1.6180339887253428, 1.6180339887592732)</span>

<span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">spectral_radius</span><span class="p">()</span> <span class="c1"># abs tol 1e-10</span>
<span class="go">(1.5537739740270458, 1.553773974033029)</span>

<span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">graphs</span><span class="o">.</span><span class="n">CompleteBipartiteGraph</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">spectral_radius</span><span class="p">()</span>  <span class="c1"># abs tol 1e-10</span>
<span class="go">(1.7320508075688772, 1.7320508075688774)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sage.graphs.base.static_sparse_graph.strongly_connected_components_digraph">
<code class="descclassname">sage.graphs.base.static_sparse_graph.</code><code class="descname">strongly_connected_components_digraph</code><a class="headerlink" href="#sage.graphs.base.static_sparse_graph.strongly_connected_components_digraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the digraph of the strongly connected components (SCCs).</p>
<p>This routine is used to test <code class="docutils literal notranslate"><span class="pre">strongly_connected_components_digraph_C</span></code>,
but it is not used by the Sage digraph. It outputs a pair <code class="docutils literal notranslate"><span class="pre">[g_scc,scc]</span></code>,
where <code class="docutils literal notranslate"><span class="pre">g_scc</span></code> is the SCC digraph of g, <code class="docutils literal notranslate"><span class="pre">scc</span></code> is a dictionary associating
to each vertex <code class="docutils literal notranslate"><span class="pre">v</span></code> the number of the SCC of <code class="docutils literal notranslate"><span class="pre">v</span></code>, as it appears in
<code class="docutils literal notranslate"><span class="pre">g_scc</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.base.static_sparse_graph</span> <span class="kn">import</span> <span class="n">strongly_connected_components_digraph</span>
<span class="gp">sage: </span><span class="n">strongly_connected_components_digraph</span><span class="p">(</span><span class="n">digraphs</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="go">(Digraph on 3 vertices, {0: 2, 1: 1, 2: 0})</span>
<span class="gp">sage: </span><span class="n">strongly_connected_components_digraph</span><span class="p">(</span><span class="n">DiGraph</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="go">(Digraph on 4 vertices, {0: 0, 1: 1, 2: 2, 3: 3})</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sage.graphs.base.static_sparse_graph.tarjan_strongly_connected_components">
<code class="descclassname">sage.graphs.base.static_sparse_graph.</code><code class="descname">tarjan_strongly_connected_components</code><a class="headerlink" href="#sage.graphs.base.static_sparse_graph.tarjan_strongly_connected_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the lists of vertices in each strongly connected components (SCCs).</p>
<p>This method implements the Tarjan algorithm to compute the strongly
connected components of the digraph. It returns a list of lists of vertices,
each list of vertices representing a strongly connected component.</p>
<p>The basic idea of the algorithm is this: a depth-first search (DFS) begins
from an arbitrary start node (and subsequent DFSes are
conducted on any nodes that have not yet been found). As usual with DFSes,
the search visits every node of the graph exactly once, declining to revisit
any node that has already been explored. Thus, the collection of search
trees is a spanning forest of the graph. The strongly connected components
correspond to the subtrees of this spanning forest that have no edge
directed outside the subtree.</p>
<p>To recover these components, during the DFS, we keep the index of a node,
that is, the position in the DFS tree, and the lowlink: as soon as the
subtree rooted at <span class="math notranslate nohighlight">\(v\)</span> has been fully explored, the lowlink of <span class="math notranslate nohighlight">\(v\)</span> is the
smallest index reachable from <span class="math notranslate nohighlight">\(v\)</span> passing from descendants of <span class="math notranslate nohighlight">\(v\)</span>. If the
subtree rooted at <span class="math notranslate nohighlight">\(v\)</span> has been fully explored, and the index of <span class="math notranslate nohighlight">\(v\)</span> equals
the lowlink of <span class="math notranslate nohighlight">\(v\)</span>, that whole subtree is a new SCC.</p>
<p>For more information, see the
<a class="reference external" href="https://en.wikipedia.org/wiki/Tarjan's_strongly_connected_components_algorithm">Wikipedia article Tarjan’s_strongly_connected_components_algorithm</a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.base.static_sparse_graph</span> <span class="kn">import</span> <span class="n">tarjan_strongly_connected_components</span>
<span class="gp">sage: </span><span class="n">tarjan_strongly_connected_components</span><span class="p">(</span><span class="n">digraphs</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="go">[[2], [1], [0]]</span>
<span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">(</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">1</span> <span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">2</span> <span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">4</span> <span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="mi">5</span> <span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="p">}</span> <span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">connected_components</span><span class="p">()</span>
<span class="go">[[0, 1, 2, 3], [4, 5, 6]]</span>
<span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">(</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">1</span> <span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">2</span> <span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">4</span> <span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="mi">5</span> <span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="p">}</span> <span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">strongly_connected_components</span><span class="p">()</span>
<span class="go">[[3], [2], [1], [0], [6], [5], [4]]</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">add_edge</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">strongly_connected_components</span><span class="p">()</span>
<span class="go">[[3], [0, 1, 2], [6], [5], [4]]</span>
<span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">strongly_connected_components</span><span class="p">()</span>
<span class="go">[[&#39;e&#39;], [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], [&#39;a&#39;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="sage.graphs.base.static_sparse_graph.triangles_count">
<code class="descclassname">sage.graphs.base.static_sparse_graph.</code><code class="descname">triangles_count</code><a class="headerlink" href="#sage.graphs.base.static_sparse_graph.triangles_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of triangles containing <span class="math notranslate nohighlight">\(v\)</span>, for every <span class="math notranslate nohighlight">\(v\)</span>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><span class="math notranslate nohighlight">\(G\)</span>– a graph</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.base.static_sparse_graph</span> <span class="kn">import</span> <span class="n">triangles_count</span>
<span class="gp">sage: </span><span class="n">triangles_count</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">PetersenGraph</span><span class="p">())</span>
<span class="go">{0: 0, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0}</span>
<span class="gp">sage: </span><span class="nb">sum</span><span class="p">(</span><span class="n">triangles_count</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">CompleteGraph</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">binomial</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Static Sparse Graphs</a><ul>
<li><a class="reference internal" href="#what-is-the-point">What is the point ?</a></li>
<li><a class="reference internal" href="#data-structure">Data structure</a></li>
<li><a class="reference internal" href="#technical-details">Technical details</a></li>
<li><a class="reference internal" href="#cython-functions">Cython functions</a></li>
<li><a class="reference internal" href="#what-is-this-module-used-for">What is this module used for ?</a></li>
<li><a class="reference internal" href="#python-functions">Python functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="static_dense_graph.html"
                        title="previous chapter">Static dense graphs</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="static_sparse_backend.html"
                        title="next chapter">Static sparse graph backend</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/sage/graphs/base/static_sparse_graph.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="static_sparse_backend.html" title="Static sparse graph backend"
             >next</a> |</li>
        <li class="right" >
          <a href="static_dense_graph.html" title="Static dense graphs"
             >previous</a> |</li>
  
    
      <a href="../../../../../index.html"><img src="../../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../../index.html">Graph Theory</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2018, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>