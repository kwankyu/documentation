
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="viewport" content="width=600, initial-scale=1">
    <title>Animated plots &#8212; Sage 9.3 Reference Manual: 2D Graphics</title>
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script async="async" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Complex Plots" href="complex_plot.html" />
    <link rel="prev" title="Colors" href="colors.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="complex_plot.html" title="Complex Plots"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="colors.html" title="Colors"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.3 Reference Manual: 2D Graphics</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Animated plots</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="animated-plots">
<span id="sage-plot-animate"></span><h1>Animated plots<a class="headerlink" href="#animated-plots" title="Permalink to this headline">Â¶</a></h1>
<span class="target" id="module-sage.plot.animate"></span><p>Animations are generated from a list (or other iterable) of graphics
objects.
Images are produced by calling the <code class="docutils literal notranslate"><span class="pre">save_image</span></code> method on each input
object, creating a sequence of PNG files.
These are then assembled to various target formats using different
tools.
In particular, the <code class="docutils literal notranslate"><span class="pre">convert</span></code> program from <a class="reference external" href="https://www.imagemagick.org">ImageMagick</a> can be used to
generate an animated GIF file.
<a class="reference external" href="https://www.ffmpeg.org">FFmpeg</a> (with the command line program <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code>) provides support for
various video formats, but also an alternative method of generating
animated GIFs.
For <a class="reference external" href="https://caniuse.com/#feat=apng">browsers which support it</a>, <a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a> can be used as another
alternative which works without any extra dependencies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">ImageMagick</span></code> and <code class="docutils literal notranslate"><span class="pre">FFmpeg</span></code> are not included with Sage, and
must be installed by the user.  On unix systems, type <code class="docutils literal notranslate"><span class="pre">which</span>
<span class="pre">convert</span></code> at a command prompt to see if <code class="docutils literal notranslate"><span class="pre">convert</span></code> (part of the
<code class="docutils literal notranslate"><span class="pre">ImageMagick</span></code> suite) is installed.  If it is, you will be given its
location.  Similarly, you can check for <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> with <code class="docutils literal notranslate"><span class="pre">which</span>
<span class="pre">ffmpeg</span></code>.  See the websites of <a class="reference external" href="https://www.imagemagick.org">ImageMagick</a> or <a class="reference external" href="https://www.ffmpeg.org">FFmpeg</a> for
installation instructions.</p>
</div>
<p>EXAMPLES:</p>
<p>The sine function:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sines</span> <span class="o">=</span> <span class="p">[</span><span class="n">plot</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">ymin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="n">sines</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span>         <span class="c1"># optional -- ImageMagick</span>
<span class="go">Animation with 5 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Animate using <a class="reference external" href="https://www.ffmpeg.org">FFmpeg</a> instead of ImageMagick:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.gif&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">use_ffmpeg</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># optional -- ffmpeg</span>
</pre></div>
</div>
<p>Animate as an <a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">()</span>  <span class="c1"># long time</span>
</pre></div>
</div>
<p>An animated <a class="reference internal" href="multigraphics.html#sage.plot.multigraphics.GraphicsArray" title="sage.plot.multigraphics.GraphicsArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.plot.multigraphics.GraphicsArray</span></code></a> of rotating ellipses:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">graphics_array</span><span class="p">([[</span><span class="n">ellipse</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="n">t</span><span class="p">,</span><span class="n">xmin</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="n">circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">3</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">.</span><span class="mi">15</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="nb">str</span><span class="p">(</span><span class="n">E</span><span class="p">)</span>    <span class="c1"># animations produced from a generator do not have a known length</span>
<span class="go">&#39;Animation with unknown number of frames&#39;</span>
<span class="gp">sage: </span><span class="n">E</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>A simple animation of a circle shooting up to the right:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">circle</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">),</span> <span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">hue</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)],</span>
<span class="gp">....: </span>              <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">ymax</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Animations of 3d objects:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;s,t&#39;</span><span class="p">)</span>
<span class="go">(s, t)</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">sphere_and_plane</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">sphere</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="n">opacity</span><span class="o">=.</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="n">parametric_plot3d</span><span class="p">([</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">],(</span><span class="n">s</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="n">t</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="n">opacity</span><span class="o">=.</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sp</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sphere_and_plane</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">3</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>      <span class="c1"># first frame</span>
<span class="go">Graphics3d Object</span>
<span class="gp">sage: </span><span class="n">sp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>     <span class="c1"># last frame</span>
<span class="go">Graphics3d Object</span>
<span class="gp">sage: </span><span class="n">sp</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># optional -- ImageMagick</span>

<span class="gp">sage: </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s1">&#39;x,y,z&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">frame</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">implicit_plot3d</span><span class="p">((</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">z</span><span class="o">^</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">plot_points</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">contour</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">region</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">:</span> <span class="n">x</span><span class="o">&lt;=</span><span class="n">t</span> <span class="ow">or</span> <span class="n">y</span><span class="o">&gt;=</span><span class="n">t</span> <span class="ow">or</span> <span class="n">z</span><span class="o">&lt;=</span><span class="n">t</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="o">.</span><span class="mo">01</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>       <span class="c1"># long time</span>
<span class="go">Graphics3d Object</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>   <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>If the input objects do not have a <code class="docutils literal notranslate"><span class="pre">save_image</span></code> method, then the
animation object attempts to make an image by calling its internal
method <a class="reference internal" href="#sage.plot.animate.Animation.make_image" title="sage.plot.animate.Animation.make_image"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.plot.animate.Animation.make_image()</span></code></a>.  This is
illustrated by the following example:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">sin</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein</p></li>
<li><p>John Palmieri</p></li>
<li><p>Niles Johnson (2013-12): Expand to animate more graphics objects</p></li>
<li><p>Martin von Gagern (2014-12): Added APNG support</p></li>
<li><p>Joshua Campbell (2020): interactive animation via Three.js viewer</p></li>
</ul>
<p>REFERENCES:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.imagemagick.org">ImageMagick</a></p></li>
<li><p><a class="reference external" href="https://www.ffmpeg.org">FFmpeg</a></p></li>
<li><p><a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a></p></li>
<li><p><a class="reference external" href="https://caniuse.com/#feat=apng">browsers which support it</a></p></li>
</ul>
<dl class="py class">
<dt id="sage.plot.animate.APngAssembler">
<em class="property">class </em><code class="sig-prename descclassname">sage.plot.animate.</code><code class="sig-name descname">APngAssembler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out</span></em>, <em class="sig-param"><span class="n">num_frames</span></em>, <em class="sig-param"><span class="n">num_plays</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">delay</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">delay_denominator</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.APngAssembler" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Builds an <a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a> (Animated PNG) from a sequence of PNG files.
This is used by the <a class="reference internal" href="#sage.plot.animate.Animation.apng" title="sage.plot.animate.Animation.apng"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.plot.animate.Animation.apng()</span></code></a> method.</p>
<p>This code is quite simple; it does little more than copying chunks
from input PNG files to the output file. There is no optimization
involved. This does not depend on external programs or libraries.</p>
<p>INPUT:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code> â a file opened for binary writing to which the data
will be written</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_frames</span></code> â the number of frames in the animation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_plays</span></code> â how often to iterate, 0 means infinitely</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code> â numerator of the delay fraction in seconds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay_denominator</span></code> â denominator of the delay in seconds</p></li>
</ul>
</div></blockquote>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">APngAssembler</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">assembleAPNG</span><span class="p">():</span>
<span class="gp">....: </span>    <span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="gp">....: </span>                <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">....: </span>    <span class="n">pngdir</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">png</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">outfile</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">temporary_file</span><span class="o">.</span><span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.png&#39;</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="n">apng</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="gp">....: </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
<span class="gp">....: </span>            <span class="n">png</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pngdir</span><span class="p">,</span> <span class="s2">&quot;{:08d}.png&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="gp">....: </span>            <span class="n">apng</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="n">png</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">outfile</span>
<span class="gp">sage: </span><span class="n">assembleAPNG</span><span class="p">()</span>  <span class="c1"># long time</span>
<span class="go">&#39;...png&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="sage.plot.animate.APngAssembler.add_frame">
<code class="sig-name descname">add_frame</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pngfile</span></em>, <em class="sig-param"><span class="n">delay</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">delay_denominator</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.APngAssembler.add_frame" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Adds a single frame to the APNG file.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pngfile</span></code> â file name of the PNG file with data for this frame</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code> â numerator of the delay fraction in seconds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay_denominator</span></code> â denominator of the delay in seconds</p></li>
</ul>
<p>If the delay is not specified, the default from the constructor
applies.</p>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.APngAssembler.set_default">
<code class="sig-name descname">set_default</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pngfile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.APngAssembler.set_default" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Adds a default image for the APNG file.</p>
<p>This image is used as a fallback in case some application does
not understand the APNG format.  This method must be called
prior to any calls to the <code class="docutils literal notranslate"><span class="pre">add_frame</span></code> method, if it is called
at all.  If it is not called, then the first frame of the
animation will be the default.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pngfile</span></code> â file name of the PNG file with data
for the default image</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="sage.plot.animate.Animation">
<em class="property">class </em><code class="sig-prename descclassname">sage.plot.animate.</code><code class="sig-name descname">Animation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">v</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../misc/sage/misc/fast_methods.html#sage.misc.fast_methods.WithEqualityById" title="(in Sage 9.3 Reference Manual: Utilities v9.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.misc.fast_methods.WithEqualityById</span></code></a>, <a class="reference external" href="../../../structure/sage/structure/sage_object.html#sage.structure.sage_object.SageObject" title="(in Sage 9.3 Reference Manual: Parents and Elements v9.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.sage_object.SageObject</span></code></a></p>
<p>Return an animation of a sequence of plots of objects.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">v</span></code> - iterable of Sage objects. These should preferably be
graphics objects, but if they arenât then <a class="reference internal" href="#sage.plot.animate.Animation.make_image" title="sage.plot.animate.Animation.make_image"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make_image()</span></code></a> is
called on them.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xmin,</span> <span class="pre">xmax,</span> <span class="pre">ymin,</span> <span class="pre">ymax</span></code> - the ranges of the x and y axes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">**kwds</span></code> - all additional inputs are passed onto the rendering
command. E.g., use figsize to adjust the resolution and aspect
ratio.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)],</span>
<span class="gp">....: </span>               <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">a</span>                 <span class="c1"># optional -- ImageMagick</span>
<span class="go">Animation with 21 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>             <span class="c1"># optional -- ImageMagick</span>
<span class="go">Animation with 5 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>          <span class="c1"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>      <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#sage.plot.animate.Animation.show" title="sage.plot.animate.Animation.show"><code class="xref py py-meth docutils literal notranslate"><span class="pre">show()</span></code></a> method takes arguments to specify the
delay between frames (measured in hundredths of a second, default
value 20) and the number of iterations (default value 0, which
means to iterate forever). To iterate 4 times with half a second
between each frame:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>An animation of drawing a parabola:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">Graphics</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">step</span><span class="p">):</span>
<span class="gp">....: </span>      <span class="n">L</span> <span class="o">+=</span> <span class="n">line</span><span class="p">([(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">^</span><span class="mi">2</span><span class="p">),(</span><span class="n">i</span><span class="o">+</span><span class="n">step</span><span class="p">,(</span><span class="n">i</span><span class="o">+</span><span class="n">step</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span><span class="p">)],</span> <span class="n">rgbcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">....: </span>      <span class="n">v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="n">show</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="sage.plot.animate.Animation.apng">
<code class="sig-name descname">apng</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">savefile</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">show_path</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">delay</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">iterations</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.apng" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Creates an animated PNG composed from rendering the graphics
objects in self. Return the absolute path to that file.</p>
<p>Notice that not all web browsers are capable of displaying APNG
files, though they should still present the first frame of the
animation as a fallback.</p>
<p>The generated file is not optimized, so it may be quite large.</p>
<p>Input:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code> - (default: 20) delay in hundredths of a
second between frames</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">savefile</span></code> - file that the animated gif gets saved
to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iterations</span></code> - integer (default: 0); number of
iterations of animation. If 0, loop forever.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_path</span></code> - boolean (default: False); if True,
print the path to the saved file</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="gp">....: </span>               <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="nb">dir</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">()</span>  <span class="c1"># long time</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="nb">dir</span> <span class="o">+</span> <span class="s1">&#39;my_animation.png&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># long time</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="nb">dir</span> <span class="o">+</span> <span class="s1">&#39;my_animation.png&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  <span class="c1"># long time</span>
<span class="go">Animation saved to .../my_animation.png.</span>
</pre></div>
</div>
<p>If the individual frames have different sizes, an error will be raised:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)],</span>
<span class="gp">....: </span>            <span class="n">ymin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">()</span>  <span class="c1"># long time</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Chunk IHDR mismatch</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.ffmpeg">
<code class="sig-name descname">ffmpeg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">savefile</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">show_path</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">output_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ffmpeg_options</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">delay</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">iterations</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">pix_fmt</span><span class="o">=</span><span class="default_value">'rgb24'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.ffmpeg" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return a movie showing an animation composed from rendering
the frames in <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>This method will only work if <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> is installed.  See
<a class="reference external" href="https://www.ffmpeg.org">https://www.ffmpeg.org</a> for information about <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">savefile</span></code> â file that the mpeg gets saved to.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This will overwrite <code class="docutils literal notranslate"><span class="pre">savefile</span></code> if it already exists.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">show_path</span></code> â boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); if <code class="docutils literal notranslate"><span class="pre">True</span></code>,
print the path to the saved file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_format</span></code> - string (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>); format and
suffix to use for the video.  This may be <code class="docutils literal notranslate"><span class="pre">'mpg'</span></code>, <code class="docutils literal notranslate"><span class="pre">'mpeg'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'avi'</span></code>, <code class="docutils literal notranslate"><span class="pre">'gif'</span></code>, or any other format that <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> can handle.
If this is <code class="docutils literal notranslate"><span class="pre">None</span></code> and the user specifies <code class="docutils literal notranslate"><span class="pre">savefile</span></code> with a
suffix, say <code class="docutils literal notranslate"><span class="pre">savefile='animation.avi'</span></code>, try to determine the
format (<code class="docutils literal notranslate"><span class="pre">'avi'</span></code> in this case) from that file name.  If no file
is specified or if the suffix cannot be determined, <code class="docutils literal notranslate"><span class="pre">'mpg'</span></code> is
used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ffmpeg_options</span></code> - string (default: <code class="docutils literal notranslate"><span class="pre">''</span></code>); this string is
passed directly to ffmpeg.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code> - integer (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>); delay in hundredths of a
second between frames.  The framerate is 100/delay.
This is not supported for mpeg files: for mpegs, the frame
rate is always 25 fps.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iterations</span></code> - integer (default: 0); number of iterations
of animation. If 0, loop forever.  This is only supported
for animated gif output and requires <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> version 0.9 or
later.  For older versions, set <code class="docutils literal notranslate"><span class="pre">iterations=None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pix_fmt</span></code> - string (default: ârgb24â); used only for gif
output.  Different values such as ârgb8â or âpal8â may be
necessary depending on how ffmpeg was installed.  Set
<code class="docutils literal notranslate"><span class="pre">pix_fmt=None</span></code> to disable this option.</p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">savefile</span></code> is not specified: in notebook mode, display
the animation; otherwise, save it to a default file name.  Use
<a class="reference external" href="../../../misc/sage/misc/verbose.html#sage.misc.verbose.set_verbose" title="(in Sage 9.3 Reference Manual: Utilities v9.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage.misc.verbose.set_verbose()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">level=1</span></code> to see
additional output.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="gp">....: </span>            <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">td</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;new.mpg&#39;</span><span class="p">)</span>       <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;new.avi&#39;</span><span class="p">)</span>       <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;new.gif&#39;</span><span class="p">)</span>       <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;new.mpg&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># optional -- ffmpeg</span>
<span class="go">Animation saved to .../new.mpg.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If ffmpeg is not installed, you will get an error message
like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">Error: ffmpeg does not appear to be installed. Saving an animation to</span>
<span class="go">a movie file in any format other than GIF requires this software, so</span>
<span class="go">please install it and try again.</span>

<span class="go">See www.ffmpeg.org for more information.</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.gif">
<code class="sig-name descname">gif</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">delay</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">savefile</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">iterations</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">show_path</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_ffmpeg</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.gif" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns an animated gif composed from rendering the graphics
objects in self.</p>
<p>This method will only work if either (a) the ImageMagick
software suite is installed, i.e., you have the <code class="docutils literal notranslate"><span class="pre">convert</span></code>
command or (b) <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> is installed.  See the web sites of
<a class="reference external" href="https://www.imagemagick.org">ImageMagick</a> and <a class="reference external" href="https://www.ffmpeg.org">FFmpeg</a> for more details.  By default, this
produces the gif using <code class="docutils literal notranslate"><span class="pre">convert</span></code> if it is present.  If this
canât find <code class="docutils literal notranslate"><span class="pre">convert</span></code> or if <code class="docutils literal notranslate"><span class="pre">use_ffmpeg</span></code> is True, then it
uses <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> instead.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code> - (default: 20) delay in hundredths of a
second between frames</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">savefile</span></code> - file that the animated gif gets saved
to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iterations</span></code> - integer (default: 0); number of
iterations of animation. If 0, loop forever.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_path</span></code> - boolean (default: False); if True,
print the path to the saved file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_ffmpeg</span></code> - boolean (default: False); if True, use
âffmpegâ by default instead of âconvertâ.</p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">savefile</span></code> is not specified: in notebook mode, display the
animation; otherwise, save it to a default file name.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="gp">....: </span>            <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">td</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">()</span>              <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;my_animation.gif&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;my_animation.gif&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x21\xf9\x04\x08\x23\x00</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>  <span class="c1"># optional -- ImageMagick</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;my_animation.gif&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># optional -- ImageMagick</span>
<span class="go">Animation saved to .../my_animation.gif.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;my_animation_2.gif&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_ffmpeg</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># optional -- ffmpeg</span>
<span class="go">Animation saved to .../my_animation_2.gif.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If neither ffmpeg nor ImageMagick is installed, you will
get an error message like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">Error: Neither ImageMagick nor ffmpeg appears to be installed. Saving an</span>
<span class="go">animation to a GIF file or displaying an animation requires one of these</span>
<span class="go">packages, so please install one of them and try again.</span>

<span class="go">See www.imagemagick.org and www.ffmpeg.org for more information.</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.graphics_array">
<code class="sig-name descname">graphics_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncols</span><span class="o">=</span><span class="default_value">3</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.graphics_array" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return a <a class="reference internal" href="multigraphics.html#sage.plot.multigraphics.GraphicsArray" title="sage.plot.multigraphics.GraphicsArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.plot.multigraphics.GraphicsArray</span></code></a> with plots of the
frames of this animation, using the given number of columns.
The frames must be acceptable inputs for
<a class="reference internal" href="multigraphics.html#sage.plot.multigraphics.GraphicsArray" title="sage.plot.multigraphics.GraphicsArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.plot.multigraphics.GraphicsArray</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="s1">&#39;37a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">E</span><span class="o">.</span><span class="n">change_ring</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pointsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">97</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">107</span><span class="p">]]</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span>        <span class="c1"># optional -- ImageMagick</span>
<span class="go">Animation with 4 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Modify the default arrangement of array:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">graphics_array</span><span class="p">();</span> <span class="k">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">Graphics Array of size 2 x 3</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>  <span class="c1"># not tested</span>
</pre></div>
</div>
<p>Specify different arrangement of array and save it with a given file name:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">graphics_array</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span> <span class="k">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">Graphics Array of size 2 x 2</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.png&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>Frames can be specified as a generator too; it is internally converted to a list:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">graphics_array</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">g</span>
<span class="go">Graphics Array of size 2 x 3</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.interactive">
<code class="sig-name descname">interactive</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.interactive" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create an interactive depiction of the animation.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">**kwds</span></code> â any of the viewing options accepted by show() are valid
as keyword arguments to this function and they will behave in the same
way. Those that are animation-related and recognized by the Three.js
viewer are: <code class="docutils literal notranslate"><span class="pre">animate</span></code>, <code class="docutils literal notranslate"><span class="pre">animation_controls</span></code>, <code class="docutils literal notranslate"><span class="pre">auto_play</span></code>,
<code class="docutils literal notranslate"><span class="pre">delay</span></code>, and <code class="docutils literal notranslate"><span class="pre">loop</span></code>.</p></li>
</ul>
<p>OUTPUT:</p>
<p>A 3D graphics object which, by default, will use the Three.js viewer.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">point3d</span><span class="p">((</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">16</span><span class="p">,</span> <span class="o">..</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">animate</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">online</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">Graphics3d Object</span>
</pre></div>
</div>
<p>Works with frames that are 2D or 3D graphics objects or convertible to
2D or 3D graphics objects via a <code class="docutils literal notranslate"><span class="pre">plot</span></code> or <code class="docutils literal notranslate"><span class="pre">plot3d</span></code> method:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">dodecahedron</span><span class="p">(),</span> <span class="n">circle</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">animate</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">online</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="go">Graphics3d Object</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="../../../plot3d/threejs.html#threejs-viewer" title="(in Sage 9.3 Reference Manual: 3D Graphics v9.3)"><span>Three.js JavaScript WebGL Renderer</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.make_image">
<code class="sig-name descname">make_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frame</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.make_image" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given a frame which has no <code class="docutils literal notranslate"><span class="pre">save_image()</span></code> method, make a graphics
object and save it as an image with the given filename.  By default, this is
<a class="reference internal" href="plot.html#sage.plot.plot.plot" title="sage.plot.plot.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.plot.plot.plot()</span></code></a>.  To make animations of other objects,
override this method in a subclass.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">Animation</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyAnimation</span><span class="p">(</span><span class="n">Animation</span><span class="p">):</span>
<span class="gp">....: </span>   <span class="k">def</span> <span class="nf">make_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
<span class="gp">....: </span>       <span class="n">P</span> <span class="o">=</span> <span class="n">parametric_plot</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">frame</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">frame</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">....: </span>       <span class="n">P</span><span class="o">.</span><span class="n">save_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">y</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">n</span>
<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">MyAnimation</span><span class="p">([([</span><span class="n">x</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],(</span><span class="n">t</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="n">Color</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="o">/</span><span class="mi">4</span><span class="p">)),</span> <span class="s1">&#39;aspect_ratio&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ymax&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)])</span>

<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">png</span><span class="p">();</span> <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">v</span>  <span class="c1"># long time</span>
<span class="go">[&#39;00000000.png&#39;, &#39;00000001.png&#39;, &#39;00000002.png&#39;, &#39;00000003.png&#39;]</span>
<span class="gp">sage: </span><span class="n">B</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># not tested</span>

<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyAnimation</span><span class="p">(</span><span class="n">Animation</span><span class="p">):</span>
<span class="gp">....: </span>   <span class="k">def</span> <span class="nf">make_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
<span class="gp">....: </span>       <span class="n">G</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">....: </span>       <span class="n">G</span><span class="o">.</span><span class="n">set_axes_range</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">xmin</span><span class="p">()),</span><span class="n">ceil</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">xmax</span><span class="p">()),</span><span class="n">floor</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">ymin</span><span class="p">()),</span><span class="n">ceil</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">ymax</span><span class="p">()))</span>
<span class="gp">....: </span>       <span class="n">G</span><span class="o">.</span><span class="n">save_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">MyAnimation</span><span class="p">([</span><span class="n">graphs</span><span class="o">.</span><span class="n">CompleteGraph</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">)],</span> <span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">png</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">v</span>
<span class="go">[&#39;00000000.png&#39;, &#39;00000001.png&#39;, &#39;00000002.png&#39;, &#39;00000003.png&#39;]</span>
<span class="gp">sage: </span><span class="n">B</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># not tested</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.png">
<code class="sig-name descname">png</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.png" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Render PNG images of the frames in this animation, saving them
in <code class="docutils literal notranslate"><span class="pre">dir</span></code>.  Return the absolute path to that directory.  If
the frames have been previously rendered and <code class="docutils literal notranslate"><span class="pre">dir</span></code> is
<code class="docutils literal notranslate"><span class="pre">None</span></code>, just return the directory in which they are stored.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">dir</span></code> is other than <code class="docutils literal notranslate"><span class="pre">None</span></code>, force re-rendering of
frames.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dir</span></code> â Directory in which to store frames.  Default
<code class="docutils literal notranslate"><span class="pre">None</span></code>; in this case, a temporary directory will be
created for storing the frames.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">png</span><span class="p">();</span> <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">v</span>  <span class="c1"># long time</span>
<span class="go">[&#39;00000000.png&#39;, &#39;00000001.png&#39;, &#39;00000002.png&#39;, &#39;00000003.png&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">show_path</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_ffmpeg</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.save" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Save this animation.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code> - (default: None) name of save file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_path</span></code> - boolean (default: False); if True,
print the path to the saved file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_ffmpeg</span></code> - boolean (default: False); if True, use
âffmpegâ by default instead of âconvertâ when creating GIF
files.</p></li>
</ul>
<p>If filename is None, then in notebook mode, display the
animation; otherwise, save the animation to a GIF file. If
filename ends in â.htmlâ, save an <a class="reference internal" href="#sage.plot.animate.Animation.interactive" title="sage.plot.animate.Animation.interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interactive()</span></code></a> version of
the animation to an HTML file that uses the Three.js viewer.  If
filename ends in â.sobjâ, save to an sobj file.  Otherwise,
try to determine the format from the filename extension
(â.mpgâ, â.gifâ, â.aviâ, etc.).  If the format cannot be
determined, default to GIF.</p>
<p>For GIF files, either ffmpeg or the ImageMagick suite must be
installed.  For other movie formats, ffmpeg must be installed.
sobj and HTML files can be saved with no extra software installed.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="gp">....: </span>            <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">td</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>         <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave.gif&#39;</span><span class="p">)</span>   <span class="c1"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c1"># optional -- ImageMagick</span>
<span class="go">Animation saved to file .../wave.gif.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave.avi&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c1"># optional -- ffmpeg</span>
<span class="go">Animation saved to file .../wave.avi.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave0.sobj&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave1.sobj&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">Animation saved to file .../wave1.sobj.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave0.html&#39;</span><span class="p">,</span> <span class="n">online</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s1">&#39;wave1.html&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">online</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">Animation saved to file .../wave1.html.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="sage.plot.animate.Animation.show">
<code class="sig-name descname">show</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">delay</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">iterations</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.Animation.show" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Show this animation immediately.</p>
<p>This method attempts to display the graphics immediately,
without waiting for the currently running code (if any) to
return to the command line. Be careful, calling it from within
a loop will potentially launch a large number of external
viewer programs.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code> â (default: 20) delay in hundredths of a
second between frames.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iterations</span></code> â integer (default: 0); number of
iterations of animation. If 0, loop forever.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> - (default: gif) format to use for output.
Currently supported formats are: gif,
ogg, webm, mp4, flash, matroska, avi, wmv, quicktime.</p></li>
</ul>
<p>OUTPUT:</p>
<p>This method does not return anything. Use <a class="reference internal" href="#sage.plot.animate.Animation.save" title="sage.plot.animate.Animation.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a> if you
want to save the figure as an image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently this is done using an animated gif, though this
could change in the future. This requires that either
ffmpeg or the ImageMagick suite (in particular, the
<code class="docutils literal notranslate"><span class="pre">convert</span></code> command) is installed.</p>
</div>
<p>See also the <a class="reference internal" href="#sage.plot.animate.Animation.ffmpeg" title="sage.plot.animate.Animation.ffmpeg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ffmpeg()</span></code></a> method.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="gp">....: </span>               <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>       <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>The preceding will loop the animation forever. If you want to show
only three iterations instead:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>    <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>To put a half-second delay between frames:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>        <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>You can also make use of the HTML5 video element in the Sage Notebook:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;ogg&quot;</span><span class="p">)</span>         <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;webm&quot;</span><span class="p">)</span>        <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;mp4&quot;</span><span class="p">)</span>         <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;webm&quot;</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># optional -- ffmpeg</span>
</pre></div>
</div>
<p>Other backends may support other file formats as well:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;flash&quot;</span><span class="p">)</span>       <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;matroska&quot;</span><span class="p">)</span>    <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;avi&quot;</span><span class="p">)</span>         <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;wmv&quot;</span><span class="p">)</span>         <span class="c1"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;quicktime&quot;</span><span class="p">)</span>   <span class="c1"># optional -- ffmpeg</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you donât have ffmpeg or ImageMagick installed, you will
get an error message like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">Error: Neither ImageMagick nor ffmpeg appears to be installed. Saving an</span>
<span class="go">animation to a GIF file or displaying an animation requires one of these</span>
<span class="go">packages, so please install one of them and try again.</span>

<span class="go">See www.imagemagick.org and www.ffmpeg.org for more information.</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="sage.plot.animate.animate">
<code class="sig-prename descclassname">sage.plot.animate.</code><code class="sig-name descname">animate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frames</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.plot.animate.animate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Animate a list of frames by creating a
<a class="reference internal" href="#sage.plot.animate.Animation" title="sage.plot.animate.Animation"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.plot.animate.Animation</span></code></a> object.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">cos</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#module-sage.plot.animate" title="sage.plot.animate"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.plot.animate</span></code></a> for more examples.</p>
</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="colors.html"
                        title="previous chapter">Colors</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="complex_plot.html"
                        title="next chapter">Complex Plots</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/plot/animate.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="complex_plot.html" title="Complex Plots"
             >next</a> |</li>
        <li class="right" >
          <a href="colors.html" title="Colors"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.3 Reference Manual: 2D Graphics</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Animated plots</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2021, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>