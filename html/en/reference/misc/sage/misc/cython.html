
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Cython support functions &#8212; Sage Reference Manual v8.6: Utilities</title>
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Fortran compiler" href="inline_fortran.html" />
    <link rel="prev" title="Fast Numerical Evaluation" href="../ext/fast_eval.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="inline_fortran.html" title="Fortran compiler"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../ext/fast_eval.html" title="Fast Numerical Evaluation"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cython-support-functions">
<span id="sage-misc-cython"></span><h1>Cython support functions<a class="headerlink" href="#cython-support-functions" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.misc.cython"></span><p>AUTHORS:</p>
<ul class="simple">
<li>William Stein (2006-01-18): initial version</li>
<li>William Stein (2007-07-28): update from sagex to cython</li>
<li>Martin Albrecht &amp; William Stein (2011-08): cfile &amp; cargs</li>
</ul>
<dl class="function">
<dt id="sage.misc.cython.compile_and_load">
<code class="descclassname">sage.misc.cython.</code><code class="descname">compile_and_load</code><span class="sig-paren">(</span><em>code</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.compile_and_load" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">code</span></code> – string containing code that could be in a .pyx file
that is attached or put in a %cython block in the notebook.</li>
</ul>
<p>OUTPUT: a module, which results from compiling the given code and
importing it</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.cython</span> <span class="kn">import</span> <span class="n">compile_and_load</span>
<span class="gp">sage: </span><span class="n">module</span> <span class="o">=</span> <span class="n">compile_and_load</span><span class="p">(</span><span class="s2">&quot;def f(int n):</span><span class="se">\n</span><span class="s2">    return n*n&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">module</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">100</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.cython">
<code class="descclassname">sage.misc.cython.</code><code class="descname">cython</code><span class="sig-paren">(</span><em>filename</em>, <em>verbose=0</em>, <em>compile_message=False</em>, <em>use_cache=False</em>, <em>create_local_c_file=False</em>, <em>annotate=True</em>, <em>sage_namespace=True</em>, <em>create_local_so_file=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile a Cython file. This converts a Cython file to a C (or C++ file),
and then compiles that. The .c file and the .so file are
created in a temporary directory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">filename</span></code> – the name of the file to be compiled. Should end with
‘pyx’.</li>
<li><code class="docutils literal notranslate"><span class="pre">verbose</span></code> (integer, default 0) – level of verbosity. A negative
value ensures complete silence.</li>
<li><code class="docutils literal notranslate"><span class="pre">compile_message</span></code> (bool, default False) – if True, print
<code class="docutils literal notranslate"><span class="pre">'Compiling</span> <span class="pre">&lt;filename&gt;...'</span></code> to the standard error.</li>
<li><code class="docutils literal notranslate"><span class="pre">use_cache</span></code> (bool, default False) – if True, check the
temporary build directory to see if there is already a
corresponding .so file. If so, and if the .so file is newer than the
Cython file, don’t recompile, just reuse the .so file.</li>
<li><code class="docutils literal notranslate"><span class="pre">create_local_c_file</span></code> (bool, default False) – if True, save a
copy of the <code class="docutils literal notranslate"><span class="pre">.c</span></code> or <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file in the current directory.</li>
<li><code class="docutils literal notranslate"><span class="pre">annotate</span></code> (bool, default True) – if True, create an html file which
annotates the conversion from .pyx to .c. By default this is only created
in the temporary directory, but if <code class="docutils literal notranslate"><span class="pre">create_local_c_file</span></code> is also True,
then save a copy of the .html file in the current directory.</li>
<li><code class="docutils literal notranslate"><span class="pre">sage_namespace</span></code> (bool, default True) – if True, import
<code class="docutils literal notranslate"><span class="pre">sage.all</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">create_local_so_file</span></code> (bool, default False) – if True, save a
copy of the compiled .so file in the current directory.</li>
</ul>
<p>OUTPUT: a tuple <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">dir)</span></code> where <code class="docutils literal notranslate"><span class="pre">name</span></code> is the name
of the compiled module and <code class="docutils literal notranslate"><span class="pre">dir</span></code> is the directory containing
the generated files.</p>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.cython_compile">
<code class="descclassname">sage.misc.cython.</code><code class="descname">cython_compile</code><span class="sig-paren">(</span><em>code</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.cython_compile" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a block of Cython code (as a text string), this function
compiles it using a C compiler, and includes it into the global
namespace.</p>
<p>AUTHOR: William Stein, 2006-10-31</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Only use this from Python code, not from extension code, since
from extension code you would change the global scope (i.e.,
of the Sage interpreter). And it would be stupid, since you’re
already writing Cython!</p>
<p class="last">Also, never use this in the standard Sage library.  Any code
that uses this can only run on a system that has a C compiler
installed, and we want to avoid making that assumption for
casual Sage usage.  Also, any code that uses this in the
library would greatly slow down startup time, since currently
there is no caching.</p>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Need to create a clever caching system so code only gets
compiled once.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.cython_create_local_so">
<code class="descclassname">sage.misc.cython.</code><code class="descname">cython_create_local_so</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.cython_create_local_so" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile filename and make it available as a loadable shared object file.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">filename</span></code> - string: a Cython (.spyx) file</li>
</ul>
<p>OUTPUT: None</p>
<p>EFFECT: A compiled, python “importable” loadable shared object file is created.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Shared object files are <em>not</em> reloadable. The intent is for
imports in other scripts. A possible development cycle might
go thus:</p>
<ul class="last simple">
<li>Attach a .spyx file</li>
<li>Interactively test and edit it to your satisfaction</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">cython_create_local_so</span></code> to create the shared object file</li>
<li>Import the .so file in other scripts</li>
</ul>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">curdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">dir</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">();</span> <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;hello.spyx&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;def hello():</span><span class="se">\n</span><span class="s2">    print(&#39;hello&#39;)</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="gp">sage: </span><span class="n">_</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">cython_create_local_so</span><span class="p">(</span><span class="s1">&#39;hello.spyx&#39;</span><span class="p">)</span>
<span class="go">doctest:...: DeprecationWarning: cython_create_local_so is deprecated, call cython() with the create_local_so_file=True keyword</span>
<span class="go">See http://trac.sagemath.org/24722 for details.</span>
<span class="go">Compiling hello.spyx...</span>
<span class="gp">sage: </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">hello</span>
<span class="gp">sage: </span><span class="n">hello</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
<span class="go">hello</span>
<span class="gp">sage: </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">curdir</span><span class="p">)</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>David Fu (2008-04-09): initial version</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.cython_import">
<code class="descclassname">sage.misc.cython.</code><code class="descname">cython_import</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.cython_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile a file containing Cython code, then import and return the
module.  Raises an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> if anything goes wrong.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">filename</span></code> - a string; name of a file that contains Cython
code</li>
</ul>
<p>See the function <a class="reference internal" href="#sage.misc.cython.cython" title="sage.misc.cython.cython"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage.misc.cython.cython()</span></code></a> for documentation
for the other inputs.</p>
<p>OUTPUT:</p>
<ul class="simple">
<li>the module that contains the compiled Cython code.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.cython_import_all">
<code class="descclassname">sage.misc.cython.</code><code class="descname">cython_import_all</code><span class="sig-paren">(</span><em>filename</em>, <em>globals</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.cython_import_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports all non-private (i.e., not beginning with an underscore)
attributes of the specified Cython module into the given context.
This is similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">module</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Raises an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> exception if anything goes wrong.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">filename</span></code> - a string; name of a file that contains Cython
code</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.cython_lambda">
<code class="descclassname">sage.misc.cython.</code><code class="descname">cython_lambda</code><span class="sig-paren">(</span><em>vars</em>, <em>expr</em>, <em>verbose=0</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.cython_lambda" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a compiled function which evaluates <code class="docutils literal notranslate"><span class="pre">expr</span></code> assuming machine values
for <code class="docutils literal notranslate"><span class="pre">vars</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">vars</span></code> - list of pairs (variable name, c-data type), where the variable
names and data types are strings, OR a string such as <code class="docutils literal notranslate"><span class="pre">'double</span> <span class="pre">x,</span> <span class="pre">int</span> <span class="pre">y,</span>
<span class="pre">int</span> <span class="pre">z'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">expr</span></code> - an expression involving the vars and constants; you can access
objects defined in the current module scope <code class="docutils literal notranslate"><span class="pre">globals()</span></code> using
<code class="docutils literal notranslate"><span class="pre">sage.object_name</span></code>.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Accessing <code class="docutils literal notranslate"><span class="pre">globals()</span></code> doesn’t actually work, see <a class="reference external" href="https://trac.sagemath.org/12446">trac ticket #12446</a>.</p>
</div>
<p>EXAMPLES:</p>
<p>We create a Lambda function in pure Python (using the r to make sure the 3.2
is viewed as a Python float):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">17</span><span class="n">r</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mf">3.2</span><span class="n">r</span>
</pre></div>
</div>
<p>We make the same Lambda function, but in a compiled form.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">cython_lambda</span><span class="p">(</span><span class="s1">&#39;double x, double y&#39;</span><span class="p">,</span> <span class="s1">&#39;x*x + y*y + x + y + 17*x + 3.2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">55.2</span>
<span class="gp">sage: </span><span class="n">g</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">3.2</span>
</pre></div>
</div>
<p>In order to access Sage globals, prefix them with <code class="docutils literal notranslate"><span class="pre">sage.</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">cython_lambda</span><span class="p">(</span><span class="s1">&#39;double x&#39;</span><span class="p">,</span> <span class="s1">&#39;sage.sin(x) + sage.a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NameError</span>: <span class="n">global &#39;a&#39; is not defined</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">24.45597888911063</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="mi">50</span>
<span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">49.45597888911063</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.cython.sanitize">
<code class="descclassname">sage.misc.cython.</code><code class="descname">sanitize</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.cython.sanitize" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a filename <code class="docutils literal notranslate"><span class="pre">f</span></code>, replace it by a filename that is a valid Python
module name.</p>
<p>This means that the characters are all alphanumeric or <code class="docutils literal notranslate"><span class="pre">_</span></code>’s and doesn’t
begin with a numeral.</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.cython</span> <span class="kn">import</span> <span class="n">sanitize</span>
<span class="gp">sage: </span><span class="n">sanitize</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="go">&#39;abc&#39;</span>
<span class="gp">sage: </span><span class="n">sanitize</span><span class="p">(</span><span class="s1">&#39;abc/def&#39;</span><span class="p">)</span>
<span class="go">&#39;abc_def&#39;</span>
<span class="gp">sage: </span><span class="n">sanitize</span><span class="p">(</span><span class="s1">&#39;123/def-hij/file.py&#39;</span><span class="p">)</span>
<span class="go">&#39;_123_def_hij_file_py&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../ext/fast_eval.html"
                        title="previous chapter">Fast Numerical Evaluation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="inline_fortran.html"
                        title="next chapter">Fortran compiler</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/misc/cython.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="inline_fortran.html" title="Fortran compiler"
             >next</a> |</li>
        <li class="right" >
          <a href="../ext/fast_eval.html" title="Fast Numerical Evaluation"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2019, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>