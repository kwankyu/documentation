
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Random Number States &#8212; Sage 9.4 Reference Manual: Utilities</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sage.css" />
    <script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Random Numbers with Python API" href="prandom.html" />
    <link rel="prev" title="Functional notation" href="functional.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="prandom.html" title="Random Numbers with Python API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="functional.html" title="Functional notation"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.4 Reference Manual: Utilities</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Random Number States</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="random-number-states">
<span id="sage-misc-randstate"></span><h1>Random Number States<a class="headerlink" href="#random-number-states" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.misc.randstate"></span><p>AUTHORS:</p>
<ul class="simple">
<li><p>Carl Witty (2008-03): new file</p></li>
</ul>
<p>This module manages all the available pseudo-random number generators
in Sage.  (For the rest of the documentation in this module, we will
drop the “pseudo”.)</p>
<p>The goal is to allow algorithms using random numbers to be
reproducible from one run of Sage to the next, and (to the extent
possible) from one machine to the next (even across different
operating systems and architectures).</p>
<p>There are two parts to the API.  First we will describe the
command line oriented API, for setting random number generator seeds.
Then we will describe the library API, for people writing Sage
library code that uses random numbers.</p>
<section id="command-line-oriented-api">
<h2>Command line oriented API<a class="headerlink" href="#command-line-oriented-api" title="Permalink to this headline">¶</a></h2>
<p>We’ll start with the simplest usage: setting fixed random number seeds
and showing that these lead to reproducible results.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">K</span><span class="o">.&lt;</span><span class="n">x</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">PermutationGroup</span><span class="p">([[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)]])</span>
<span class="gp">sage: </span><span class="n">rgp</span> <span class="o">=</span> <span class="n">Gp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">gap_randstring</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_gap</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">gap</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">SCRRandomString</span><span class="p">()</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">rtest</span><span class="p">():</span>
<span class="gp">....: </span>    <span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_gp</span><span class="p">(</span><span class="n">rgp</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="p">(</span><span class="n">ZZ</span><span class="o">.</span><span class="n">random_element</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="n">RR</span><span class="o">.</span><span class="n">random_element</span><span class="p">(),</span>
<span class="gp">....: </span>            <span class="n">K</span><span class="o">.</span><span class="n">random_element</span><span class="p">(),</span> <span class="n">G</span><span class="o">.</span><span class="n">random_element</span><span class="p">(),</span>
<span class="gp">....: </span>            <span class="n">gap_randstring</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">....: </span>            <span class="n">rgp</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">ntl</span><span class="o">.</span><span class="n">ZZ_random</span><span class="p">(</span><span class="mi">99999</span><span class="p">),</span>
<span class="gp">....: </span>            <span class="n">random</span><span class="p">())</span>
</pre></div>
</div>
<p>The above test shows the results of six different random number
generators, in three different processes.  The random elements from
<code class="docutils literal notranslate"><span class="pre">ZZ</span></code>, <code class="docutils literal notranslate"><span class="pre">RR</span></code>, and <code class="docutils literal notranslate"><span class="pre">K</span></code> all derive from a single GMP-based random number
generator.  The random element from <code class="docutils literal notranslate"><span class="pre">G</span></code> comes from a GAP subprocess.
The random “string” (5-element binary list) is also from a GAP
subprocess, using the “classical” GAP random generator.
The random number from <code class="docutils literal notranslate"><span class="pre">rgp</span></code> is from a Pari/gp subprocess.  NTL’s
<code class="docutils literal notranslate"><span class="pre">ZZ_random</span></code> uses a separate NTL random number generator in the main
Sage process.  And <code class="docutils literal notranslate"><span class="pre">random()</span></code> is from a Python <code class="xref py py-class docutils literal notranslate"><span class="pre">random.Random</span></code>
object.</p>
<p>Here we see that setting the random number seed really does make the
results of these random number generators reproducible.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(303, -0.266166246380421, 1/6, (1,2), [ 0, 1, 1, 0, 0 ], 265625921, 79302, 0.2450652680687958)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(978, 0.0557699430711638, -1/8*x^2 - 1/2*x + 1/2, (1,2,3), [ 1, 0, 0, 0, 1 ], 807447831, 23865, 0.6170498912488264)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(207, -0.0141049486533456, 0, (1,3)(4,5), [ 1, 0, 1, 1, 1 ], 1642898426, 16190, 0.9343331114872127)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(303, -0.266166246380421, 1/6, (1,2), [ 0, 1, 1, 0, 0 ], 265625921, 79302, 0.2450652680687958)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(978, 0.0557699430711638, -1/8*x^2 - 1/2*x + 1/2, (1,2,3), [ 1, 0, 0, 0, 1 ], 807447831, 23865, 0.6170498912488264)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(207, -0.0141049486533456, 0, (1,3)(4,5), [ 1, 0, 1, 1, 1 ], 1642898426, 16190, 0.9343331114872127)</span>
</pre></div>
</div>
<p>Once we’ve set the random number seed, we can check what seed was used.
(This is not the current random number state; it does not change when
random numbers are generated.)</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">initial_seed</span><span class="p">()</span>
<span class="go">12345L</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(720, -0.612180244315804, 0, (1,3), [ 1, 0, 1, 1, 0 ], 1911581957, 65175, 0.8043027951758298)</span>
<span class="gp">sage: </span><span class="n">initial_seed</span><span class="p">()</span>
<span class="go">12345L</span>
</pre></div>
</div>
<p>If <a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a> is called with no arguments, then a new
seed is automatically selected.  On operating systems that support it,
the new seed comes from <a class="reference external" href="https://docs.python.org/library/os.html#os.urandom" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a>; this is intended to be
a truly random (not pseudo-random), cryptographically secure number.
(Whether it is actually cryptographically secure depends on operating
system details that are outside the control of Sage.)</p>
<p>If <a class="reference external" href="https://docs.python.org/library/os.html#os.urandom" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> is not supported, then the new seed comes
from the current time, which is definitely not cryptographically
secure.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">rtest</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">r</span>         <span class="c1"># random</span>
<span class="go">(909, -0.407373370020575, 6/7*x^2 + 1, (1,2,3)(4,5), 985329107, 21461, 0.30047071049504859)</span>
</pre></div>
</div>
<p>After setting a new random number seed with <a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a>,
we can use <a class="reference internal" href="#sage.misc.randstate.initial_seed" title="sage.misc.randstate.initial_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">initial_seed()</span></code></a> to see what seed was automatically
selected, and call <a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a> to restart the same
random number sequence.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">initial_seed</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s</span>         <span class="c1"># random</span>
<span class="go">336237747258024892084418842839280045662L</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r2</span> <span class="o">=</span> <span class="n">rtest</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">==</span> <span class="n">r2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Whenever Sage starts, <a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a> is called just before
command line interaction starts; so every Sage run starts with a
different random number seed.  This seed can be recovered with
<a class="reference internal" href="#sage.misc.randstate.initial_seed" title="sage.misc.randstate.initial_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">initial_seed()</span></code></a> (as long as the user has not set a different
seed with <a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a>), so that the results of this run
can be reproduced in another run; or this automatically selected seed
can be overridden with, for instance, <code class="docutils literal notranslate"><span class="pre">set_random_seed(0)</span></code>.</p>
<p>We can demonstrate this startup behavior by running a new instance of
Sage as a subprocess.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">subsage</span> <span class="o">=</span> <span class="n">Sage</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">(</span><span class="n">subsage</span><span class="p">(</span><span class="s1">&#39;initial_seed()&#39;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">(</span><span class="n">subsage</span><span class="p">(</span><span class="s1">&#39;ZZ.random_element(2^200)&#39;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">s</span>         <span class="c1"># random</span>
<span class="go">161165040149656168853863459174502758403</span>
<span class="gp">sage: </span><span class="n">r</span>         <span class="c1"># random</span>
<span class="go">1273828861620427462924151488498075119241254209468761367941442</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">==</span> <span class="n">ZZ</span><span class="o">.</span><span class="n">random_element</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">200</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Note that wrappers of all the random number generation methods from
Python’s <a class="reference external" href="https://docs.python.org/library/random.html#module-random" title="(in Python v3.6)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> module are available at the Sage command
line, and these wrappers are properly affected by <a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">random</span><span class="p">(),</span> <span class="n">getrandbits</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span> <span class="n">normalvariate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">(0.111439293741037, 539332L, 8.26785106378383, 1.3893337539828183)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">random</span><span class="p">(),</span> <span class="n">getrandbits</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span> <span class="n">normalvariate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">(0.8294022851874259, 624859L, 5.77894484361117, -0.4201366826308758)</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">random</span><span class="p">(),</span> <span class="n">getrandbits</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span> <span class="n">normalvariate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">(0.111439293741037, 539332L, 8.26785106378383, 1.3893337539828183)</span>
</pre></div>
</div>
<p>That pretty much covers what you need to know for command-line use of
this module.  Now let’s move to what authors of Sage library code
need to know about the module.</p>
</section>
<section id="library-api">
<h2>Library API<a class="headerlink" href="#library-api" title="Permalink to this headline">¶</a></h2>
<p>First, we’ll cover doctesting.  Every docstring now has an implicit
<code class="docutils literal notranslate"><span class="pre">set_random_seed(0)</span></code> prepended.  Any uses of <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">random</span></code> that
are based on random numbers under the control of this module should be
removed, and the reproducible answers inserted instead.</p>
<p>This practice has two potential drawbacks.  First, it increases the work
of maintaining doctests. For instance, in a long docstring that has
many doctests that depend on random numbers, a change near the beginning
(for instance, adding a new doctest) may invalidate all later doctests
in the docstring.  To reduce this downside, you may add calls to
<code class="docutils literal notranslate"><span class="pre">set_random_seed(0)</span></code> throughout the docstring (in the extreme case,
before every doctest).</p>
<p>Second, the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">random</span></code> in the doctest served as a signal to the
reader of the docstring that the result was unpredictable and that it
would not be surprising to get a different result when trying out the
examples in the doctest.  If a doctest specifically refers to
<code class="docutils literal notranslate"><span class="pre">ZZ.random_element()</span></code> (for instance), this is presumably enough
of a signal to render this function of <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">random</span></code> unnecessary.
However, some doctests are not obviously (from the name) random, but
do depend on random numbers internally, such as the
<a class="reference external" href="../../../groups/sage/groups/perm_gps/permgroup.html#sage.groups.perm_gps.permgroup.PermutationGroup_generic.composition_series" title="(in Sage 9.4 Reference Manual: Groups v9.4)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">composition_series</span></code></a>
method of a <code class="docutils literal notranslate"><span class="pre">PermutationGroup</span></code>.  In these cases, the convention is to insert
the following text at the beginning of the <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code> section.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">These computations use pseudo-random numbers, so we set the</span>
<span class="go">seed for reproducible testing.</span>

<span class="go">    sage: set_random_seed(0)</span>
</pre></div>
</div>
<p>Note that this call to <code class="docutils literal notranslate"><span class="pre">set_random_seed(0)</span></code> is redundant, since
<code class="docutils literal notranslate"><span class="pre">set_random_seed(0)</span></code> is automatically inserted at the beginning
of every docstring. However, it makes the example reproducible for somebody
who just types the lines from the doctest and doesn’t know about the
automatic <code class="docutils literal notranslate"><span class="pre">set_random_seed(0)</span></code>.</p>
<p>Next, let’s cover setting the random seed from library code.  The
first rule is that library code should never call
<a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a>. This function is only for command-line
use.  Instead, if the library code wants to use a different random
seed, it should use <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed(s):</span></code>. This will use the new seed
within the scope of the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement, but will revert to the previous
seed once the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement is completed.  (Or the library can use
<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed():</span></code> to get a seed automatically selected using
<a class="reference external" href="https://docs.python.org/library/os.html#os.urandom" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> or the current time, in the same way as described for
<a class="reference internal" href="#sage.misc.randstate.set_random_seed" title="sage.misc.randstate.set_random_seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_random_seed()</span></code></a> above.)</p>
<p>Ideally, using <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed(s):</span></code> should not affect the outer random
number sequence at all; we will call this property “isolation.”  We
achieve isolation for most, but not all, of the random number generators
in Sage (we fail for generators, such as NTL, that do not provide an API
to retrieve the current random number state).</p>
<p>We’ll demonstrate isolation.  First, we show the sequence of random numbers
that you get without intervening <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r1</span> <span class="o">=</span> <span class="n">rtest</span><span class="p">();</span> <span class="k">print</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span>
<span class="go">(303, -0.266166246380421, 1/6, (1,2), [ 0, 1, 1, 0, 0 ], 265625921, 79302, 0.2450652680687958)</span>
<span class="gp">sage: </span><span class="n">r2</span> <span class="o">=</span> <span class="n">rtest</span><span class="p">();</span> <span class="k">print</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span>
<span class="go">(443, 0.185001351421963, -2, (1,3), [ 0, 0, 1, 1, 0 ], 53231108, 8171, 0.28363811590618193)</span>
</pre></div>
</div>
<p>We get slightly different results with an intervening <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r1</span> <span class="o">==</span> <span class="n">rtest</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span> <span class="n">rtest</span><span class="p">()</span>
<span class="go">(978, 0.0557699430711638, -1/8*x^2 - 1/2*x + 1/2, (1,2,3), [ 1, 0, 0, 0, 1 ], 807447831, 23865, 0.6170498912488264)</span>
<span class="gp">sage: </span><span class="n">r2m</span> <span class="o">=</span> <span class="n">rtest</span><span class="p">();</span> <span class="n">r2m</span>
<span class="go">(443, 0.185001351421963, -2, (1,3), [ 0, 0, 1, 1, 0 ], 53231108, 51295, 0.28363811590618193)</span>
<span class="gp">sage: </span><span class="n">r2m</span> <span class="o">==</span> <span class="n">r2</span>
<span class="go">False</span>
</pre></div>
</div>
<p>We can see that <code class="docutils literal notranslate"><span class="pre">r2</span></code> and <code class="docutils literal notranslate"><span class="pre">r2m</span></code> are the same except for the
call to <code class="xref py py-func docutils literal notranslate"><span class="pre">ntl.ZZ_random()</span></code>, which produces different results
with and without the <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed</span></code>.</p>
<p>However, we do still get a partial form of isolation, even in this
case, as we see in this example:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r1</span> <span class="o">==</span> <span class="n">rtest</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="gp">....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">rtest</span><span class="p">())</span>
<span class="go">(978, 0.0557699430711638, -1/8*x^2 - 1/2*x + 1/2, (1,2,3), [ 1, 0, 0, 0, 1 ], 807447831, 23865, 0.6170498912488264)</span>
<span class="go">(181, 0.607995392046754, -x + 1/2, (2,3)(4,5), [ 1, 0, 0, 1, 1 ], 1010791326, 9693, 0.5691716786307407)</span>
<span class="gp">sage: </span><span class="n">r2m</span> <span class="o">==</span> <span class="n">rtest</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The NTL results after the <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed</span></code> don’t depend on how many
NTL random numbers were generated inside the <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed</span></code>.</p>
<blockquote>
<div><p>sage: set_random_seed(0)
sage: r1 == rtest()
True
sage: with seed(1):
….:     rtest()
(978, 0.0557699430711638, -1/8*x^2 - 1/2*x + 1/2, (1,2,3), [ 1, 0, 0, 0, 1 ], 807447831, 23865, 0.6170498912488264)
sage: r2m == rtest()
True</p>
</div></blockquote>
<p>(In general, the above code is not exactly equivalent to the <code class="docutils literal notranslate"><span class="pre">with</span></code>
statement, because if an exception happens in the body, the real
<code class="docutils literal notranslate"><span class="pre">with</span></code> statement will pass the exception information as parameters to
the <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> method.  However, our <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> method
ignores the exception information anyway, so the above is equivalent in
our case.)</p>
</section>
<section id="generating-random-numbers-in-library-code">
<h2>Generating random numbers in library code<a class="headerlink" href="#generating-random-numbers-in-library-code" title="Permalink to this headline">¶</a></h2>
<p>Now we come to the last part of the documentation: actually generating
random numbers in library code.  First, the easy case. If you generate
random numbers only by calling other Sage library code (such as
<code class="docutils literal notranslate"><span class="pre">random_element</span></code> methods on parents), you don’t need to do
anything special; the other code presumably already interacts with
this module correctly.</p>
<p>Otherwise, it depends on what random number generator you want to use.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">gmp_randstate_t</span></code> – If you want to use some random number
generator that takes a <code class="docutils literal notranslate"><span class="pre">gmp_randstate_t</span></code> (like <code class="docutils literal notranslate"><span class="pre">mpz_urandomm</span></code> or
<code class="docutils literal notranslate"><span class="pre">mpfr_urandomb</span></code>), then use code like the following:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate cimport randstate, current_randstate</span>
<span class="go">...</span>

<span class="go">cdef randstate rstate = current_randstate()</span>
</pre></div>
</div>
<p>Then a <code class="docutils literal notranslate"><span class="pre">gmp_randstate_t</span></code> is available as <code class="docutils literal notranslate"><span class="pre">rstate.gmp_state</span></code>.</p>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with <code class="docutils literal notranslate"><span class="pre">current_randstate()</span></code> in
every function that wants to use it; don’t cache it globally or in a
class.  (Such caching would break <code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Python</span></code> – If you want to use the random number generators from
the <a class="reference external" href="https://docs.python.org/library/random.html#module-random" title="(in Python v3.6)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> module, you have two choices.  The slightly
easier choice is to import functions from
<a class="reference internal" href="prandom.html#module-sage.misc.prandom" title="sage.misc.prandom"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.misc.prandom</span></code></a>; for instance, you can simply replace
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">random</span> <span class="pre">import</span> <span class="pre">randrange</span></code> with
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">sage.misc.prandom</span> <span class="pre">import</span> <span class="pre">randrange</span></code>.  However, this is slightly less
efficient, because the wrappers in <a class="reference internal" href="prandom.html#module-sage.misc.prandom" title="sage.misc.prandom"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.misc.prandom</span></code></a> look up the
current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> on each call.  If you’re generating many
random numbers in a row, it’s faster to instead do</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate import current_randstate ...</span>

<span class="go">randrange = current_randstate().python_random().randrange</span>
</pre></div>
</div>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with
<a class="reference internal" href="#sage.misc.randstate.current_randstate" title="sage.misc.randstate.current_randstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">current_randstate()</span></code></a> in every function that wants to use it;
don’t cache the <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>, the <code class="xref py py-class docutils literal notranslate"><span class="pre">Random</span></code> object
returned by <code class="docutils literal notranslate"><span class="pre">python_random</span></code>, or the bound methods on that
<code class="xref py py-class docutils literal notranslate"><span class="pre">Random</span></code> object globally or in a class.  (Such caching would
break <code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAP</span></code> – If you are calling code in GAP that uses random numbers,
call <code class="docutils literal notranslate"><span class="pre">set_seed_gap</span></code> at the beginning of your function, like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate import current_randstate</span>
<span class="go">...</span>

<span class="go">current_randstate().set_seed_gap()</span>
</pre></div>
</div>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with
<a class="reference internal" href="#sage.misc.randstate.current_randstate" title="sage.misc.randstate.current_randstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">current_randstate()</span></code></a> in every function that wants to use it;
don’t cache it globally or in a class.  (Such caching would break
<code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Pari</span></code> – If you are calling code in the Pari library that uses
random numbers, call <code class="docutils literal notranslate"><span class="pre">set_seed_pari</span></code> at the beginning of your
function, like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate import current_randstate</span>
<span class="go">...</span>

<span class="go">current_randstate().set_seed_pari()</span>
</pre></div>
</div>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with
<a class="reference internal" href="#sage.misc.randstate.current_randstate" title="sage.misc.randstate.current_randstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">current_randstate()</span></code></a> in every function that wants to use it;
don’t cache it globally or in a class.  (Such caching would break
<code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Pari/gp</span></code> – If you are calling code in a Pari/gp subprocess that
uses random numbers, call <code class="docutils literal notranslate"><span class="pre">set_seed_gp</span></code> at the beginning of your
function, like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate import current_randstate</span>
<span class="go">...</span>

<span class="go">current_randstate().set_seed_gp()</span>
</pre></div>
</div>
<p>This will set the seed in the gp process in <code class="docutils literal notranslate"><span class="pre">sage.interfaces.gp.gp</span></code>.
If you have a different gp process, say in the variable <code class="docutils literal notranslate"><span class="pre">my_gp</span></code>, then
call <code class="docutils literal notranslate"><span class="pre">set_seed_gp(my_gp)</span></code> instead.</p>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with <a class="reference internal" href="#sage.misc.randstate.current_randstate" title="sage.misc.randstate.current_randstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">current_randstate()</span></code></a> in
every function that wants to use it; don’t cache it globally or
in a class.  (Such caching would break <code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">NTL</span></code> – If you are calling code in the NTL library that uses
random numbers, call <code class="docutils literal notranslate"><span class="pre">set_seed_ntl</span></code> at the beginning of your
function, like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate import current_randstate ...</span>

<span class="go">current_randstate().set_seed_ntl(False)</span>
</pre></div>
</div>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with
<a class="reference internal" href="#sage.misc.randstate.current_randstate" title="sage.misc.randstate.current_randstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">current_randstate()</span></code></a> in every function that wants to use it;
don’t cache it globally or in a class.  (Such caching would break
<code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">libc</span></code> – If you are writing code that calls the libc function
<a class="reference internal" href="#sage.misc.randstate.random" title="sage.misc.randstate.random"><code class="xref py py-func docutils literal notranslate"><span class="pre">random()</span></code></a>: don’t!  The <a class="reference internal" href="#sage.misc.randstate.random" title="sage.misc.randstate.random"><code class="xref py py-func docutils literal notranslate"><span class="pre">random()</span></code></a> function does not
give reproducible results across different operating systems, so we
can’t make portable doctests for the results.  Instead, do:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate cimport random</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#sage.misc.randstate.random" title="sage.misc.randstate.random"><code class="xref py py-func docutils literal notranslate"><span class="pre">random()</span></code></a> function in <a class="reference internal" href="#module-sage.misc.randstate" title="sage.misc.randstate"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.misc.randstate</span></code></a> gives a
31-bit random number, but it uses the <code class="docutils literal notranslate"><span class="pre">gmp_randstate_t</span></code> in the
current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>, so it is portable.  (This range was
chosen for two reasons: it matches the range of random() on 32-bit
and 64-bit Linux, although not Solaris; and it’s the largest range
of nonnegative numbers that fits in a 32-bit signed integer.)</p>
<p>However, you may still need to set the libc random number state; for
instance, if you are wrapping a library that uses <a class="reference internal" href="#sage.misc.randstate.random" title="sage.misc.randstate.random"><code class="xref py py-func docutils literal notranslate"><span class="pre">random()</span></code></a>
internally and you don’t want to change the library.  In that case,
call <code class="docutils literal notranslate"><span class="pre">set_seed_libc</span></code> at the beginning of your function, like this:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">from sage.misc.randstate import current_randstate</span>
<span class="go">...</span>

<span class="go">current_randstate().set_seed_libc(False)</span>
</pre></div>
</div>
<p>Fetch the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> with
<a class="reference internal" href="#sage.misc.randstate.current_randstate" title="sage.misc.randstate.current_randstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">current_randstate()</span></code></a> in every function that wants to use it;
don’t cache it globally or in a class.  (Such caching would break
<code class="docutils literal notranslate"><span class="pre">set_random_seed</span></code>).</p>
</li>
</ul>
</section>
<section id="classes-and-methods">
<h2>Classes and methods<a class="headerlink" href="#classes-and-methods" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.randstate.benchmark_libc">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">benchmark_libc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.benchmark_libc" title="Permalink to this definition">¶</a></dt>
<dd><p>This function was used to test whether moving from libc to GMP’s
Mersenne Twister for random numbers would be a significant slowdown.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.randstate</span> <span class="kn">import</span> <span class="n">benchmark_libc</span><span class="p">,</span> <span class="n">benchmark_mt</span>
<span class="gp">sage: </span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;benchmark_libc()&#39;</span><span class="p">)</span>  <span class="c1"># random</span>
<span class="go">125 loops, best of 3: 1.95 ms per loop</span>
<span class="gp">sage: </span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;benchmark_mt()&#39;</span><span class="p">)</span>    <span class="c1"># random</span>
<span class="go">125 loops, best of 3: 2.12 ms per loop</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.randstate.benchmark_mt">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">benchmark_mt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.benchmark_mt" title="Permalink to this definition">¶</a></dt>
<dd><p>This function was used to test whether moving from libc to GMP’s
Mersenne Twister for random numbers would be a significant slowdown.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.randstate</span> <span class="kn">import</span> <span class="n">benchmark_libc</span><span class="p">,</span> <span class="n">benchmark_mt</span>
<span class="gp">sage: </span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;benchmark_libc()&#39;</span><span class="p">)</span>  <span class="c1"># random</span>
<span class="go">125 loops, best of 3: 1.95 ms per loop</span>
<span class="gp">sage: </span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;benchmark_mt()&#39;</span><span class="p">)</span>    <span class="c1"># random</span>
<span class="go">125 loops, best of 3: 2.11 ms per loop</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.randstate.current_randstate">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">current_randstate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.current_randstate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current random number state.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span>
<span class="go">&lt;sage.misc.randstate.randstate object at 0x...&gt;</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">python_random</span><span class="p">()</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="go">0.111439293741037</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.randstate.initial_seed">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">initial_seed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.initial_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the initial seed used to create the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">initial_seed</span><span class="p">()</span>
<span class="go">42L</span>
</pre></div>
</div>
<p>If you set a random seed (by failing to specify the seed), this is how
you retrieve the seed actually chosen by Sage.  This can also be
used to retrieve the seed chosen for a new Sage run (if the user
has not used <code class="docutils literal notranslate"><span class="pre">set_random_seed()</span></code>).</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">initial_seed</span><span class="p">()</span>          <span class="c1"># random</span>
<span class="go">121030915255244661507561642968348336774L</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.randstate.random">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.random" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a 31-bit random number.  Intended as a drop-in replacement for
the libc <a class="reference internal" href="#sage.misc.randstate.random" title="sage.misc.randstate.random"><code class="xref py py-func docutils literal notranslate"><span class="pre">random()</span></code></a> function.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.randstate</span> <span class="kn">import</span> <span class="n">random</span>
<span class="gp">sage: </span><span class="n">random</span><span class="p">()</span>
<span class="go">32990711</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">randstate</span></span><a class="headerlink" href="#sage.misc.randstate.randstate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> class.  This class keeps track of random number
states and seeds.  Type <code class="docutils literal notranslate"><span class="pre">sage.misc.randstate?</span></code> for much more
information on random numbers in Sage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.ZZ_seed">
<span class="sig-name descname"><span class="pre">ZZ_seed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.ZZ_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>When called on the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>, returns a 128-bit
<a class="reference external" href="../../../rings_standard/sage/rings/integer_ring.html#module-sage.rings.integer_ring" title="(in Sage 9.4 Reference Manual: Standard Commutative Rings v9.4)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Integer</span></code></a> suitable for seeding another
random number generator.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1414</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">ZZ_seed</span><span class="p">()</span>
<span class="go">48314508034782595865062786044921182484</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.c_rand_double">
<span class="sig-name descname"><span class="pre">c_rand_double</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.c_rand_double" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a random floating-point number between 0 and 1.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">2718281828</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">c_rand_double</span><span class="p">()</span>
<span class="go">0.22437207488974298</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.c_random">
<span class="sig-name descname"><span class="pre">c_random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.c_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a 31-bit random number.  Intended for internal
use only; instead of calling <code class="docutils literal notranslate"><span class="pre">current_randstate().c_random()</span></code>,
it is equivalent (but probably faster) to call the
<a class="reference internal" href="#sage.misc.randstate.random" title="sage.misc.randstate.random"><code class="xref py py-meth docutils literal notranslate"><span class="pre">random</span></code></a> method of this
<a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> class.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1207</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">c_random</span><span class="p">()</span>
<span class="go">2008037228</span>
</pre></div>
</div>
<p>We verify the equivalence mentioned above.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.randstate</span> <span class="kn">import</span> <span class="n">random</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1207</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">random</span><span class="p">()</span>
<span class="go">2008037228</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.long_seed">
<span class="sig-name descname"><span class="pre">long_seed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.long_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>When called on the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>, returns a 128-bit
Python long suitable for seeding another random number generator.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">1618</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">long_seed</span><span class="p">()</span>
<span class="go">256056279774514099508607350947089272595L</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.python_random">
<span class="sig-name descname"><span class="pre">python_random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.python_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">random.Random</span></code> object.  The first time it is
called on a given <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>, a new <code class="xref py py-class docutils literal notranslate"><span class="pre">random.Random</span></code>
is created (seeded from the <em>current</em> <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>);
the same object is returned on subsequent calls.</p>
<p>It is expected that <code class="docutils literal notranslate"><span class="pre">python_random</span></code> will only be
called on the current <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code> – (optional) a class with the same interface as
<code class="xref py py-class docutils literal notranslate"><span class="pre">random.Random</span></code> (e.g. a subclass thereof) to use as the
Python RNG interface.  Otherwise the standard <code class="xref py py-class docutils literal notranslate"><span class="pre">random.Random</span></code>
is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seed</span></code> – (optional) an integer to seed the <code class="xref py py-class docutils literal notranslate"><span class="pre">random.Random</span></code>
instance with upon creation; if not specified it is seeded using
<code class="docutils literal notranslate"><span class="pre">ZZ.random_element(1</span> <span class="pre">&lt;&lt;</span> <span class="pre">128)</span></code>.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">rnd</span> <span class="o">=</span> <span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">python_random</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">rnd</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="go">0.013558022446944151</span>
<span class="gp">sage: </span><span class="n">rnd</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="go">544</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.seed">
<span class="sig-name descname"><span class="pre">seed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the initial seed of a <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> object.  (This is not
the current state; it does not change when you get random
numbers.)</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.randstate</span> <span class="kn">import</span> <span class="n">randstate</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">randstate</span><span class="p">(</span><span class="mi">314159</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
<span class="go">314159L</span>
<span class="gp">sage: </span><span class="n">r</span><span class="o">.</span><span class="n">python_random</span><span class="p">()</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="go">0.111439293741037</span>
<span class="gp">sage: </span><span class="n">r</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
<span class="go">314159L</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.set_seed_gap">
<span class="sig-name descname"><span class="pre">set_seed_gap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.set_seed_gap" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if <code class="docutils literal notranslate"><span class="pre">self</span></code> was the most recent <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>
to seed the GAP random number generator.  If not, seeds
the generator.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">99900000999</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_gap</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">gap</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">^</span><span class="mi">50</span><span class="p">)</span>
<span class="go">1496738263332555434474532297768680634540939580077</span>
<span class="gp">sage: </span><span class="n">gap</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span><span class="o">.</span><span class="n">SCRRandomString</span><span class="p">()</span>
<span class="go">[ 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1,</span>
<span class="go">  1, 0, 0, 1, 1, 1, 1, 1, 0, 1 ]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.set_seed_gp">
<span class="sig-name descname"><span class="pre">set_seed_gp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.set_seed_gp" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if <code class="docutils literal notranslate"><span class="pre">self</span></code> was the most recent <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>
to seed the random number generator in the given instance
of gp.  (If no instance is given, uses the one in
<a class="reference external" href="../../../interfaces/sage/interfaces/gp.html#sage.interfaces.gp.Gp" title="(in Sage 9.4 Reference Manual: Interpreter Interfaces v9.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">gp</span></code></a>.)  If not, seeds the generator.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">987654321</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_gp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">gp</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="go">23289294</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.set_seed_libc">
<span class="sig-name descname"><span class="pre">set_seed_libc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.set_seed_libc" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if <code class="docutils literal notranslate"><span class="pre">self</span></code> was the most recent <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>
to seed the libc random number generator.  If not, seeds the
libc random number generator.  (Do not use the libc random
number generator if you have a choice; its randomness is poor,
and the random number sequences it produces are not portable
across operating systems.)</p>
<p>If the argument <code class="docutils literal notranslate"><span class="pre">force</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, seeds the generator
unconditionally.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.randstate</span> <span class="kn">import</span> <span class="n">_doctest_libc_random</span>
<span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mh">0xBAD</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_libc</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">_doctest_libc_random</span><span class="p">()</span>   <span class="c1"># random</span>
<span class="go">1070075918</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.set_seed_ntl">
<span class="sig-name descname"><span class="pre">set_seed_ntl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.set_seed_ntl" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if <code class="docutils literal notranslate"><span class="pre">self</span></code> was the most recent <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a>
to seed the NTL random number generator.  If not, seeds
the generator.  If the argument <code class="docutils literal notranslate"><span class="pre">force</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
seeds the generator unconditionally.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">2008</span><span class="p">)</span>
</pre></div>
</div>
<p>This call is actually redundant; <code class="xref py py-func docutils literal notranslate"><span class="pre">ntl.ZZ_random()</span></code> will
seed the generator itself.  However, we put the call in
to make the coverage tester happy.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_ntl</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">ntl</span><span class="o">.</span><span class="n">ZZ_random</span><span class="p">(</span><span class="mi">10</span><span class="o">^</span><span class="mi">40</span><span class="p">)</span>
<span class="go">1495283511775355459459209288047895196007</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.randstate.randstate.set_seed_pari">
<span class="sig-name descname"><span class="pre">set_seed_pari</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.randstate.set_seed_pari" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if <code class="docutils literal notranslate"><span class="pre">self</span></code> was the most recent <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">randstate</span></code></a> to
seed the Pari random number generator.  If not, seeds the
generator.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since pari 2.4.3, pari’s random number generator has
changed a lot.  the seed output by getrand() is now a
vector of integers.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">5551212</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">current_randstate</span><span class="p">()</span><span class="o">.</span><span class="n">set_seed_pari</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">pari</span><span class="o">.</span><span class="n">getrand</span><span class="p">()</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
<span class="go">&#39;t_INT&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sage.misc.randstate.seed">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">seed</span></span><a class="headerlink" href="#sage.misc.randstate.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#sage.misc.randstate.randstate" title="sage.misc.randstate.randstate"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.misc.randstate.randstate</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.randstate.set_random_seed">
<span class="sig-prename descclassname"><span class="pre">sage.misc.randstate.</span></span><span class="sig-name descname"><span class="pre">set_random_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.randstate.set_random_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current random number seed from the given <code class="docutils literal notranslate"><span class="pre">seed</span></code>
(which must be coercible to a Python long).</p>
<p>If no seed is given, then a seed is automatically selected
using <a class="reference external" href="https://docs.python.org/library/os.html#os.urandom" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> if it is available, or the current
time otherwise.</p>
<p>Type <code class="docutils literal notranslate"><span class="pre">sage.misc.randstate?</span></code> for much more
information on random numbers in Sage.</p>
<p>This function is only intended for command line use.  Never call
this from library code; instead, use <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">seed(s):</span></code>.</p>
<p>Note that setting the random number seed to 0 is much faster than
using any other number.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">set_random_seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">initial_seed</span><span class="p">()</span>
<span class="go">5L</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Random Number States</a><ul>
<li><a class="reference internal" href="#command-line-oriented-api">Command line oriented API</a></li>
<li><a class="reference internal" href="#library-api">Library API</a></li>
<li><a class="reference internal" href="#generating-random-numbers-in-library-code">Generating random numbers in library code</a></li>
<li><a class="reference internal" href="#classes-and-methods">Classes and methods</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="functional.html"
                        title="previous chapter">Functional notation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="prandom.html"
                        title="next chapter">Random Numbers with Python API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/misc/randstate.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="prandom.html" title="Random Numbers with Python API"
             >next</a> |</li>
        <li class="right" >
          <a href="functional.html" title="Functional notation"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Sage 9.4 Reference Manual: Utilities</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Random Number States</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2021, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>