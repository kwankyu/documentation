
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Lazy lists &#8212; Sage Reference Manual v9.0: Utilities</title>
    <link rel="stylesheet" href="../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Lazy strings" href="lazy_string.html" />
    <link rel="prev" title="Lazy import cache" href="lazy_import_cache.html" />
    <link rel="icon" href="../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lazy_string.html" title="Lazy strings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="lazy_import_cache.html" title="Lazy import cache"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lazy-lists">
<span id="sage-misc-lazy-list"></span><h1>Lazy lists<a class="headerlink" href="#lazy-lists" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.misc.lazy_list"></span><p>A lazy list is an iterator that behaves like a list and possesses a cache
mechanism. A lazy list is potentially infinite and speed performances of the
cache is comparable with Python lists. One major difference with original
Python list is that lazy list are immutable. The advantage is that slices
share memory.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
<span class="go">547</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">34</span><span class="p">]</span>
<span class="go">lazy list [31, 37, 41, ...]</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">23</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83]</span>

<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">((</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f</span><span class="p">))</span>
<span class="go">0 -2 -2 0 4 10 18 28 40 54</span>
<span class="gp">sage: </span><span class="n">i1</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">i2</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)]</span>
<span class="go">[0, -2]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)]</span>
<span class="go">[0, -2]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)]</span>
<span class="go">[-2, -2]</span>
</pre></div>
</div>
<p>It is possible to prepend a list to a lazy list:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">lazy list [3, 7, 0, ...]</span>
</pre></div>
</div>
<p>But, naturally, not the other way around:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span> <span class="o">+</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: can only add list to lazy_list</span>
</pre></div>
</div>
<p>You can easily create your own class inheriting from <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a>. You
should call the <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a> constructor (optionally with some
precomputed values for the cache) and implement the method <code class="docutils literal notranslate"><span class="pre">_new_slice</span></code> that
returns a new chunk of data at each call. Here is an example of implementation
of the Thue–Morse word that is obtained as the fixed point of the substitution
<span class="math notranslate nohighlight">\(0 \to 01\)</span> and <span class="math notranslate nohighlight">\(1 \to 10\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list_generic</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyThueMorseWord</span><span class="p">(</span><span class="n">lazy_list_generic</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">....: </span>        <span class="n">lazy_list_generic</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">_new_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="n">letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>
<span class="gp">....: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">letter</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">w</span> <span class="o">=</span> <span class="n">MyThueMorseWord</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">w</span>
<span class="go">lazy list [0, 1, 1, ...]</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">ZZ</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">popcount</span><span class="p">()</span><span class="o">%</span><span class="k">2</span> for i in range(100))
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">w</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span> <span class="o">==</span> <span class="n">w</span><span class="p">[:</span><span class="mi">1000</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Alternatively, you can create the lazy list from an update function:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">thue_morse_update</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="n">letter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">....: </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">assert</span> <span class="n">n</span><span class="o">%</span><span class="k">2</span> == 0
<span class="gp">....: </span>        <span class="n">letter</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">....: </span>    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">letter</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">w2</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">update_function</span><span class="o">=</span><span class="n">thue_morse_update</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">w2</span>
<span class="go">lazy list [0, 1, 1, ...]</span>
<span class="gp">sage: </span><span class="n">w2</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span> <span class="o">==</span> <span class="n">w</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can also create user-defined classes (Python) and extension types (Cython)
inheriting from <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a>.
In that case you would better implement directly the method
<code class="docutils literal notranslate"><span class="pre">_update_cache_up_to</span></code>. See the examples in this file with the classes
<a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_iterator" title="sage.misc.lazy_list.lazy_list_from_iterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_iterator</span></code></a> and <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_function" title="sage.misc.lazy_list.lazy_list_from_function"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_function</span></code></a>.</p>
<div class="section" id="classes-and-methods">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="sage.misc.lazy_list.lazy_list">
<code class="descclassname">sage.misc.lazy_list.</code><code class="descname">lazy_list</code><span class="sig-paren">(</span><em>data=None</em>, <em>initial_values=None</em>, <em>start=None</em>, <em>stop=None</em>, <em>step=None</em>, <em>update_function=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a lazy list.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">data</span></code> – data to create a lazy list from. This can be<ol class="arabic">
<li>a (possibly infinite) iterable,</li>
<li>a function (that takes as input an integer <code class="docutils literal notranslate"><span class="pre">n</span></code> and return
the <code class="docutils literal notranslate"><span class="pre">n</span></code>-th term of the list),</li>
<li>or a standard Python container <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">tuple</span></code>.</li>
</ol>
</li>
<li><code class="docutils literal notranslate"><span class="pre">initial_values</span></code> – the beginning of the sequence that will not be computed from
the <code class="docutils literal notranslate"><span class="pre">data</span></code> provided.</li>
<li><code class="docutils literal notranslate"><span class="pre">update_function</span></code> – you can also construct a lazy list from a function
that takes as input a list of precomputed values and updates it with some
more values.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want finer tuning of the constructor you can directly instantiate
the classes associated to lazy lists that are
<a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a>, <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_iterator" title="sage.misc.lazy_list.lazy_list_from_iterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_iterator</span></code></a>,
<a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_function" title="sage.misc.lazy_list.lazy_list_from_function"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_function</span></code></a>.</p>
</div>
<p>EXAMPLES:</p>
<p>The basic construction of lazy lists.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">Iterators:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">(</span><span class="n">count</span><span class="p">())</span>
<span class="go">lazy list [0, 1, 2, ...]</span>
</pre></div>
</div>
</li>
<li><p class="first">Functions:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">n</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">%</span><span class="k">17</span>)
<span class="go">lazy list [0, 1, 4, ...]</span>
</pre></div>
</div>
</li>
<li><p class="first">Plain lists:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">lazy list [1, 5, 7, ...]</span>
</pre></div>
</div>
</li>
</ol>
<p>If a function is only defined for large values, you can provide the beginning
of the sequence manually:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">divisors</span><span class="p">,</span> <span class="p">[</span><span class="bp">None</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">lazy list [None, [1], [1, 2], ...]</span>
</pre></div>
</div>
<p>Lazy lists behave like lists except that they are immutable:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">l</span><span class="p">[</span><span class="mi">3</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>
<span class="go">lazy list [[1, 3], [1, 2, 4, 8], [1, 13], ...]</span>
</pre></div>
</div>
<p>If your lazy list is finite, you can obtain the underlying list with the
method <span class="math notranslate nohighlight">\(.list()\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">l</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[[1, 2, 3, 5, 6, 10, 15, 30],</span>
<span class="go"> [1, 5, 7, 35],</span>
<span class="go"> [1, 2, 4, 5, 8, 10, 20, 40],</span>
<span class="go"> [1, 3, 5, 9, 15, 45]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.lazy_list.lazy_list_formatter">
<code class="descclassname">sage.misc.lazy_list.</code><code class="descname">lazy_list_formatter</code><span class="sig-paren">(</span><em>L</em>, <em>name='lazy list'</em>, <em>separator='</em>, <em>'</em>, <em>more='...'</em>, <em>opening_delimiter='['</em>, <em>closing_delimiter=']'</em>, <em>preview=3</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string representation of <code class="docutils literal notranslate"><span class="pre">L</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">L</span></code> – an iterable object</li>
<li><code class="docutils literal notranslate"><span class="pre">name</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">'lazy</span> <span class="pre">list'</span></code>) a string appearing
at first position (i.e., in front of the actual values)
in the representation</li>
<li><code class="docutils literal notranslate"><span class="pre">opening_delimiter</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">'['</span></code>) a string heading
the shown entries</li>
<li><code class="docutils literal notranslate"><span class="pre">closing_delimiter</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">']'</span></code>) a string trailing
the shown entries</li>
<li><code class="docutils literal notranslate"><span class="pre">separator</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'</span></code>) a string appearing between
two entries</li>
<li><code class="docutils literal notranslate"><span class="pre">more</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">'...'</span></code>) a string indicating that
not all entries of the list are shown</li>
<li><code class="docutils literal notranslate"><span class="pre">preview</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">3</span></code>) an integer specifying the number of
elements shown in the representation string</li>
</ul>
<p>OUTPUT:</p>
<p>A string.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list_formatter</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">srange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>
<span class="go">&#39;list [3, 8, 13, ...]&#39;</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">());</span> <span class="n">L</span>
<span class="go">lazy list [2, 3, 5, ...]</span>
<span class="gp">sage: </span><span class="nb">repr</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">==</span> <span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;primes&#39;</span><span class="p">)</span>
<span class="go">&#39;primes [2, 3, 5, ...]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">opening_delimiter</span><span class="o">=</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">closing_delimiter</span><span class="o">=</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list (2, 3, 5, ...)&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">opening_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">closing_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list 2, 3, 5, ...&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list [2--3--5--...]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">more</span><span class="o">=</span><span class="s1">&#39;and more&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list [2, 3, 5, and more]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">preview</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&#39;lazy list [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, ...]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;primes&#39;</span><span class="p">,</span>
<span class="gp">....: </span>                    <span class="n">opening_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">closing_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="gp">....: </span>                    <span class="n">separator</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">more</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">preview</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="go">&#39;primes 2 3 5 7 11 13 17 -&gt;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.lazy_list.lazy_list_from_function">
<em class="property">class </em><code class="descclassname">sage.misc.lazy_list.</code><code class="descname">lazy_list_from_function</code><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_from_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.misc.lazy_list.lazy_list_generic</span></code></a></p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">function</span></code> – a function that maps <code class="docutils literal notranslate"><span class="pre">n</span></code> to the element
at position <code class="docutils literal notranslate"><span class="pre">n</span></code>. (This
function only needs to be defined for length larger than the length of
the cache.)</li>
<li><code class="docutils literal notranslate"><span class="pre">cache</span></code> – an optional list to be used as the cache. Be careful that
there is no copy.</li>
<li><code class="docutils literal notranslate"><span class="pre">stop</span></code> – an optional integer to specify the length of this lazy list.
(Otherwise it is considered infinite).</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list_from_function</span>
<span class="gp">sage: </span><span class="n">lazy_list_from_function</span><span class="p">(</span><span class="n">euler_phi</span><span class="p">)</span>
<span class="go">lazy list [0, 1, 1, ...]</span>
<span class="gp">sage: </span><span class="n">lazy_list_from_function</span><span class="p">(</span><span class="n">divisors</span><span class="p">,</span> <span class="p">[</span><span class="bp">None</span><span class="p">])</span>
<span class="go">lazy list [None, [1], [1, 2], ...]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.lazy_list.lazy_list_from_iterator">
<em class="property">class </em><code class="descclassname">sage.misc.lazy_list.</code><code class="descname">lazy_list_from_iterator</code><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_from_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.misc.lazy_list.lazy_list_generic</span></code></a></p>
<p>Lazy list built from an iterator.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">count</span><span class="p">());</span> <span class="n">m</span>
<span class="go">lazy list [0, 1, 2, ...]</span>

<span class="gp">sage: </span><span class="n">m2</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">count</span><span class="p">())[</span><span class="mi">8</span><span class="p">:</span><span class="mi">20551</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">m2</span>
<span class="go">lazy list [8, 10, 12, ...]</span>

<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="go">[0, 1, 2]</span>
<span class="gp">sage: </span><span class="n">y</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">)]</span>
<span class="go">[0, 1, 2]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">)]</span>
<span class="go">[3, 3]</span>
<span class="gp">sage: </span><span class="n">loads</span><span class="p">(</span><span class="n">dumps</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
<span class="go">lazy list [0, 1, 2, ...]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.lazy_list.lazy_list_from_update_function">
<em class="property">class </em><code class="descclassname">sage.misc.lazy_list.</code><code class="descname">lazy_list_from_update_function</code><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_from_update_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.misc.lazy_list.lazy_list_generic</span></code></a></p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">function</span></code> – a function that updates a list of precomputed values.
The update function should take as input a list and make it longer
(using either the methods <code class="docutils literal notranslate"><span class="pre">append</span></code> or <code class="docutils literal notranslate"><span class="pre">extend</span></code>). If after a call
to the update function the list of values is shorter a
<code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> will occurr. If no value is added then the lazy list
is considered finite.</li>
<li><code class="docutils literal notranslate"><span class="pre">cache</span></code> – an optional list to be used as the cache. Be careful that
there is no copy.</li>
<li><code class="docutils literal notranslate"><span class="pre">stop</span></code> – an optional integer to specify the length of this lazy list
(otherwise it is considered infinite)</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="sage.misc.lazy_list.lazy_list_generic">
<em class="property">class </em><code class="descclassname">sage.misc.lazy_list.</code><code class="descname">lazy_list_generic</code><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_generic" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A lazy list</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">lazy list [2, 3, 5, ...]</span>
<span class="gp">sage: </span><span class="n">l</span><span class="p">[</span><span class="mi">200</span><span class="p">]</span>
<span class="go">1229</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.misc.lazy_list.lazy_list_generic.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_generic.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element at position <code class="docutils literal notranslate"><span class="pre">i</span></code>.</p>
<p>If the index is not an integer, then raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.  If the
argument is negative then raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.  Finally, if the
argument is beyond the size of that lazy list it raises a
<code class="docutils literal notranslate"><span class="pre">IndexError</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span><span class="p">,</span> <span class="n">repeat</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>

<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">IndexError: lazy list index out of range</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: unable to convert rational 1/2 to an integer</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.lazy_list.lazy_list_generic.list">
<code class="descname">list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_generic.list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list made of the elements of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the iterator is sufficiently large, this will build a list
of length <code class="docutils literal notranslate"><span class="pre">PY_SSIZE_T_MAX</span></code> which should be beyond the capacity of
your RAM!</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">143</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[5, 19, 41, 61, 83, 107, 137, 163, 191, 223, 241, 271, 307, 337, 367, 397, 431, 457, 487, 521, 563, 593, 617, 647, 677, 719, 751, 787, 823]</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[:</span><span class="mi">100000</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">7</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[2]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.misc.lazy_list.slice_unpickle">
<code class="descclassname">sage.misc.lazy_list.</code><code class="descname">slice_unpickle</code><span class="sig-paren">(</span><em>master</em>, <em>start</em>, <em>stop</em>, <em>step</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.slice_unpickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpickle helper</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Lazy lists</a><ul>
<li><a class="reference internal" href="#classes-and-methods">Classes and Methods</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="lazy_import_cache.html"
                        title="previous chapter">Lazy import cache</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lazy_string.html"
                        title="next chapter">Lazy strings</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/misc/lazy_list.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lazy_string.html" title="Lazy strings"
             >next</a> |</li>
        <li class="right" >
          <a href="lazy_import_cache.html" title="Lazy import cache"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2020, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>