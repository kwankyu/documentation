
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Install from conda-forge &#8212; Installation Guide</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sage.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Install from Source Code" href="source.html" />
    <link rel="prev" title="Install from Pre-built Binaries" href="binary.html" />
  <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
  <!-- <script src="_static/thebe.js" type="text/javascript"></script> -->
  <!-- <script src="_static/thebe-sage.js" type="text/javascript"></script> -->

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="source.html" title="Install from Source Code"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="binary.html" title="Install from Pre-built Binaries"
             accesskey="P">previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://www.sagemath.org"><img src="_static/logo_sagemath_black.svg" class="sage-logo" title="Sage Logo"></a>
    
      <a href="../index.html">Sage 9.6 Documentation</a> &#187;
      
      <a href="index.html">Installation Guide</a> &#187;
    
  </li>

        <li class="nav-item nav-item-this"><a href="">Install from conda-forge</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="install-from-conda-forge">
<span id="sec-installation-conda"></span><h1>Install from conda-forge<a class="headerlink" href="#install-from-conda-forge" title="Permalink to this headline">¶</a></h1>
<p>SageMath can be installed on Linux and macOS via Conda from the
<a class="reference external" href="https://conda-forge.org">conda-forge</a> conda channel.</p>
<p>Both the <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> (Intel) architecture and the <code class="docutils literal notranslate"><span class="pre">arm64</span></code>/<code class="docutils literal notranslate"><span class="pre">aarch64</span></code>
architectures (including Apple Silicon, M1) are supported.</p>
<p>You will need a working Conda installation: either Mambaforge/Miniforge,
Miniconda or Anaconda. If you don’t have one yet, we recommend installing
<a class="reference external" href="https://github.com/conda-forge/miniforge#mambaforge">Mambaforge</a> as
follows. In a terminal,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ curl -L -O https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-<span class="k">$(</span>uname<span class="k">)</span>-<span class="k">$(</span>uname -m<span class="k">)</span>.sh
$ sh Mambaforge-<span class="k">$(</span>uname<span class="k">)</span>-<span class="k">$(</span>uname -m<span class="k">)</span>.sh
</pre></div>
</div>
<ul class="simple">
<li><p>Mambaforge and Miniforge use conda-forge as the default channel.</p></li>
<li><p>If you are using Miniconda or Anaconda, set it up to use conda-forge:</p>
<ul>
<li><p>Add the conda-forge channel: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--add</span> <span class="pre">channels</span> <span class="pre">conda-forge</span></code></p></li>
<li><p>Change channel priority to strict: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--set</span> <span class="pre">channel_priority</span> <span class="pre">strict</span></code></p></li>
</ul>
</li>
</ul>
<p>Optionally, use <a class="reference external" href="https://github.com/mamba-org/mamba">mamba</a>,
which uses a faster dependency solver than <code class="docutils literal notranslate"><span class="pre">conda</span></code>.
If you installed Mambaforge, it is already provided. Otherwise, use</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ conda install mamba
</pre></div>
</div>
<section id="installing-all-of-sagemath-from-conda-not-for-development">
<span id="sec-installation-conda-binary"></span><h2>Installing all of SageMath from conda (not for development)<a class="headerlink" href="#installing-all-of-sagemath-from-conda-not-for-development" title="Permalink to this headline">¶</a></h2>
<p>Create a new conda environment containing SageMath, either with <code class="docutils literal notranslate"><span class="pre">mamba</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ mamba create -n sage sage <span class="nv">python</span><span class="o">=</span>X        <span class="c1"># either</span>
$ conda create -n sage sage <span class="nv">python</span><span class="o">=</span>X        <span class="c1"># or</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">X</span></code> is version of Python, e.g. <code class="docutils literal notranslate"><span class="pre">3.9</span></code>.</p>
<p>To use Sage from there,</p>
<ul class="simple">
<li><p>Enter the new environment: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">sage</span></code></p></li>
<li><p>Start SageMath: <code class="docutils literal notranslate"><span class="pre">sage</span></code></p></li>
</ul>
</section>
<section id="using-conda-to-provide-system-packages-for-the-sage-distribution">
<span id="sec-installation-conda-source"></span><h2>Using conda to provide system packages for the Sage distribution<a class="headerlink" href="#using-conda-to-provide-system-packages-for-the-sage-distribution" title="Permalink to this headline">¶</a></h2>
<p>If Conda is installed (check by typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">info</span></code>), there are two ways to
prepare for installing SageMath from source:</p>
<blockquote>
<div><ul>
<li><p>If you are using a git checkout:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ ./bootstrap</span>
</pre></div>
</div>
</li>
<li><p>Create a new empty environment and activate:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ conda create -n sage-build</span>
<span class="go">$ conda activate sage-build</span>
</pre></div>
</div>
</li>
<li><p>Install standard packages recognized by sage’s <code class="docutils literal notranslate"><span class="pre">spkg-configure</span></code> mechanism:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ conda env update --file environment.yml -n sage-build</span>
</pre></div>
</div>
</li>
<li><p>Or install all standard and optional packages recognized by sage:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ conda env update --file environment-optional.yml -n sage-build</span>
</pre></div>
</div>
</li>
<li><p>Then the SageMath distribution will be built using the compilers provided by Conda
and using many packages installed by Conda:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ ./bootstrap</span>
<span class="go">$ ./configure --prefix=$CONDA_PREFIX</span>
<span class="go">$ make</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</section>
<section id="using-conda-to-provide-all-dependencies-for-the-sage-library-experimental">
<span id="sec-installation-conda-develop"></span><h2>Using conda to provide all dependencies for the Sage library (experimental)<a class="headerlink" href="#using-conda-to-provide-all-dependencies-for-the-sage-library-experimental" title="Permalink to this headline">¶</a></h2>
<p>You can build and install the Sage library from source, using conda to
provide all of its dependencies. This bypasses most of the build
system of the Sage distribution and is the fastest way to set up an
environment for Sage development.</p>
<p>Note that this is still an experimental feature and may not work as
intended.</p>
<p>Here we assume that you are using a git checkout.</p>
<blockquote>
<div><ul>
<li><p>Optionally, set the build parallelism for the Sage library. Use
whatever the meaningful value for your machine is - no more than
the number of cores:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ export SAGE_NUM_THREADS=24</span>
</pre></div>
</div>
</li>
<li><p>As a recommended step, install the <code class="docutils literal notranslate"><span class="pre">mamba</span></code> package manager.  If
you skip this step, replace <code class="docutils literal notranslate"><span class="pre">mamba</span></code> by <code class="docutils literal notranslate"><span class="pre">conda</span></code> in the
following steps:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ conda install mamba</span>
</pre></div>
</div>
</li>
<li><p>Create and activate a new conda environment that provides the
bootstrapping prerequisites. You can replace 3.9 by another Python
version:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ mamba create -n sage-build python=3.9 \</span>
<span class="go">      gettext autoconf automake libtool pkg-config</span>
<span class="go">$ conda activate sage-build</span>
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">bootstrap</span></code>; this generates the files <code class="docutils literal notranslate"><span class="pre">src/environment*.yml</span></code> used
in the next step:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ ./bootstrap</span>
</pre></div>
</div>
</li>
<li><p>Populate the conda environment with the dependencies of Sage:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ mamba env update -n sage-build -f src/environment.yml  # alternatively, use</span>
</pre></div>
</div>
<p>Alternatively, you can use <code class="docutils literal notranslate"><span class="pre">src/environment-optional.yml</span></code>, which will
install some additional packages.</p>
</li>
<li><p>Activate the conda environment again:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ conda activate sage-build</span>
</pre></div>
</div>
</li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">configure</span></code> script:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ ./configure --with-python=$CONDA_PREFIX/bin/python             \</span>
<span class="go">              --prefix=$CONDA_PREFIX                             \</span>
<span class="go">              $(for pkg in $(./sage -package list :standard:     \</span>
<span class="go">                               --has-file spkg-configure.m4      \</span>
<span class="go">                               --has-file distros/conda.txt); do \</span>
<span class="go">                    echo --with-system-$pkg=force;               \</span>
<span class="go">                done)</span>
</pre></div>
</div>
</li>
<li><p>Install the build prerequisites of the Sage library:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ pip install --no-build-isolation -v -v --editable pkgs/sage-conf pkgs/sage-setup</span>
</pre></div>
</div>
</li>
<li><p>Install the Sage library:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ pip install --no-build-isolation -v -v --editable src</span>
</pre></div>
</div>
</li>
<li><p>Verify that Sage has been installed:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ sage -c &#39;print(version())&#39;</span>
<span class="go">SageMath version 9.6.beta5, Release Date: 2022-03-12</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Note that <code class="docutils literal notranslate"><span class="pre">make</span></code> is not used at all.  All dependencies
(including all Python packages) are provided by conda.</p>
<p>Thus, you will get a working version of Sage much faster.  However,
note that this will invalidate the use of any Sage-the-distribution
commands such as <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span></code>. Do not use them.</p>
<p>By using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--editable</span></code> in the above steps, the Sage
library is installed in editable mode.  This means that when you only
edit Python files, there is no need to rebuild the library; it
suffices to restart Sage.</p>
<p>After editing any Cython files, rebuild by repeating the command:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">$ pip install --no-build-isolation -v -v --editable src</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Install from conda-forge</a><ul>
<li><a class="reference internal" href="#installing-all-of-sagemath-from-conda-not-for-development">Installing all of SageMath from conda (not for development)</a></li>
<li><a class="reference internal" href="#using-conda-to-provide-system-packages-for-the-sage-distribution">Using conda to provide system packages for the Sage distribution</a></li>
<li><a class="reference internal" href="#using-conda-to-provide-all-dependencies-for-the-sage-library-experimental">Using conda to provide all dependencies for the Sage library (experimental)</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="binary.html"
                          title="previous chapter">Install from Pre-built Binaries</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="source.html"
                          title="next chapter">Install from Source Code</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/conda.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="source.html" title="Install from Source Code"
             >next</a> |</li>
        <li class="right" >
          <a href="binary.html" title="Install from Pre-built Binaries"
             >previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://www.sagemath.org"><img src="_static/logo_sagemath_black.svg" class="sage-logo" title="Sage Logo"></a>
    
      <a href="../index.html">Sage 9.6 Documentation</a> &#187;
      
      <a href="index.html">Installation Guide</a> &#187;
    
  </li>

        <li class="nav-item nav-item-this"><a href="">Install from conda-forge</a></li> 
      </ul>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2022, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
  </script>
  <script type="text/javascript">
/* detex the document title by removing "\(", "\)", "\", "$" */
document.title = document.title.replace(/\\\(/g, '').replace(/\\\)/g, '').replace(/\\/g, '').replace(/\$/g, '');
  </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>