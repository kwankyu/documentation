
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="viewport" content="width=600, initial-scale=1">
    <title>Install from Source Code &#8212; Sage Installation Guide v9.3</title>
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Launching SageMath" href="launching.html" />
    <link rel="prev" title="Install from conda-forge" href="conda.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
    <script src="_static/thebe.js" type="text/javascript"></script>
    <script src="_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="launching.html" title="Launching SageMath"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="conda.html" title="Install from conda-forge"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Install Guide v9.3</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Install from Source Code</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="install-from-source-code">
<span id="sec-installation-from-sources"></span><h1><a class="toc-backref" href="#id4">Install from Source Code</a><a class="headerlink" href="#install-from-source-code" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#install-from-source-code" id="id4">Install from Source Code</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-platforms" id="id5">Supported platforms</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id6">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#additional-software" id="id7">Additional software</a></p></li>
<li><p><a class="reference internal" href="#step-by-step-installation-procedure" id="id8">Step-by-step installation procedure</a></p></li>
<li><p><a class="reference internal" href="#make-targets" id="id9">Make targets</a></p></li>
<li><p><a class="reference internal" href="#environment-variables" id="id10">Environment variables</a></p></li>
<li><p><a class="reference internal" href="#installation-in-a-multiuser-environment" id="id11">Installation in a Multiuser Environment</a></p></li>
</ul>
</li>
</ul>
</div>
<p>More familiarity with computers may be required to build Sage from
the <a class="reference external" href="https://en.wikipedia.org/wiki/Source_code">source code</a>.
If you do have all the <a class="reference internal" href="#section-prereqs"><span class="std std-ref">pre-requisite tools</span></a>,
the process should be completely
painless, basically consisting in extracting the source tarball and typing
<code class="docutils literal notranslate"><span class="pre">make</span></code>.  It can take your computer a while to build Sage from the source code,
although the procedure is fully automated and should need no human
intervention.</p>
<p>Building Sage from the source code has the major advantage that your install
will be optimized for your particular computer and should therefore offer
better performance and compatibility than a binary install.
Moreover, it offers you full development capabilities:
you can change absolutely any part of Sage or the programs on which it depends,
and recompile the modified parts.</p>
<p><a class="reference external" href="https://www.sagemath.org/download-source.html">Download the Sage source code</a>
or get it from the <a class="reference external" href="https://github.com/sagemath/sage">git repository</a>.
Note: if you  are installing Sage for development, you should rather follow
the instructions in
<a class="reference external" href="https://doc.sagemath.org/html/en/developer/walk_through.html#chapter-walkthrough">The Sage Developer’s Guide</a>.</p>
<p>It is also possible to download a
<a class="reference external" href="https://www.sagemath.org/download.html">binary distribution</a>
for some operating systems, rather than compiling from source.</p>
<div class="section" id="supported-platforms">
<h2><a class="toc-backref" href="#id5">Supported platforms</a><a class="headerlink" href="#supported-platforms" title="Permalink to this headline">¶</a></h2>
<p>Sage runs on all major <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a>
distributions, <a class="reference external" href="https://www.apple.com/macosx/">macOS</a> , and Windows
(via the <a class="reference external" href="https://cygwin.com/">Cygwin</a> Linux API layer).</p>
<p>Other installation options for Windows are using the Windows Subsystem
for Linux (WSL), or with the aid of a <a class="reference external" href="https://en.wikipedia.org/wiki/Virtual_machine">virtual machine</a>.</p>
</div>
<div class="section" id="prerequisites">
<span id="section-prereqs"></span><h2><a class="toc-backref" href="#id6">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-requirements">
<h3>General requirements<a class="headerlink" href="#general-requirements" title="Permalink to this headline">¶</a></h3>
<p>This section details the technical prerequisites needed on all platforms. See
also the <a class="reference internal" href="#system-specific-requirements">System-specific requirements</a> below.</p>
<div class="section" id="disk-space-and-memory">
<h4>Disk space and memory<a class="headerlink" href="#disk-space-and-memory" title="Permalink to this headline">¶</a></h4>
<p>Your computer comes with at least 6 GB of free disk space.
It is recommended to have at least 2 GB of RAM, but you might get away
with less (be sure to have some swap space in this case).</p>
</div>
<div class="section" id="command-line-tools">
<h4>Command-line tools<a class="headerlink" href="#command-line-tools" title="Permalink to this headline">¶</a></h4>
<p>In addition to standard <a class="reference external" href="https://en.wikipedia.org/wiki/POSIX">POSIX</a> utilities
and the <a class="reference external" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">bash</a> shell,
the following standard command-line development tools must be installed on your
computer:</p>
<ul class="simple">
<li><p>A <strong>C/C++ compiler</strong>: Since SageMath builds its own GCC if needed,
a wide variety of C/C++ compilers is supported.
Many GCC versions work,
from as old as version 4.8 (but we recommend at least 5.1) to the most recent release.
Clang also works.
See also <a class="reference internal" href="#using-alternative-compilers">Using alternative compilers</a>.</p></li>
<li><p><strong>make</strong>: GNU make, version 3.80 or later. Version 3.82 or later is recommended.</p></li>
<li><p><strong>m4</strong>: GNU m4 1.4.2 or later (non-GNU or older versions might also work).</p></li>
<li><p><strong>perl</strong>: version 5.8.0 or later.</p></li>
<li><p><strong>ar</strong> and <strong>ranlib</strong>: can be obtained as part of GNU binutils.</p></li>
<li><p><strong>tar</strong>: GNU tar version 1.17 or later, or BSD tar.</p></li>
<li><p><strong>python</strong>: Python 3.4 or later, or Python 2.7.
(This range of versions is a minimal requirement for internal purposes of the SageMath
build system, which is referred to as <code class="docutils literal notranslate"><span class="pre">sage-bootstrap-python</span></code>.)</p></li>
</ul>
<p>Other versions of these may work, but they are untested.</p>
</div>
<div class="section" id="libraries">
<h4>Libraries<a class="headerlink" href="#libraries" title="Permalink to this headline">¶</a></h4>
<p>Some Sage components (and among them, most notably, Python) <em>“use the
OpenSSL library for added performance if made available by the
operating system”</em> (literal quote from the Python license). Testing
has proved that:</p>
<blockquote>
<div><ul class="simple">
<li><p>Sage can be successfully built against other SSL libraries (at
least GnuTLS).</p></li>
<li><p>Sage’s <code class="docutils literal notranslate"><span class="pre">-pip</span></code> facility (used to install some Sage packages) is
disabled when Sage is compiled against those libraries.</p></li>
</ul>
</div></blockquote>
<p>Furthermore, the Sage license mention that the <code class="docutils literal notranslate"><span class="pre">hashlib</span></code> library
(used in Sage) uses OpenSSL.</p>
<p>Therefore, the OpenSSL library is recommended. However, Sage’s license
seems to clash with OpenSSL license, which makes the distribution of
OpenSSL along with Sage sources dubious. However, there is no problem
for Sage using a systemwide-installed OpenSSL library.</p>
<p>In any case, you must install systemwide your chosen library and its
development files.</p>
<div class="section" id="fortran-and-compiler-suites">
<h5>Fortran and compiler suites<a class="headerlink" href="#fortran-and-compiler-suites" title="Permalink to this headline">¶</a></h5>
<p>Sage installation also needs a Fortran compiler.  It is determined
automatically whether Sage’s GCC package, or just its part containing
Fortran compiler <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> needs to be installed. This can be
overwritten by running <code class="docutils literal notranslate"><span class="pre">./configure</span></code> with option
<code class="docutils literal notranslate"><span class="pre">--without-system-gcc</span></code>.</p>
<p>Officially we support
gfortran from <a class="reference external" href="https://gcc.gnu.org/">GNU Compiler Collection (GCC)</a>.
If C and C++ compilers also come from there (i.e., gcc and g++), their versions
should match.
Alternatively, one may use C and C++ compilers from
<a class="reference external" href="https://clang.llvm.org/">Clang: a C language family frontend for LLVM</a>,
and thus  matching versions of
clang, clang++ , along with a recent gfortran. (Flang (or other LLVM-based
Fortran compilers) are not officially supported, however it is possible to
to build Sage using flang, with some extra efforts needed to set various flags;
this is work in progress at the moment (May 2019)).</p>
<p>Therefore, if you plan on using your own GCC compilers, then make sure that
their versions match.</p>
<p>To force using specific compilers, set environment variables <code class="docutils literal notranslate"><span class="pre">CC</span></code>,
<code class="docutils literal notranslate"><span class="pre">CXX</span></code>, and <code class="docutils literal notranslate"><span class="pre">FC</span></code> (for C, C++, and Fortran compilers, respectively)
to the desired values, and run <code class="docutils literal notranslate"><span class="pre">./configure</span></code>. For example,
<code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">CC=clang</span> <span class="pre">CXX=clang++</span> <span class="pre">FC=gfortran</span></code> will configure Sage
to be built with Clang C/C++ compilers and Fortran compiler
<code class="docutils literal notranslate"><span class="pre">gfortran</span></code>.</p>
<p>Alternatively, Sage includes a GCC package, so that C, C++ and Fortran
compilers will be built when the build system detects that it is needed,
e.g., non-GCC compilers, or
versions of the GCC compilers known to miscompile some components of Sage,
or simply a missing Fortran compiler.
In any case, you always need at least a C/C++ compiler to build the GCC
package and its prerequisites before the compilers it provides can be used.</p>
<p>Note that you can always override this behavior through the configure
options <code class="docutils literal notranslate"><span class="pre">--without-system-gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-system-gcc</span></code>, see
<a class="reference internal" href="#section-compilers"><span class="std std-ref">Using alternative compilers</span></a>.</p>
<p>There are some known problems with old assemblers, in particular when
building the <code class="docutils literal notranslate"><span class="pre">ecm</span></code> and <code class="docutils literal notranslate"><span class="pre">fflas_ffpack</span></code> packages. You should ensure
that your assembler understands all instructions for your
processor. On Linux, this means you need a recent version of
<code class="docutils literal notranslate"><span class="pre">binutils</span></code>; on macOS you need a recent version of Xcode.</p>
</div>
</div>
<div class="section" id="python-for-venv">
<h4>Python for venv<a class="headerlink" href="#python-for-venv" title="Permalink to this headline">¶</a></h4>
<p>By default, Sage will try to use system’s <span class="math notranslate nohighlight">\(python3\)</span> to set up a virtual
environment, a.k.a. <a class="reference external" href="https://docs.python.org/3.7/library/venv.html">venv</a>
rather than building a Python 3 installation from scratch.
Use the configure option <code class="docutils literal notranslate"><span class="pre">--without-system-python3</span></code> in case you want Python 3
built from scratch.</p>
<p>Sage will accept versions 3.6.x to 3.9.x; however, support for system python 3.6.x
is deprecated and will be removed in the next development cycle.</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">--with-python=/path/to/python3_binary</span></code> to tell Sage to use
<code class="docutils literal notranslate"><span class="pre">/path/to/python3_binary</span></code> to set up the venv. Note that setting up venv requires
a number of Python modules to be available within the Python in question. Currently,
for Sage 9.2, these modules are as follows: sqlite3, ctypes, math, hashlib, crypt,
readline, socket, zlib, distutils.core - they will be checked for by configure.</p>
</div>
<div class="section" id="other-notes">
<h4>Other notes<a class="headerlink" href="#other-notes" title="Permalink to this headline">¶</a></h4>
<p>After extracting the Sage tarball, the subdirectory <code class="file docutils literal notranslate"><span class="pre">upstream</span></code>
contains the source distributions for everything on which Sage depends.
If cloned from a git repository, the upstream tarballs will be downloaded,
verified, and cached as part of the Sage installation process.
We emphasize that all of this software is included with Sage, so you do not
have to worry about trying to download and install any one of these packages
(such as Python, for example) yourself.</p>
<p>When the Sage installation program is run,
it will check that you have each of the above-listed prerequisites,
and inform you of any that are missing, or have unsuitable versions.</p>
</div>
</div>
<div class="section" id="system-specific-requirements">
<h3>System-specific requirements<a class="headerlink" href="#system-specific-requirements" title="Permalink to this headline">¶</a></h3>
<p>On macOS, there are various developer tools needed which may require
some registration on Apple’s developer site; see
<a class="reference internal" href="#section-macprereqs"><span class="std std-ref">macOS prerequisite installation</span></a>.</p>
<p>On Redhat-derived systems not all perl components are installed by
default and you might have to install the <code class="docutils literal notranslate"><span class="pre">perl-ExtUtils-MakeMaker</span></code>
package.</p>
<p>On Cygwin, the <code class="docutils literal notranslate"><span class="pre">lapack</span></code> and <code class="docutils literal notranslate"><span class="pre">liblapack-devel</span></code> packages are required to
provide ATLAS support as the Sage package for ATLAS is not built by default.</p>
</div>
<div class="section" id="installing-prerequisites">
<h3>Installing prerequisites<a class="headerlink" href="#installing-prerequisites" title="Permalink to this headline">¶</a></h3>
<p>To check if you have the above prerequisites installed, for example <code class="docutils literal notranslate"><span class="pre">perl</span></code>,
type:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">command</span> -v perl
</pre></div>
</div>
<p>or:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> which perl
</pre></div>
</div>
<p>on the command line. If it gives an error (or returns nothing), then
either <code class="docutils literal notranslate"><span class="pre">perl</span></code> is not installed, or it is installed but not in your
<a class="reference external" href="https://en.wikipedia.org/wiki/PATH_%28variable%29">PATH</a>.</p>
<div class="section" id="linux-recommended-installation">
<span id="sec-installation-from-sources-linux-recommended-installation"></span><h4>Linux recommended installation<a class="headerlink" href="#linux-recommended-installation" title="Permalink to this headline">¶</a></h4>
<p>On Linux systems (e.g., Ubuntu, Redhat, etc), <code class="docutils literal notranslate"><span class="pre">ar</span></code> and <code class="docutils literal notranslate"><span class="pre">ranlib</span></code> are in the
<a class="reference external" href="https://www.gnu.org/software/binutils/">binutils</a> package.
The other programs are usually located in packages with their respective names.
Assuming you have sufficient privileges, you can install the <code class="docutils literal notranslate"><span class="pre">binutils</span></code> and
other necessary/standard components. The lists provided below are longer than
the minimal prerequisites, which are basically <code class="docutils literal notranslate"><span class="pre">binutils</span></code>, <code class="docutils literal notranslate"><span class="pre">gcc</span></code>/<code class="docutils literal notranslate"><span class="pre">clang</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span></code>,
<code class="docutils literal notranslate"><span class="pre">tar</span></code>, but there is no real need to build compilers and other standard tools
and libraries on a modern Linux system, in order to be able to build Sage.
If you do not have the privileges to do this, ask your system administrator to
do this, or build the components from source code.
The method of installing additional software varies from distribution to
distribution, but on a <a class="reference external" href="https://www.debian.org/">Debian</a> based system (e.g.
<a class="reference external" href="https://www.ubuntu.com/">Ubuntu</a> or <a class="reference external" href="https://www.linuxmint.com/">Mint</a>),
you would use
<a class="reference external" href="https://en.wikipedia.org/wiki/Advanced_Packaging_Tool">apt-get</a>.</p>
<p>On Debian (“buster” or newer) or Ubuntu (“bionic” or newer):</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> sudo apt-get install  bc binutils bzip2 ca-certificates cliquer curl eclib-tools fflas-ffpack flintqs g++ g++ gcc gcc gfan gfortran glpk-utils gmp-ecm lcalc libatomic-ops-dev libboost-dev libbraiding-dev libbrial-dev libbrial-groebner-dev libbz2-dev libcdd-dev libcdd-tools libcliquer-dev libcurl4-openssl-dev libec-dev libecm-dev libffi-dev libflint-arb-dev libflint-dev libfreetype6-dev libgc-dev libgd-dev libgf2x-dev libgiac-dev libgivaro-dev libglpk-dev libgmp-dev libgsl-dev libhomfly-dev libiml-dev liblfunction-dev liblrcalc-dev liblzma-dev libm4rie-dev libmpc-dev libmpfi-dev libmpfr-dev libncurses5-dev libntl-dev libopenblas-dev libpari-dev libpcre3-dev libplanarity-dev libppl-dev libpython3-dev libreadline-dev librw-dev libsqlite3-dev libssl-dev libsuitesparse-dev libsymmetrica2-dev libz-dev libzmq3-dev libzn-poly-dev m4 make nauty openssl palp pari-doc pari-elldata pari-galdata pari-galpol pari-gp2c pari-seadata patch perl pkg-config planarity ppl-dev python3 python3 python3-distutils r-base-dev r-cran-lattice sqlite3 sympow tachyon tar xcas xz-utils yasm
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note: in this documentation, commands like these are
autogenerated. They may as such include duplications. The
duplications are certainly not necessary for the commands to
function properly, but they don’t cause any harm, either.</p>
</div>
<p>On Fedora / Redhat / CentOS:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> sudo yum install  --setopt<span class="o">=</span><span class="nv">tsflags</span><span class="o">=</span> L-function L-function-devel R R-devel arb arb-devel binutils boost-devel brial brial-devel bzip2 bzip2-devel cddlib cliquer cliquer-devel curl diffutils eclib eclib-devel fflas-ffpack-devel findutils flint flint-devel gc gc-devel gcc gcc gcc-c++ gcc-c++ gcc-gfortran gcc-gfortran gd gd-devel gf2x gf2x-devel gfan giac giac-devel givaro givaro-devel glpk glpk-devel glpk-utils gmp gmp-devel gmp-ecm gmp-ecm-devel gsl gsl-devel iml iml-devel libatomic_ops libatomic_ops-devel libbraiding libcurl-devel libffi libffi-devel libfplll libfplll-devel libhomfly-devel libmpc libmpc-devel lrcalc-devel m4 m4ri-devel m4rie-devel make mpfr-devel nauty ncurses-devel ntl-devel openblas-devel openssl openssl-devel palp pari-devel pari-elldata pari-galdata pari-galdata pari-galpol pari-gp pari-seadata patch pcre pcre-devel perl perl-ExtUtils-MakeMaker perl-IPC-Cmd pkg-config planarity planarity-devel ppl ppl-devel python3 python3-devel readline-devel rw-devel sqlite sqlite-devel suitesparse suitesparse-devel symmetrica-devel sympow tachyon tachyon-devel tar which xz xz-devel yasm zeromq zeromq-devel zlib-devel zn_poly zn_poly-devel
</pre></div>
</div>
<p>On Arch Linux:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> sudo pacman -S  arb bc binutils boost brial cblas cddlib eclib fflas-ffpack flintqs gc gcc gcc gcc-fortran gd gf2x gfan giac glpk gsl iml lapack lcalc libatomic_ops libbraiding libgiac libhomfly lrcalc m4 m4ri m4rie make nauty openblas openssl palp pari pari-elldata pari-galdata pari-galdata pari-galpol pari-seadata pari-seadata patch perl planarity ppl python r rankwidth readline sqlite3 suitesparse symmetrica sympow tachyon tar which zn_poly
</pre></div>
</div>
<p>(These examples suppose that you choose to use a systemwide OpenSSL library.)</p>
<p>In addition to these, if you don’t want Sage to build optional packages that might
be available from your OS, cf. the growing list of such packages on <a class="reference external" href="https://trac.sagemath.org/27330">trac ticket #27330</a>,
install on Debian (“buster” or newer) or Ubuntu (“bionic” or newer):</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> sudo apt-get install  cmake coinor-cbc coinor-libcbc-dev git graphviz libboost-dev libfile-slurp-perl libigraph-dev libisl-dev libjson-perl libmongodb-perl libnauty-dev libperl-dev libsvg-perl libterm-readkey-perl libterm-readline-gnu-perl libterm-readline-gnu-perl libxml-libxslt-perl libxml-writer-perl libxml2-dev libxml2-dev lrslib ninja-build pari-gp2c tox
</pre></div>
</div>
<p>On Fedora / Redhat / CentOS:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> sudo yum install  boost-devel cmake coin-or-Cbc coin-or-Cbc-devel coxeter coxeter-devel coxeter-tools git graphviz igraph igraph-devel isl-devel libnauty-devel libxml2-devel lrslib ninja-build pari-galpol pari-seadata perl-ExtUtils-Embed perl-File-Slurp perl-JSON perl-MongoDB perl-Term-ReadLine-Gnu perl-Term-ReadLine-Gnu perl-XML-LibXML perl-XML-LibXSLT perl-XML-Writer tox
</pre></div>
</div>
<p>On Arch Linux:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> sudo pacman -S  boost coin-or-cbc coxeter graphviz igraph libxml2 lrs ninja pari-elldata pari-galpol pari-seadata perl-term-readline-gnu
</pre></div>
</div>
<p>On other Linux systems, you might use
<a class="reference external" href="https://en.wikipedia.org/wiki/RPM_Package_Manager">rpm</a>,
<a class="reference external" href="https://en.wikipedia.org/wiki/Yellowdog_Updater,_Modified">yum</a>,
or other package managers.</p>
</div>
<div class="section" id="macos-prerequisite-installation">
<span id="section-macprereqs"></span><h4>macOS prerequisite installation<a class="headerlink" href="#macos-prerequisite-installation" title="Permalink to this headline">¶</a></h4>
<p>On macOS systems, you need a recent version of
<a class="reference external" href="https://developer.apple.com/downloads/index.action?=command%20line%20tools">Command Line Tools</a>.
It provides all the above requirements.</p>
<p>If you have already installed <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a>
(which at the time of writing is freely available in the Mac App Store,
or through <a class="reference external" href="https://developer.apple.com/downloads/">https://developer.apple.com/downloads/</a> provided you registered for an
Apple Developer account), you can install the command line tools from
there as well.</p>
<ul class="simple">
<li><p>With OS X Mavericks or Yosemite, run the command
<code class="docutils literal notranslate"><span class="pre">xcode-select</span> <span class="pre">--install</span></code> from a Terminal window and click “Install”
in the pop-up dialog box.</p></li>
<li><p>Using OS X Mountain Lion or earlier, run Xcode, open its “Downloads”
preference pane and install the command line tools from there.</p></li>
<li><p>On pre-Lion macOS systems, the command line tools are not available as a
separate download and you have to install the full-blown Xcode supporting your
system version.</p></li>
</ul>
<p>If you have not installed <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a>
you can get these tools as a relatively small download, but it does require
a registration.</p>
<ul class="simple">
<li><p>First, you will need to register as an Apple Developer at
<a class="reference external" href="https://developer.apple.com/register/">https://developer.apple.com/register/</a>.</p></li>
<li><p>Having done so, you should be able to download it for free at
<a class="reference external" href="https://developer.apple.com/downloads/index.action?=command%20line%20tools">https://developer.apple.com/downloads/index.action?=command%20line%20tools</a></p></li>
<li><p>Alternately, <a class="reference external" href="https://developer.apple.com/opensource/">https://developer.apple.com/opensource/</a> should have a link
to Command Line Tools.</p></li>
</ul>
</div>
<div class="section" id="macos-recommended-installation">
<h4>macOS recommended installation<a class="headerlink" href="#macos-recommended-installation" title="Permalink to this headline">¶</a></h4>
<p>Although Sage can in theory build its own version of gfortran, this
can take a while, and the process fails on some recent versions of
OS X. So instead you can install your own copy. One advantage of this
is that you can install it once, and it will get used every time you
build Sage, rather than building gfortran every time.</p>
<p>One way to do that is with the <a class="reference external" href="https://brew.sh">Homebrew package manager</a>. Install Homebrew as their web page describes, and
then the command</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> brew install gcc
</pre></div>
</div>
<p>will install Homebrew’s gcc package, which includes gfortran. Sage
will also use other Homebrew packages, if they are present. You can
install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> brew install arb bdw-gc boost flint fplll freetype gcc gd glpk gmp gpatch gsl libatomic_ops libmpc libpng mpfi mpfr nauty ntl openblas openssl pcre pkg-config ppl python3 r readline sqlite suite-sparse xz yasm zeromq zlib
</pre></div>
</div>
<p>Some Homebrew packages are installed “keg-only,” meaning that they are
not available in standard paths. To make them accessible when building
Sage, run</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">source</span> SAGE_ROOT/.homebrew-build-env
</pre></div>
</div>
<p>(replacing <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> by Sage’s home directory). You can add a
command like this to your shell profile if you want the settings to
persist between shell sessions.</p>
<p>Some additional optional packages are taken care of by:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> brew install boost cmake git graphviz igraph isl libxml2 ninja tox
</pre></div>
</div>
</div>
<div class="section" id="cygwin-prerequisite-installation">
<span id="section-cygwinprereqs"></span><h4>Cygwin prerequisite installation<a class="headerlink" href="#cygwin-prerequisite-installation" title="Permalink to this headline">¶</a></h4>
<p>Sage can be built only on the 64-bit version of Cygwin.  See
<code class="docutils literal notranslate"><span class="pre">README.md</span></code> for the most up-to-date instructions for building Sage
on Cygwin.</p>
<p>Although it is possible to install Sage’s dependencies using the Cygwin
graphical installer, it is recommended to install the <a class="reference external" href="https://github.com/transcode-open/apt-cyg">apt-cyg</a> command-line package
installer, which is used for the remainder of these instructions.  To
run <code class="docutils literal notranslate"><span class="pre">apt-cyg</span></code>, you must have already installed (using the graphical
installer) the following packages at a minimum:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">bzip2 coreutils gawk gzip tar wget</span>
</pre></div>
</div>
<p>With the exception of <code class="docutils literal notranslate"><span class="pre">wget</span></code> most of these are included in the default
package selection when you install Cygwin.  Then, to install <code class="docutils literal notranslate"><span class="pre">apt-cyg</span></code>
run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> curl -OL https://rawgit.com/transcode-open/apt-cyg/master/apt-cyg
<span class="gp">$</span> install apt-cyg /usr/local/bin
<span class="gp">$</span> rm -f apt-cyg
</pre></div>
</div>
<p>To install the current set of system packages known to work for building
Sage, run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> apt-cyg install R binutils bzip2 cddlib-devel cddlib-tools curl findutils gcc-core gcc-core gcc-fortran gcc-fortran gcc-g++ gcc-g++ glpk libatomic_ops-devel libboost-devel libbz2-devel libcrypt-devel libcurl-devel libffi-devel libflint-devel libfreetype-devel libgc-devel libgd-devel libglpk-devel libgmp-devel libgsl-devel libiconv-devel libiconv-devel liblapack-devel liblzma-devel libmpc-devel libmpfr-devel libncurses-devel libntl-devel libopenblas libpcre-devel libreadline-devel libsqlite3-devel libssl-devel libsuitesparseconfig-devel libtirpc-devel libzmq-devel m4 make patch perl perl-ExtUtils-MakeMaker python37 python37-urllib3 python38-devel tar which xz yasm zlib-devel
</pre></div>
</div>
<p>Optional packages that are also known to be installable via system packages
include:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $</span> apt-cyg install cmake git graphviz libboost-devel libisl-devel libxml2-devel ninja perl-Term-ReadLine-Gnu tox
</pre></div>
</div>
</div>
<div class="section" id="ubuntu-on-windows-subsystem-for-linux-wsl-prerequisite-installation">
<h4>Ubuntu on Windows Subsystem for Linux (WSL) prerequisite installation<a class="headerlink" href="#ubuntu-on-windows-subsystem-for-linux-wsl-prerequisite-installation" title="Permalink to this headline">¶</a></h4>
<p>Sage can be installed onto linux running on Windows Subsystem for Linux (WSL). These instructions describe a fresh install of Ubuntu 20.10, but other distibutions or installation methods should work too, though have not been tested.</p>
<ul>
<li><p>Enable hardware-assisted virtualization in the EFI or BIOS of your system. Refer to your system (or motherboard) maker’s documentation for instructions on how to do this.</p></li>
<li><p>Set up WSL by following the <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">official WSL setup guide</a>. Be sure to do the steps to install WSL2 and set it as default.</p></li>
<li><p>Go to the Microsoft Store and install Ubuntu.</p></li>
<li><p>Start Ubuntu from the start menu. Update all packages to the latest version.</p></li>
<li><p>Reboot the all running WSL instances one of the following ways:</p>
<ul>
<li><p>Open Windows Services and restart the LxssManager service.</p></li>
<li><p>Open the Command Prompt or Powershell and enter this command:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">wsl --shutdown</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><a class="reference external" href="https://linuxconfig.org/how-to-upgrade-ubuntu-to-20-10">Upgrade to the Ubuntu 20.10</a>. This step will not be necessary once Ubuntu 20.10 is available in the Microsoft Store.</p></li>
</ul>
<p>From this point on, follow the instructions in the <a class="reference internal" href="#sec-installation-from-sources-linux-recommended-installation"><span class="std std-ref">Linux recommended installation</span></a> section.</p>
<p>When the installation is complete, you may be interested in <a class="reference internal" href="launching.html#sec-launching-wsl-post-installation"><span class="std std-ref">WSL Post-installation steps</span></a>.</p>
</div>
<div class="section" id="other-platforms">
<h4>Other platforms<a class="headerlink" href="#other-platforms" title="Permalink to this headline">¶</a></h4>
<p>On Solaris, you would use <code class="docutils literal notranslate"><span class="pre">pkgadd</span></code> and on OpenSolaris <code class="docutils literal notranslate"><span class="pre">ipf</span></code> to install
the necessary software.</p>
<p>On other systems, check the documentation for your particular operating system.</p>
</div>
<div class="section" id="using-conda-to-provide-system-dependencies">
<span id="section-conda-compilers"></span><h4>Using conda to provide system dependencies<a class="headerlink" href="#using-conda-to-provide-system-dependencies" title="Permalink to this headline">¶</a></h4>
<p>If Conda is installed (check by typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">info</span></code>), there are two ways to
prepare for installing SageMath from source:</p>
<blockquote>
<div><ul>
<li><p>If you are using a git checkout:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./bootstrap
</pre></div>
</div>
</li>
<li><p>Create a new empty environment and activate:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda create -n sage-build
<span class="gp">$</span> conda activate sage-build
</pre></div>
</div>
</li>
<li><p>Install standard packages recognized by sage’s <code class="docutils literal notranslate"><span class="pre">spkg-configure</span></code> mechanism:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda env update --file environment.yml -n sage-build
</pre></div>
</div>
</li>
<li><p>Or install all standard and optional packages recognized by sage:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda env update --file environment-optional.yml -n sage-build
</pre></div>
</div>
</li>
<li><p>Then SageMath will be built using the compilers provided by Conda:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./bootstrap
<span class="gp">$</span> ./configure --prefix<span class="o">=</span><span class="nv">$CONDA_PREFIX</span>
<span class="gp">$</span> make
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="using-conda-to-provide-all-spkgs">
<h4>Using conda to provide all SPKGs<a class="headerlink" href="#using-conda-to-provide-all-spkgs" title="Permalink to this headline">¶</a></h4>
<p>Note that this is an experimental feature and may not work as intended.</p>
<blockquote>
<div><ul>
<li><p>If you are using a git checkout:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./bootstrap
</pre></div>
</div>
</li>
<li><p>Create a new empty environment and activate:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda create -n sage
<span class="gp">$</span> conda activate sage
</pre></div>
</div>
</li>
<li><p>Install standard packages:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda env update --file src/environment.yml -n sage
</pre></div>
</div>
</li>
<li><p>Or install all standard and optional packages:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda env update --file src/environment-optional.yml -n sage
</pre></div>
</div>
</li>
<li><p>Then SageMath will be built using the compilers provided by Conda:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./bootstrap
<span class="gp">$</span> ./configure --prefix<span class="o">=</span><span class="nv">$CONDA_PREFIX</span>
<span class="gp">$</span> <span class="nb">cd</span> src
<span class="gp">$</span> python setup.py install
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Note that <code class="docutils literal notranslate"><span class="pre">make</span></code> is not used at all.  All dependencies
(including all Python packages) are provided by conda.</p>
<p>Thus, you will get a working version of Sage much faster.  However,
note that this will invalidate the use of Sage-the-distribution
commands such as <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span></code> because sage-the-distribution does not
know about the dependencies unlike in the previous section where
it did.</p>
</div>
<div class="section" id="notes-on-using-conda">
<h4>Notes on using conda<a class="headerlink" href="#notes-on-using-conda" title="Permalink to this headline">¶</a></h4>
<p>If you don’t want conda to be used by sage, deactivate conda (for the current shell session).</p>
<blockquote>
<div><ul>
<li><p>Type:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda deactivate
</pre></div>
</div>
</li>
<li><p>Repeat the command until <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">info</span></code> shows:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda info

<span class="go">active environment : None</span>
<span class="go">...</span>
</pre></div>
</div>
</li>
</ul>
<p>Then SageMath will be built either using the compilers provided by the
operating system, or its own compilers.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="specific-notes-for-make-and-tar">
<h3>Specific notes for <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code><a class="headerlink" href="#specific-notes-for-make-and-tar" title="Permalink to this headline">¶</a></h3>
<p>On macOS, the system-wide BSD <code class="docutils literal notranslate"><span class="pre">tar</span></code> supplied will build Sage, so there is no
need to install the GNU <code class="docutils literal notranslate"><span class="pre">tar</span></code>.</p>
<p>On Solaris or OpenSolaris, the Sun/Oracle versions of <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code> are
unsuitable for building Sage.
Therefore, you must have the GNU versions of <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code> installed and
they must be the first <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code> in your <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>On Solaris 10, a version of GNU <code class="docutils literal notranslate"><span class="pre">make</span></code> may be found at
<code class="file docutils literal notranslate"><span class="pre">/usr/sfw/bin/gmake</span></code>,
but you will need to copy it somewhere else and rename it to <code class="docutils literal notranslate"><span class="pre">make</span></code>.
The same is true for GNU <code class="docutils literal notranslate"><span class="pre">tar</span></code>; a version of GNU <code class="docutils literal notranslate"><span class="pre">tar</span></code> may be found at
<code class="file docutils literal notranslate"><span class="pre">/usr/sfw/bin/gtar</span></code>,
but it will need to be copied somewhere else and renamed to <code class="docutils literal notranslate"><span class="pre">tar</span></code>.
It is recommended to create a directory <code class="file docutils literal notranslate"><span class="pre">$HOME/bins-for-sage</span></code> and to put
the GNU versions of <code class="docutils literal notranslate"><span class="pre">tar</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span></code> in that directory.
Then ensure that <code class="file docutils literal notranslate"><span class="pre">$HOME/bins-for-sage</span></code> is first in your <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.
That’s because Sage also needs <code class="file docutils literal notranslate"><span class="pre">/usr/ccs/bin</span></code> in your <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> to
execute programs like <code class="docutils literal notranslate"><span class="pre">ar</span></code> and <code class="docutils literal notranslate"><span class="pre">ranlib</span></code>, but <code class="file docutils literal notranslate"><span class="pre">/usr/ccs/bin</span></code> has the
Sun/Oracle versions of <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code> in it.</p>
<p>If you attempt to build Sage on AIX or HP-UX, you will need to install both
GNU <code class="docutils literal notranslate"><span class="pre">make</span></code> and GNU <code class="docutils literal notranslate"><span class="pre">tar</span></code>.</p>
</div>
<div class="section" id="using-alternative-compilers">
<span id="section-compilers"></span><h3>Using alternative compilers<a class="headerlink" href="#using-alternative-compilers" title="Permalink to this headline">¶</a></h3>
<p>Sage developers tend to use fairly recent versions of GCC.
Nonetheless, the Sage build process on Linux
should succeed with any reasonable C/C++ compiler;
(we do not recommend GCC older than version 5.1).
This is because Sage will build GCC first (if needed) and then use that newly
built GCC to compile Sage.</p>
<p>If you don’t want this and want to try building Sage with a different set of
compilers,
you need to pass Sage’s <code class="docutils literal notranslate"><span class="pre">./configure</span></code> compiler names, via environment
variables <code class="docutils literal notranslate"><span class="pre">CC</span></code>, <code class="docutils literal notranslate"><span class="pre">CXX</span></code>, and <code class="docutils literal notranslate"><span class="pre">FC</span></code>, for C, C++, and Fortran compilers,
respectively, e.g. if you C compiler is <code class="docutils literal notranslate"><span class="pre">clang</span></code>, your C++ compiler is <code class="docutils literal notranslate"><span class="pre">clang++</span></code>,
and your Fortran compiler is <code class="docutils literal notranslate"><span class="pre">flang</span></code> then you would need to run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">CC</span><span class="o">=</span>clang <span class="nv">CXX</span><span class="o">=</span>clang++ <span class="nv">FC</span><span class="o">=</span>flang ./configure
</pre></div>
</div>
<p>before running <code class="docutils literal notranslate"><span class="pre">make</span></code>. It is recommended that you inspect the output of <code class="docutils literal notranslate"><span class="pre">./configure</span></code>
in order to check that Sage will not try to build GCC. Namely, there should be lines like:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">gcc-7.2.0 will not be installed (configure check)</span>
<span class="go">...</span>
<span class="go">gfortran-7.2.0 will not be installed (configure check)</span>
</pre></div>
</div>
<p>indicating that Sage will not attempt to build <code class="docutils literal notranslate"><span class="pre">gcc/g++/gfortran</span></code>.</p>
<p>If you are interested in working on support for commercial compilers from
<a class="reference external" href="http://docs.hp.com/en/5966-9844/ch01s03.html">HP</a>,
<a class="reference external" href="http://www-01.ibm.com/software/awdtools/xlcpp/">IBM</a>,
<a class="reference external" href="http://software.intel.com/en-us/articles/intel-compilers/">Intel</a>,
<a class="reference external" href="http://www.oracle.com/technetwork/server-storage/solarisstudio/overview/index.html">Sun/Oracle</a>,
etc,
please email the sage-devel mailing list at <a class="reference external" href="https://groups.google.com/group/sage-devel">https://groups.google.com/group/sage-devel</a>.</p>
</div>
</div>
<div class="section" id="additional-software">
<h2><a class="toc-backref" href="#id7">Additional software</a><a class="headerlink" href="#additional-software" title="Permalink to this headline">¶</a></h2>
<div class="section" id="recommended-programs">
<h3>Recommended programs<a class="headerlink" href="#recommended-programs" title="Permalink to this headline">¶</a></h3>
<p>The following programs are recommended.
They are not strictly required at build time or at run time,
but provide additional capabilities:</p>
<ul class="simple">
<li><p><strong>dvipng</strong>.</p></li>
<li><p><strong>ffmpeg</strong>.</p></li>
<li><p><strong>ImageMagick</strong>.</p></li>
<li><p><strong>LaTeX</strong>: highly recommended.</p></li>
</ul>
<p>It is highly recommended that you have
<a class="reference external" href="https://en.wikipedia.org/wiki/LaTeX">LaTeX</a>
installed, but it is not required.
The most popular packaging is <a class="reference external" href="https://www.tug.org/texlive/">TeX Live</a>,
which can be installed following the directions on their web site.
On Linux systems you can alternatively install your distribution’s
texlive packages:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get install texlive       <span class="c1"># debian</span>
<span class="gp">$</span> sudo yum install texlive           <span class="c1"># redhat</span>
</pre></div>
</div>
<p>or similar commands. In addition to the base TeX Live install, you may
need some optional TeX Live packages, for example
country-specific babel packages for the localized Sage
documentation.</p>
<p>If you don’t have either ImageMagick or ffmpeg, you won’t be able to
view animations.
ffmpeg can produce animations in more different formats than ImageMagick,
and seems to be faster than ImageMagick when creating animated GIFs.
Either ImageMagick or dvipng is used for displaying some LaTeX output in the
Sage notebook.</p>
<p>On Debian/Ubuntu, the following system packages are recommended.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-generic-extra</span></code> (to generate pdf documentation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-xetex</span></code> (to convert Jupyter notebooks to pdf)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latexmk</span></code> (to generate pdf documentation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandoc</span></code> (to convert Jupyter notebooks to pdf)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dvipng</span></code> (to render text with LaTeX in Matplotlib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default-jdk</span></code> (to run the Jmol 3D viewer from the console and generate images for 3D plots in the documentation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> (to produce animations)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libavdevice-dev</span></code> (to produce animations)</p></li>
</ul>
</div>
<div class="section" id="notebook-additional-features">
<h3>Notebook additional features<a class="headerlink" href="#notebook-additional-features" title="Permalink to this headline">¶</a></h3>
<p><strong>attention: Sage’s notebook is deprecated, and notebook() command has been removed. Use Jupyter notebook instead</strong></p>
<p>By default, the Sage notebook uses the
<a class="reference external" href="https://en.wikipedia.org/wiki/HTTP">HTTP</a>
protocol when you type the command <code class="docutils literal notranslate"><span class="pre">notebook()</span></code>.
To run the notebook in secure mode by typing <code class="docutils literal notranslate"><span class="pre">notebook(secure=True)</span></code> which
uses the <a class="reference external" href="https://en.wikipedia.org/wiki/HTTPS">HTTPS</a> protocol,
or to use <a class="reference external" href="https://en.wikipedia.org/wiki/OpenID">OpenID</a> authentication,
you need to follow specific installation steps described in
<a class="reference internal" href="#section-notebook-ssl"><span class="std std-ref">Building the notebook with SSL support</span></a>.</p>
<p>Although all necessary components are provided through Sage optional
packages, i.e., even if you choose not to install a systemwide version
of OpenSSL, you can install a local (Sage_specific) version of
<a class="reference external" href="https://www.openssl.org">OpenSSL</a> by using Sage’s <strong>openssl</strong>
package and running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">openssl</span></code> as suggested in
<a class="reference internal" href="#section-notebook-ssl"><span class="std std-ref">Building the notebook with SSL support</span></a> (this requires an Internet
connection). Alternatively, you might prefer to install OpenSSL and
the OpenSSL development headers globally on your system, as described
above.</p>
<p>Finally, if you intend to distribute the notebook load onto several Sage
servers, you will surely want to setup an
<a class="reference external" href="https://en.wikipedia.org/wiki/SSH">SSH</a> server and generate SSH keys.
This can be achieved using <a class="reference external" href="https://www.openssh.com/">OpenSSH</a>.</p>
<p>On Linux systems, the OpenSSH server, client and utilities are usually provided
by the <strong>openssh-server</strong> and <strong>openssh-client</strong> packages and can be installed
using:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get install openssh-server openssh-client
</pre></div>
</div>
<p>or similar commands.</p>
</div>
<div class="section" id="tcl-tk">
<h3>Tcl/Tk<a class="headerlink" href="#tcl-tk" title="Permalink to this headline">¶</a></h3>
<p>If you want to use <a class="reference external" href="https://www.tcl.tk/">Tcl/Tk</a> libraries in Sage,
you need to install the Tcl/Tk and its development headers before building
Sage.
Sage’s Python will then automatically recognize your system’s install of
Tcl/Tk.</p>
<p>On Linux systems, these are usually provided by the <strong>tk</strong> and <strong>tk-dev</strong>
(or <strong>tk-devel</strong>) packages which can be installed using:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get install tk tk-dev
</pre></div>
</div>
<p>or similar commands.</p>
<p>If you installed Sage first, all is not lost. You just need to rebuild
Sage’s Python and any part of Sage relying on it:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sage -f python3  <span class="c1"># rebuild Python3</span>
<span class="gp">$</span> make             <span class="c1"># rebuild components of Sage depending on Python</span>
</pre></div>
</div>
<p>after installing the Tcl/Tk development libraries as above.</p>
<p>If</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">_tkinter</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">Tkinter</span>
</pre></div>
</div>
<p>does not raise an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>, then it worked.</p>
</div>
</div>
<div class="section" id="step-by-step-installation-procedure">
<span id="build-from-source-step-by-step"></span><h2><a class="toc-backref" href="#id8">Step-by-step installation procedure</a><a class="headerlink" href="#step-by-step-installation-procedure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-procedure">
<h3>General procedure<a class="headerlink" href="#general-procedure" title="Permalink to this headline">¶</a></h3>
<p>Installation from source is (potentially) very easy, because the distribution
contains (essentially) everything on which Sage depends.</p>
<p>Make sure there are <strong>no spaces</strong> in the path name for the directory in which
you build:
several of Sage’s components will not build if there are spaces in the path.
Running Sage from a directory with spaces in its name will also fail.</p>
<ol class="arabic">
<li><p>Go to <a class="reference external" href="https://www.sagemath.org/download-source.html">https://www.sagemath.org/download-source.html</a>, select a mirror,
and download the file <code class="file docutils literal notranslate"><span class="pre">sage-x.y.tar.gz</span></code>.</p>
<p>This compressed archive file contains the source code for Sage and
the source for all programs on which Sage depends.</p>
<p>Download it into any directory you have write access to, preferably on a
fast filesystem, avoiding
<a class="reference external" href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a> and the like.
On personal computers, any subdirectory of your <span class="target" id="index-3"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOME</span></code> directory
should do. Note that once you have built Sage (by running <code class="docutils literal notranslate"><span class="pre">make</span></code>,
as described below), you will not be able to move or rename its
directory without breaking Sage.</p>
</li>
<li><p>Extract the archive:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> tar xvf sage-x.y.tar.gz
</pre></div>
</div>
<p>This creates a directory <code class="file docutils literal notranslate"><span class="pre">sage-x.y</span></code>.</p>
</li>
<li><p>Change into that directory:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> sage-x.y
</pre></div>
</div>
<p>This is Sage’s home directory.
It is also referred to as <span class="target" id="index-4"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> or the top level Sage
directory.</p>
</li>
<li><p>Optional, but highly recommended:
Read the <code class="file docutils literal notranslate"><span class="pre">README.md</span></code> file there.</p></li>
<li><p>Optional:  Set various other environment variables that influence the
build process; see <a class="reference internal" href="#section-envvar"><span class="std std-ref">Environment variables</span></a>.</p>
<p>Some environment variables deserve a special mention: <span class="target" id="index-5"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CC</span></code>,
<span class="target" id="index-6"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXX</span></code> and <span class="target" id="index-7"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FC</span></code>;
and on macOS, <span class="target" id="index-8"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">OBJC</span></code> and <span class="target" id="index-9"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">OBJCXX</span></code>. Those variables
defining your compilers
can be set at configuration time and their values will be recorded for
further use at runtime. Those initial values are over-ridden if Sage builds
its own compiler or they are set to a different value again before calling
Sage. Note that some packages will ignore the compiler settings and use
values deemed safe for that package on a particular OS.</p>
</li>
<li><p>Run the configure script to set some options that
influence the build process.</p>
<ul>
<li><p>Choose the installation hierarchy (<span class="target" id="index-10"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_LOCAL</span></code>).
The default is the <code class="docutils literal notranslate"><span class="pre">local</span></code> subdirectory of <span class="target" id="index-11"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./configure --prefix<span class="o">=</span>SAGE_LOCAL
</pre></div>
</div>
<p>Note that in Sage’s build process, <code class="docutils literal notranslate"><span class="pre">make</span></code> builds <strong>and</strong>
installs (<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> is a no-op).  Therefore the
installation hierarchy must be writable by the user.</p>
</li>
<li><p>Other options are available; see:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./configure --help
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Start the build process:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make
</pre></div>
</div>
<p>or if your system supports multiprocessing and you want to use several
processes to build Sage:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">MAKE</span><span class="o">=</span><span class="s1">&#39;make -jNUM&#39;</span> make
</pre></div>
</div>
<p>to tell the <code class="docutils literal notranslate"><span class="pre">make</span></code> program to run <code class="docutils literal notranslate"><span class="pre">NUM</span></code> jobs in parallel when building
Sage. This compiles Sage and all its dependencies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>macOS allows changing directories without using exact capitalization.
Beware of this convenience when compiling for macOS. Ignoring exact
capitalization when changing into <span class="target" id="index-12"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> can lead to build
errors for dependencies requiring exact capitalization in path names.</p>
</div>
<p>Note that you do not need to be logged in as root, since no files are
changed outside of the <code class="file docutils literal notranslate"><span class="pre">sage-x.y</span></code> directory.
In fact, <strong>it is inadvisable to build Sage as root</strong>, as the root account
should only be used when absolutely necessary and mistyped commands can have
serious consequences if you are logged in as root.
There has been a bug reported (see <a class="reference external" href="https://trac.sagemath.org/9551">trac ticket #9551</a>) in Sage which would have
overwritten a system file had the user been logged in as root.</p>
<p>Typing <code class="docutils literal notranslate"><span class="pre">make</span></code> performs the usual steps for each Sage’s dependency,
but installs all the resulting files into the local build tree.
Depending on the age and the architecture of your system, it can take from
a few tens of minutes to several hours to build Sage from source.
On really slow hardware, it can even take a few days to build Sage.</p>
<p>Each component of Sage has its own build log, saved in
<code class="file docutils literal notranslate"><span class="pre">SAGE_ROOT/logs/pkgs</span></code>.
If the build of Sage fails, you will see a message mentioning which
package(s) failed to build and the location of the log file for each
failed package.
If this happens, then paste the contents of these log file(s)
to the Sage support
newsgroup at <a class="reference external" href="https://groups.google.com/group/sage-support">https://groups.google.com/group/sage-support</a>.
If the log files are very large (and many are), then don’t paste the whole
file, but make sure to include any error messages.
It would also be helpful to include the type of operating system
(Linux, macOS, Solaris, OpenSolaris, Cygwin, or any other system),
the version and release date of that operating system and the version of
the copy of Sage you are using.
(There are no formal requirements for bug reports – just send them;
we appreciate everything.)</p>
<p>See <a class="reference internal" href="#section-make"><span class="std std-ref">Make targets</span></a> for some targets for the <code class="docutils literal notranslate"><span class="pre">make</span></code> command,
<a class="reference internal" href="#section-envvar"><span class="std std-ref">Environment variables</span></a> for additional information on useful environment
variables used by Sage,
and <a class="reference internal" href="#section-notebook-ssl"><span class="std std-ref">Building the notebook with SSL support</span></a> for additional instruction on how to build
the notebook with SSL support.</p>
</li>
<li><p>To start Sage, you can now simply type from Sage’s home directory:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./sage
</pre></div>
</div>
<p>You should see the Sage prompt, which will look something like this:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sage
<span class="go">┌────────────────────────────────────────────────────────────────────┐</span>
<span class="go">│ SageMath version 8.8, Release Date: 2019-06-26                     │</span>
<span class="go">│ Using Python 3.7.3. Type &quot;help()&quot; for help.                        │</span>
<span class="go">└────────────────────────────────────────────────────────────────────┘</span>
<span class="go">sage:</span>
</pre></div>
</div>
<p>Note that Sage should take well under a minute when it starts for the first
time, but can take several minutes if the file system is slow or busy.
Since Sage opens a lot of files, it is preferable to install Sage on a fast
filesystem if possible.</p>
<p>Just starting successfully tests that many of the components built
correctly.
Note that this should have been already automatically tested during the
build process.
If the above is not displayed (e.g., if you get a massive traceback), please
report the problem, e.g., at <a class="reference external" href="https://groups.google.com/group/sage-support">https://groups.google.com/group/sage-support</a>.</p>
<p>After Sage has started, try a simple command:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Or something slightly more complicated:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">factor</span><span class="p">(</span><span class="mi">2005</span><span class="p">)</span>
<span class="go">5 * 401</span>
</pre></div>
</div>
</li>
<li><p>Optional, but highly recommended:
Test the install by typing <code class="docutils literal notranslate"><span class="pre">./sage</span> <span class="pre">--testall</span></code>.
This runs most examples in the source code and makes sure that they run
exactly as claimed.
To test all examples, use <code class="docutils literal notranslate"><span class="pre">./sage</span> <span class="pre">--testall</span> <span class="pre">--optional=all</span> <span class="pre">--long</span></code>;
this will run examples that take a long time, and those that depend on
optional packages and software, e.g., Mathematica or Magma.
Some (optional) examples will therefore likely fail.</p>
<p>Alternatively, from within <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT</span></code>, you can type <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code>
(respectively <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptest</span></code>) to run all the standard test code serially
(respectively in parallel).</p>
<p>Testing the Sage library can take from half an hour to several hours,
depending on your hardware.
On slow hardware building and testing Sage can even take several days!</p>
</li>
<li><p>Optional:
Check the interfaces to any other software that you have available.
Note that each interface calls its corresponding program by a particular
name: <a class="reference external" href="https://www.wolfram.com/mathematica/">Mathematica</a> is invoked by
calling <code class="docutils literal notranslate"><span class="pre">math</span></code>, <a class="reference external" href="https://www.maplesoft.com/">Maple</a> by calling <code class="docutils literal notranslate"><span class="pre">maple</span></code>,
etc.
The easiest way to change this name or perform other customizations is
to create a redirection script in <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/bin</span></code>.
Sage inserts this directory at the front of your <span class="target" id="index-13"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>, so your
script may need to use an absolute path to avoid calling itself; also, your
script should pass along all of its arguments.
For example, a <code class="docutils literal notranslate"><span class="pre">maple</span></code> script might look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nb">exec</span> /etc/maple10.2/maple.tty <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
<li><p>Optional:
There are different possibilities to make using Sage a little easier:</p>
<ul>
<li><p>Make a symbolic link from <code class="file docutils literal notranslate"><span class="pre">/usr/local/bin/sage</span></code> (or another
directory in your <span class="target" id="index-14"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>) to <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/sage</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ln -s /path/to/sage-x.y/sage /usr/local/bin/sage
</pre></div>
</div>
<p>Now simply typing <code class="docutils literal notranslate"><span class="pre">sage</span></code> from any directory should be sufficient to run
Sage.</p>
</li>
<li><p>Copy <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/sage</span></code> to a location in your <span class="target" id="index-15"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.
If you do this, make sure you edit the line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SAGE_ROOT=/path/to/sage-version</span>
</pre></div>
</div>
<p>at the beginning of the copied <code class="docutils literal notranslate"><span class="pre">sage</span></code> script according to the direction
given there to something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SAGE_ROOT</span><span class="o">=</span>&lt;SAGE_ROOT&gt;
</pre></div>
</div>
<p>(note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> above!).
It is best to edit only the copy, not the original.</p>
</li>
<li><p>For <a class="reference external" href="https://www.kde.org/">KDE</a> users, create a bash script called
<code class="docutils literal notranslate"><span class="pre">sage</span></code> containing the lines
(note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> below!):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>

konsole -T <span class="s2">&quot;sage&quot;</span> -e &lt;SAGE_ROOT&gt;/sage
</pre></div>
</div>
<p>make it executable:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> chmod a+x sage
</pre></div>
</div>
<p>and put it somewhere in your <span class="target" id="index-16"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>You can also make a KDE desktop icon with this line as the command
(under the Application tab of the Properties of the icon, which you get my
right clicking the mouse on the icon).</p>
</li>
<li><p>On Linux and macOS systems, you can make an alias to
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/sage</span></code>.
For example, put something similar to the following line in your
<code class="file docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">sage</span><span class="o">=</span>&lt;SAGE_ROOT&gt;/sage
</pre></div>
</div>
<p>(Note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> above!)
Having done so, quit your terminal emulator and restart it.
Now typing <code class="docutils literal notranslate"><span class="pre">sage</span></code> within your terminal emulator should start Sage.</p>
</li>
</ul>
</li>
<li><p>Optional:
Install optional Sage packages and databases.
Type <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--optional</span></code> to see a list of them (this requires an Internet
connection), or visit <a class="reference external" href="https://www.sagemath.org/packages/optional/">https://www.sagemath.org/packages/optional/</a>.
Then type <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">&lt;package-name&gt;</span></code> to automatically download and install
a given package.</p></li>
<li><p>Optional:
Run the <code class="docutils literal notranslate"><span class="pre">install_scripts</span></code> command from within Sage to create GAP, GP,
Maxima, Singular, etc., scripts in your <span class="target" id="index-17"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.
Type <code class="docutils literal notranslate"><span class="pre">install_scripts?</span></code> in Sage for details.</p></li>
<li><p>Have fun! Discover some amazing conjectures!</p></li>
</ol>
</div>
<div class="section" id="building-the-notebook-with-ssl-support">
<span id="section-notebook-ssl"></span><h3>Building the notebook with SSL support<a class="headerlink" href="#building-the-notebook-with-ssl-support" title="Permalink to this headline">¶</a></h3>
<p>Read this section if you are intending to run a Sage notebook server for
multiple users.</p>
<p>For security, you may wish users to access the server using the HTTPS protocol
(i.e., to run <code class="docutils literal notranslate"><span class="pre">notebook(secure=True)</span></code>).
You also may want to use OpenID for user authentication.
The first of these requires you to install
<a class="reference external" href="https://pyopenssl.org/">pyOpenSSL</a>,
and they both require OpenSSL.</p>
<p>If you have OpenSSL and the OpenSSL development headers installed on your
system, you can install pyOpenSSL by building Sage and then typing:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./sage -i pyopenssl
</pre></div>
</div>
<p>Alternatively, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ssl</span></code> builds Sage and installs pyOpenSSL at once.
Note that these commands require Internet access.</p>
<p>If you are missing either OpenSSL or OpenSSL’s development headers,
you can install a local copy of both into your Sage installation first.
Ideally, this should be done before installing Sage; otherwise, you should at
least rebuild Sage’s Python, and ideally any part of Sage relying on it.
The procedure is as follows (again, with a computer connected to the
Internet).
Starting from a fresh Sage tarball:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./sage -i openssl
<span class="gp">$</span> make ssl
</pre></div>
</div>
<p>And if you’ve already built Sage:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./sage -i openssl
<span class="gp">$</span> ./sage -f python3
<span class="gp">$</span> make ssl
</pre></div>
</div>
<p>The third line will rebuild all parts of Sage that depend on Python;
this can take a while.</p>
</div>
<div class="section" id="rebasing-issues-on-cygwin">
<h3>Rebasing issues on Cygwin<a class="headerlink" href="#rebasing-issues-on-cygwin" title="Permalink to this headline">¶</a></h3>
<p>Building on Cygwin will occasionally require “rebasing” <code class="docutils literal notranslate"><span class="pre">dll</span></code> files.
Sage provides some scripts, located in <code class="file docutils literal notranslate"><span class="pre">$SAGE_LOCAL/bin</span></code>, to do so:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code>, a shell script which calls Cygwin’s <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code>
program.
It must be run within a <code class="docutils literal notranslate"><span class="pre">dash</span></code> shell from the <span class="target" id="index-18"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> directory
after all other Cygwin processes have been shut down and needs write-access
to the system-wide rebase database located at <code class="file docutils literal notranslate"><span class="pre">/etc/rebase.db.i386</span></code>,
which usually means administrator privileges.
It updates the system-wide database and adds Sage dlls to it, so that
subsequent calls to <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> will take them into account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sage-rebase.sh</span></code>, a shell script which calls Cygwin’s <code class="docutils literal notranslate"><span class="pre">rebase</span></code> program
together with the <code class="docutils literal notranslate"><span class="pre">-O/--oblivious</span></code> option.
It must be run within a shell from <span class="target" id="index-19"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> directory.
Contrary to the <code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code> script, it neither updates the
system-wide database, nor adds Sage dlls to it.
Therefore, subsequent calls to <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> will not take them into account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sage-rebaseall.bat</span></code> (respectively <code class="docutils literal notranslate"><span class="pre">sage-rebase.bat</span></code>), an MS-DOS batch
file which calls the <code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code> (respectively <code class="docutils literal notranslate"><span class="pre">sage-rebase.sh</span></code>)
script.
It must be run from a Windows command prompt, after adjusting
<span class="target" id="index-20"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> to the Windows location of Sage’s home directory, and, if
Cygwin is installed in a non-standard location, adjusting
<span class="target" id="index-21"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CYGWIN_ROOT</span></code> as well.</p></li>
</ul>
<p>Some systems may encounter this problem frequently enough to make building or
testing difficult.
If executing the above scripts or directly calling <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> does not solve
rebasing issues, deleting the system-wide database and then regenerating it
from scratch, e.g., by executing <code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code>, might help.</p>
<p>Finally, on Cygwin, one should also avoid the following:</p>
<ul class="simple">
<li><p>building in home directories of Windows domain users;</p></li>
<li><p>building in paths with capital letters
(see <a class="reference external" href="https://trac.sagemath.org/13343">trac ticket #13343</a>, although there has been some success doing so).</p></li>
</ul>
</div>
</div>
<div class="section" id="make-targets">
<span id="section-make"></span><h2><a class="toc-backref" href="#id9">Make targets</a><a class="headerlink" href="#make-targets" title="Permalink to this headline">¶</a></h2>
<p>To build Sage from scratch, you would typically execute <code class="docutils literal notranslate"><span class="pre">make</span></code> in Sage’s home
directory to build Sage and its <a class="reference external" href="https://en.wikipedia.org/wiki/HTML">HTML</a>
documentation.
The <code class="docutils literal notranslate"><span class="pre">make</span></code> command is pretty smart, so if your build of Sage is interrupted,
then running <code class="docutils literal notranslate"><span class="pre">make</span></code> again should cause it to pick up where it left off.
The <code class="docutils literal notranslate"><span class="pre">make</span></code> command can also be given options, which control what is built and
how it is built:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span></code> builds Sage: it compiles all of the Sage packages.
It does not build the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code> builds Sage’s documentation in HTML format.
Note that this requires that Sage be built first, so it will automatically
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span></code> first.
Thus, running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code> is equivalent to running <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-pdf</span></code> builds Sage’s documentation in PDF format. This also
requires that Sage be built first, so it will automatically run <code class="docutils literal notranslate"><span class="pre">make</span>
<span class="pre">build</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-html-no-plot</span></code> builds Sage’s documentation in html format
but skips the inclusion of graphics auto-generated using the
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">PLOT</span></code> markup and the <code class="docutils literal notranslate"><span class="pre">sphinx_plot</span></code> function. This is
primarily intended for use when producing certain binary
distributions of Sage, to lower the size of the distribution. As of
this writing (December 2014, Sage 6.5), there are only a few such
plots, adding about 4M to the <code class="file docutils literal notranslate"><span class="pre">local/share/doc/sage/</span></code> directory.
In the future, this may grow, of course. Note: after using this, if you
want to build the documentation and include the pictures, you should
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-clean</span></code>, because the presence, or lack, of pictures
is cached in the documentation output.
You can benefit from this no-plot feature with other make targets by doing
<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">SAGE_DOCBUILD_OPTS+='</span> <span class="pre">--no-plot'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptest</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestlong</span></code>: these run Sage’s test suite.
The first version skips tests that need more than a few seconds to complete
and those which depend on optional packages or additional software.
The second version includes the former, and so it takes longer.
The “p” in <code class="docutils literal notranslate"><span class="pre">ptest</span></code> stands for “parallel”: tests are run in parallel.
If you want to run tests serially, you can use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code> or
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testlong</span></code> instead.
If you want to run tests depending on optional packages and additional
software, you can use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testall</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestall</span></code>,
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testalllong</span></code>, or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestalllong</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-clean</span></code> removes several directories which are produced
when building the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">distclean</span></code> restores the Sage directory to its state before doing any
building: it is almost equivalent to deleting Sage’s entire home directory and
unpacking the source tarfile again, the only difference being that the
<code class="file docutils literal notranslate"><span class="pre">.git</span></code> directory is preserved, so git branches are not deleted.</p></li>
</ul>
</div>
<div class="section" id="environment-variables">
<span id="section-envvar"></span><h2><a class="toc-backref" href="#id10">Environment variables</a><a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>Sage uses several environment variables to control its build process.
Most users won’t need to set any of these: the build process just works on many
platforms.
(Note though that setting <span class="target" id="index-22"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKE</span></code>, as described below, can significantly
speed up the process.)
Building Sage involves building about 100 packages, each of which has its own
compilation instructions.</p>
<p>The Sage source tarball already includes the sources for all standard
packages, that is, it allows you to build Sage without internet
connection. The git repository, however, does not contain the source
code for third-party packages. Instead, it will be downloaded as
needed (Note: you can run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">download</span></code> to force downloading
packages before building). Package downloads use the Sage mirror
network, the nearest mirror will be determined automatically for
you. This is influenced by the following environment variable:</p>
<ul>
<li><p><span class="target" id="index-23"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SERVER</span></code> - Try the specified mirror first, before
falling back to the official Sage mirror list. Note that Sage will
search the directory</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_SERVER/spkg/upstream</span></code></p></li>
</ul>
<p>for upstream tarballs.</p>
</li>
</ul>
<p>Here are some of the more commonly used variables affecting the build process:</p>
<ul>
<li><p><span class="target" id="index-24"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKE</span></code> - one useful setting for this variable when building Sage is
<code class="docutils literal notranslate"><span class="pre">MAKE='make</span> <span class="pre">-jNUM'</span></code> to tell the <code class="docutils literal notranslate"><span class="pre">make</span></code> program to run <code class="docutils literal notranslate"><span class="pre">NUM</span></code> jobs in
parallel when building.
Note that not all Sage packages (e.g. ATLAS) support this variable.</p>
<p>Some people advise using more jobs than there are CPU cores, at least if the
system is not heavily loaded and has plenty of RAM; for example, a good
setting for <code class="docutils literal notranslate"><span class="pre">NUM</span></code> might be between 1 and 1.5 times the number of cores.
In addition, the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option sets a load limit: <code class="docutils literal notranslate"><span class="pre">MAKE='make</span> <span class="pre">-j4</span> <span class="pre">-l5.5</span></code>,
for example, tells <code class="docutils literal notranslate"><span class="pre">make</span></code> to try to use four jobs, but to not start more
than one job if the system load average is above 5.5.
See the manual page for GNU <code class="docutils literal notranslate"><span class="pre">make</span></code>: <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html#Options-Summary">Command-line options</a>
and <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html#Parallel">Parallel building</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some users on single-core macOS machines have reported problems when
building Sage with <code class="docutils literal notranslate"><span class="pre">MAKE='make</span> <span class="pre">-jNUM'</span></code> with <code class="docutils literal notranslate"><span class="pre">NUM</span></code> greater than one.</p>
</div>
</li>
<li><p><span class="target" id="index-25"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_NUM_THREADS</span></code> - if set to a number, then when building the
documentation, parallel doctesting, or running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-b</span></code>, use this many
threads.
If this is not set, then determine the number of threads using the value of
the <span class="target" id="index-26"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKE</span></code> (see above) or <span class="target" id="index-27"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKEFLAGS</span></code> environment variables.
If none of these specifies a number of jobs, use one thread (except for
parallel testing: there we use a default of the number of CPU cores, with a
maximum of 8 and a minimum of 2).</p></li>
<li><p><span class="target" id="index-28"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">V</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, silence the build.  Instead of
showing a detailed compilation log, only one line of output is shown
at the beginning and at the end of the installation of each Sage
package.  To see even less output, use:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make -s <span class="nv">V</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p>(Note that the above uses the syntax of setting a Makefile variable.)</p>
</li>
<li><p><span class="target" id="index-29"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, then during the build process,
or when installing packages manually,
run the test suite for each package which has one, and stop with an error
if tests are failing.  If set to <code class="docutils literal notranslate"><span class="pre">warn</span></code>, then only a warning is printed
in this case.
See also <span class="target" id="index-30"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK_PACKAGES</span></code>.</p></li>
<li><p><span class="target" id="index-31"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK_PACKAGES</span></code> - if <span class="target" id="index-32"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK</span></code> is set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>,
then the default behavior is to run test suites for all spkgs which contain
them.
If <span class="target" id="index-33"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK_PACKAGES</span></code> is set, it should be a comma-separated list
of strings of the form <code class="docutils literal notranslate"><span class="pre">package-name</span></code> or <code class="docutils literal notranslate"><span class="pre">!package-name</span></code>.
An entry <code class="docutils literal notranslate"><span class="pre">package-name</span></code> means to run the test suite for the named package
regardless of the setting of <span class="target" id="index-34"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK</span></code>.
An entry <code class="docutils literal notranslate"><span class="pre">!package-name</span></code> means to skip its test suite.
So if this is set to <code class="docutils literal notranslate"><span class="pre">mpir,!python3</span></code>, then always run the test suite for
MPIR, but always skip the test suite for Python 3.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of Sage 9.1, the test suites for the Python 2 and 3 spkgs fail
on most platforms.  So when this variable is empty or unset, Sage
uses a default of <code class="docutils literal notranslate"><span class="pre">!python2,!python3</span></code>.</p>
</div>
</li>
<li><p><span class="target" id="index-35"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_INSTALL_GCC</span></code> - <strong>Obsolete, do not use, to be removed</strong></p></li>
<li><p><span class="target" id="index-36"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_INSTALL_CCACHE</span></code> - by default Sage doesn’t install ccache,
however by setting <code class="docutils literal notranslate"><span class="pre">SAGE_INSTALL_CCACHE=yes</span></code> Sage will install ccache.
Because the Sage distribution is quite large, the maximum cache is set to 4G.
This can be changed by running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-sh</span> <span class="pre">-c</span> <span class="pre">&quot;ccache</span> <span class="pre">--max-size=SIZE&quot;</span></code>,
where <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> is specified in gigabytes, megabytes, or kilobytes by
appending a “G”, “M”, or “K”.</p>
<p>Sage does not include the sources for ccache since it is an optional package.
Because of this, it is necessary to have an Internet connection while
building ccache for Sage, so that Sage can pull down the necessary
sources.</p>
</li>
<li><p id="sage-debug"><span class="target" id="index-37"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DEBUG</span></code> - controls debugging support.
There are three different possible values:</p>
<ul class="simple">
<li><p>Not set (or set to anything else than “yes” or “no”): build binaries with
debugging symbols, but no special debug builds.
This is the default.
There is no performance impact, only additional disk space is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_DEBUG=no</span></code>: <code class="docutils literal notranslate"><span class="pre">no</span></code> means no debugging symbols (that is, no
<code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">-g</span></code>), which saves some disk space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_DEBUG=yes</span></code>: build debug versions if possible (in particular,
Python is built with additional debugging turned on and Singular is built
with a different memory manager).
These will be notably slower but, for example, make it much easier to
pinpoint memory allocation problems.</p></li>
</ul>
<p>Instead of using <span class="target" id="index-38"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DEBUG</span></code> one can configure with
<code class="docutils literal notranslate"><span class="pre">--enable-debug={no|symbols|yes}</span></code>.</p>
</li>
<li><p><span class="target" id="index-39"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_PROFILE</span></code> - controls profiling support. If this is set
to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, profiling support is enabled where possible. Note that
Python-level profiling is always available; This option enables
profiling in Cython modules.</p></li>
<li><p><span class="target" id="index-40"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SPKG_INSTALL_DOCS</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, then install
package-specific documentation to
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/share/doc/PACKAGE_NAME/</span></code> when an spkg is
installed.
This option may not be supported by all spkgs.
Some spkgs might also assume that certain programs are available on the
system (for example, <code class="docutils literal notranslate"><span class="pre">latex</span></code> or <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>).</p></li>
<li><p><span class="target" id="index-41"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DOC_MATHJAX</span></code> - by default, any LaTeX code in Sage’s
documentation is processed by MathJax.
If this variable is set to <code class="docutils literal notranslate"><span class="pre">no</span></code>, then MathJax is not used – instead,
math is processed using LaTeX and converted by dvipng to image files,
and then those files are included into the documentation.
Typically, building the documentation using LaTeX and dvipng takes longer
and uses more memory and disk space than using MathJax.</p></li>
<li><p><span class="target" id="index-42"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DOCBUILD_OPTS</span></code> - the value of this variable is passed as an
argument to <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">all</span> <span class="pre">html</span></code> or <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">all</span> <span class="pre">pdf</span></code> when
you run <code class="docutils literal notranslate"><span class="pre">make</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code>, or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-pdf</span></code>.
For example, you can add <code class="docutils literal notranslate"><span class="pre">--no-plot</span></code> to this variable to avoid building
the graphics coming from the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">PLOT</span></code> directive within the documentation,
or you can add <code class="docutils literal notranslate"><span class="pre">--include-tests-blocks</span></code> to include all “TESTS” blocks in the
reference manual. Run <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">help</span></code> to see the full list
of options.</p></li>
<li><p><span class="target" id="index-43"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_BUILD_DIR</span></code> - the default behavior is to build each spkg in a
subdirectory of <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build/</span></code>; for
example, build version 3.8.3.p12 of
<code class="file docutils literal notranslate"><span class="pre">atlas</span></code> in the directory
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build/atlas-3.8.3.p12/</span></code>.
If this variable is set, then build in
<code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR/atlas-3.8.3.p12/</span></code> instead.
If the directory <code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR</span></code> does not exist, it is created.
As of this writing (Sage 4.8), when building the standard Sage packages,
1.5 gigabytes of free space are required in this directory (or more if
<code class="docutils literal notranslate"><span class="pre">SAGE_KEEP_BUILT_SPKGS=yes</span></code> – see below); the exact amount of required
space varies from platform to platform.
For example, the block size of the file system will affect the amount of
space used, since some spkgs contain many small files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The variable <span class="target" id="index-44"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_BUILD_DIR</span></code> must be set to the full path name
of either an existing directory for which the user has write permissions,
or to the full path name of a nonexistent directory which the user has
permission to create.
The path name must contain <strong>no spaces</strong>.</p>
</div>
</li>
<li><p><span class="target" id="index-45"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_KEEP_BUILT_SPKGS</span></code> - the default behavior is to delete each
build directory – the appropriate subdirectory of
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build</span></code> or
<code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR</span></code> – after each spkg
is successfully built, and to keep it if there were errors installing the
spkg.
Set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code> to keep the subdirectory regardless.
Furthermore, if you install an spkg for which there is already a
corresponding subdirectory, for example left over from a previous build,
then the default behavior is to delete that old subdirectory.
If this variable is set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, then the old subdirectory is moved to
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build/old/</span></code> (or
<code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR/old</span></code>),
overwriting any already existing file or directory with the same name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After a full build of Sage (as of version 4.8), these subdirectories can
take up to 6 gigabytes of storage, in total, depending on the platform
and the block size of the file system.
If you always set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, it can take even more space:
rebuilding every spkg would use double the amount of space, and any
upgrades to spkgs would create still more directories, using still more
space.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In an existing Sage installation, running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">-s</span> <span class="pre">&lt;package-name&gt;</span></code>
or <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-f</span> <span class="pre">-s</span> <span class="pre">&lt;package-name&gt;</span></code> installs the spkg <code class="docutils literal notranslate"><span class="pre">&lt;package-name&gt;</span></code> and
keeps the corresponding build directory; thus setting
<span class="target" id="index-46"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_KEEP_BUILT_SPKGS</span></code> to <code class="docutils literal notranslate"><span class="pre">yes</span></code> mimics this behavior when
building Sage from scratch or when installing individual spkgs.
So you can set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code> instead of using the <code class="docutils literal notranslate"><span class="pre">-s</span></code> flag
for <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span></code> and <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-f</span></code>.</p>
</div>
</li>
<li><p id="sage-fat-binary"><span class="target" id="index-47"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_FAT_BINARY</span></code> - to build binaries that will run on the
widest range of target CPUs set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code> before
building Sage or configure with <code class="docutils literal notranslate"><span class="pre">--enable-fat-binary</span></code>.
This does not make the binaries relocatable, it only
avoids newer CPU instruction set extensions. For relocatable (=can
be moved to a different directory) binaries, you must use
<a class="reference external" href="https://github.com/sagemath/binary-pkg">https://github.com/sagemath/binary-pkg</a></p>
</li>
<li><p><span class="target" id="index-48"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SUDO</span></code> - set this to <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-E</span></code> or to any other
command prefix that is necessary to write into a installation
hierarchy (<span class="target" id="index-49"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_LOCAL</span></code>) owned by root or another user.
Note that this command needs to preserve environment variable
settings (plain <code class="docutils literal notranslate"><span class="pre">sudo</span></code> does not).</p>
<p>Not all Sage packages currently support <span class="target" id="index-50"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SUDO</span></code>.</p>
<p>Therefore this environment variable is most useful when a system
administrator wishes to install an additional Sage package that
supports <span class="target" id="index-51"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SUDO</span></code>, into a root-owned installation
hierarchy (<span class="target" id="index-52"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_LOCAL</span></code>).</p>
</li>
</ul>
<p>Environment variables dealing with specific Sage packages:</p>
<ul>
<li><p><span class="target" id="index-53"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_MP_LIBRARY</span></code> - to use an alternative library in place of <code class="docutils literal notranslate"><span class="pre">MPIR</span></code>
for multiprecision integer arithmetic. Supported values are</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">MPIR</span></code> (default choice), <code class="docutils literal notranslate"><span class="pre">GMP</span></code>.</p>
</div></blockquote>
</li>
<li><p><span class="target" id="index-54"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ATLAS_ARCH</span></code> - if you are compiling ATLAS (in particular,
if <span class="target" id="index-55"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ATLAS_LIB</span></code> is not set), you can use this environment
variable to set a particular architecture and instruction set extension,
to control the maximum number of threads ATLAS can use, and to trigger the
installation of a static library (which is disabled by default unless
building our custom shared libraries fails).
The syntax is</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">SAGE_ATLAS_ARCH=[threads:n,][static,]arch[,isaext1][,isaext2]...[,isaextN]</span></code>.</p>
</div></blockquote>
<p>While ATLAS comes with precomputed timings for a variety of CPUs, it only
uses them if it finds an exact match.
Otherwise, ATLAS runs through a lengthy automated tuning process in order
to optimize performance for your particular system, which can take several
days on slow and unusual systems.
You drastically reduce the total Sage compile time if you manually select a
suitable architecture.
It is recommended to specify a suitable architecture on laptops or other
systems with CPU throttling or if you want to distribute the binaries.
Available architectures are</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">POWER3</span></code>, <code class="docutils literal notranslate"><span class="pre">POWER4</span></code>, <code class="docutils literal notranslate"><span class="pre">POWER5</span></code>, <code class="docutils literal notranslate"><span class="pre">PPCG4</span></code>, <code class="docutils literal notranslate"><span class="pre">PPCG5</span></code>,
<code class="docutils literal notranslate"><span class="pre">POWER6</span></code>, <code class="docutils literal notranslate"><span class="pre">POWER7</span></code>, <code class="docutils literal notranslate"><span class="pre">IBMz9</span></code>, <code class="docutils literal notranslate"><span class="pre">IBMz10</span></code>, <code class="docutils literal notranslate"><span class="pre">IBMz196</span></code>,
<code class="docutils literal notranslate"><span class="pre">x86x87</span></code>, <code class="docutils literal notranslate"><span class="pre">x86SSE1</span></code>, <code class="docutils literal notranslate"><span class="pre">x86SSE2</span></code>, <code class="docutils literal notranslate"><span class="pre">x86SSE3</span></code>, <code class="docutils literal notranslate"><span class="pre">P5</span></code>,
<code class="docutils literal notranslate"><span class="pre">P5MMX</span></code>, <code class="docutils literal notranslate"><span class="pre">PPRO</span></code>, <code class="docutils literal notranslate"><span class="pre">PII</span></code>, <code class="docutils literal notranslate"><span class="pre">PIII</span></code>, <code class="docutils literal notranslate"><span class="pre">PM</span></code>, <code class="docutils literal notranslate"><span class="pre">CoreSolo</span></code>,
<code class="docutils literal notranslate"><span class="pre">CoreDuo</span></code>, <code class="docutils literal notranslate"><span class="pre">Core2Solo</span></code>, <code class="docutils literal notranslate"><span class="pre">Core2</span></code>, <code class="docutils literal notranslate"><span class="pre">Corei1</span></code>, <code class="docutils literal notranslate"><span class="pre">Corei2</span></code>,
<code class="docutils literal notranslate"><span class="pre">Atom</span></code>, <code class="docutils literal notranslate"><span class="pre">P4</span></code>, <code class="docutils literal notranslate"><span class="pre">P4E</span></code>, <code class="docutils literal notranslate"><span class="pre">Efficeon</span></code>, <code class="docutils literal notranslate"><span class="pre">K7</span></code>, <code class="docutils literal notranslate"><span class="pre">HAMMER</span></code>,
<code class="docutils literal notranslate"><span class="pre">AMD64K10h</span></code>, <code class="docutils literal notranslate"><span class="pre">AMDDOZER</span></code>, <code class="docutils literal notranslate"><span class="pre">UNKNOWNx86</span></code>, <code class="docutils literal notranslate"><span class="pre">IA64Itan</span></code>,
<code class="docutils literal notranslate"><span class="pre">IA64Itan2</span></code>, <code class="docutils literal notranslate"><span class="pre">USI</span></code>, <code class="docutils literal notranslate"><span class="pre">USII</span></code>, <code class="docutils literal notranslate"><span class="pre">USIII</span></code>, <code class="docutils literal notranslate"><span class="pre">USIV</span></code>, <code class="docutils literal notranslate"><span class="pre">UST2</span></code>,
<code class="docutils literal notranslate"><span class="pre">UnknownUS</span></code>, <code class="docutils literal notranslate"><span class="pre">MIPSR1xK</span></code>, <code class="docutils literal notranslate"><span class="pre">MIPSICE9</span></code>, <code class="docutils literal notranslate"><span class="pre">ARMv7</span></code>.</p>
</div></blockquote>
<p>and instruction set extensions are</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code>, <code class="docutils literal notranslate"><span class="pre">AltiVec</span></code>, <code class="docutils literal notranslate"><span class="pre">AVXMAC</span></code>, <code class="docutils literal notranslate"><span class="pre">AVXFMA4</span></code>, <code class="docutils literal notranslate"><span class="pre">AVX</span></code>, <code class="docutils literal notranslate"><span class="pre">SSE3</span></code>,
<code class="docutils literal notranslate"><span class="pre">SSE2</span></code>, <code class="docutils literal notranslate"><span class="pre">SSE1</span></code>, <code class="docutils literal notranslate"><span class="pre">3DNow</span></code>, <code class="docutils literal notranslate"><span class="pre">NEON</span></code>.</p>
</div></blockquote>
<p>In addition, you can also set</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_ATLAS_ARCH=fast</span></code> which picks defaults for a modern (2-3 year old)
CPU of your processor line, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_ATLAS_ARCH=base</span></code> which picks defaults that should work for a ~10
year old CPU.</p></li>
</ul>
<p>For example,</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">SAGE_ATLAS_ARCH=Corei2,AVX,SSE3,SSE2,SSE1</span></code></p>
</div></blockquote>
<p>would be appropriate for a Core i7 CPU.</p>
</li>
<li><p><span class="target" id="index-56"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ATLAS_LIB</span></code> - if you have an installation of ATLAS on your
system and you want Sage to use it instead of building and installing its
own version of ATLAS, set this variable to be the directory containing your
ATLAS installation.
It should contain the files <code class="file docutils literal notranslate"><span class="pre">libatlas</span></code>, <code class="file docutils literal notranslate"><span class="pre">liblapack</span></code>,
<code class="file docutils literal notranslate"><span class="pre">libcblas</span></code>, <code class="file docutils literal notranslate"><span class="pre">libf77blas</span></code> (and optionally <code class="file docutils literal notranslate"><span class="pre">libptcblas</span></code> and
<code class="file docutils literal notranslate"><span class="pre">libptf77blas</span></code> for multi-threaded computations), with extensions <code class="docutils literal notranslate"><span class="pre">.a</span></code>,
<code class="docutils literal notranslate"><span class="pre">.so</span></code>, or <code class="docutils literal notranslate"><span class="pre">.dylib</span></code>.  For backward compatibility, the libraries may also be
in the subdirectory <code class="file docutils literal notranslate"><span class="pre">SAGE_ATLAS_LIB/lib/</span></code>.</p></li>
<li><p><span class="target" id="index-57"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_MATPLOTLIB_GUI</span></code> - if set to anything non-empty except <code class="docutils literal notranslate"><span class="pre">no</span></code>,
then Sage will attempt to build the graphical backend when it builds the
matplotlib package.</p></li>
<li><p><span class="target" id="index-58"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PARI_CONFIGURE</span></code> - use this to pass extra parameters to
PARI’s <code class="docutils literal notranslate"><span class="pre">Configure</span></code> script, for example to specify graphics
support (which is disabled by default). See the file
<code class="file docutils literal notranslate"><span class="pre">build/pkgs/pari/spkg-install</span></code> for more information.</p></li>
<li><p><span class="target" id="index-59"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TUNE_PARI</span></code>: If yes, enable PARI self-tuning. Note that
this can be time-consuming. If you set this variable to “yes”, you
will also see this: <code class="docutils literal notranslate"><span class="pre">WARNING:</span> <span class="pre">Tuning</span> <span class="pre">PARI/GP</span> <span class="pre">is</span> <span class="pre">unreliable.</span> <span class="pre">You</span> <span class="pre">may</span>
<span class="pre">find</span> <span class="pre">your</span> <span class="pre">build</span> <span class="pre">of</span> <span class="pre">PARI</span> <span class="pre">fails,</span> <span class="pre">or</span> <span class="pre">PARI/GP</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">work</span> <span class="pre">properly</span>
<span class="pre">once</span> <span class="pre">built.</span> <span class="pre">We</span> <span class="pre">recommend</span> <span class="pre">to</span> <span class="pre">build</span> <span class="pre">this</span> <span class="pre">package</span> <span class="pre">with</span>
<span class="pre">SAGE_CHECK=&quot;yes&quot;.</span></code></p></li>
<li><p><span class="target" id="index-60"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PARI_MAKEFLAGS</span></code>: The value of this variable is passed as an
argument to the <code class="docutils literal notranslate"><span class="pre">$MAKE</span></code> command when compiling PARI.</p></li>
</ul>
<p>Some standard environment variables which are used by Sage:</p>
<ul class="simple">
<li><p><span class="target" id="index-61"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CC</span></code> - while some programs allow you to use this to specify your C
compiler, <strong>not every Sage package recognizes this</strong>.
If GCC is installed within Sage, <span class="target" id="index-62"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CC</span></code> is ignored and Sage’s <code class="docutils literal notranslate"><span class="pre">gcc</span></code>
is used instead.</p></li>
<li><p><span class="target" id="index-63"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPP</span></code> - similarly, this will set the C preprocessor for some Sage
packages, and similarly, using it is likely quite risky.
If GCC is installed within Sage, <span class="target" id="index-64"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPP</span></code> is ignored and Sage’s <code class="docutils literal notranslate"><span class="pre">cpp</span></code>
is used instead.</p></li>
<li><p><span class="target" id="index-65"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXX</span></code> - similarly, this will set the C++ compiler for some Sage
packages, and similarly, using it is likely quite risky.
If GCC is installed within Sage, <span class="target" id="index-66"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXX</span></code> is ignored and Sage’s <code class="docutils literal notranslate"><span class="pre">g++</span></code>
is used instead.</p></li>
<li><p><span class="target" id="index-67"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FC</span></code> - similarly, this will set the Fortran compiler.
This is supported by all Sage packages which have Fortran code.
However, for historical reasons, the value is hardcoded during the initial
<code class="docutils literal notranslate"><span class="pre">make</span></code> and subsequent changes to <code class="docutils literal notranslate"><span class="pre">$FC</span></code> might be ignored (in which case,
the original value will be used instead).
If GCC is installed within Sage, <span class="target" id="index-68"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FC</span></code> is ignored and Sage’s
<code class="docutils literal notranslate"><span class="pre">gfortran</span></code> is used instead.</p></li>
<li><p><span class="target" id="index-69"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code>, <span class="target" id="index-70"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXXFLAGS</span></code> and <span class="target" id="index-71"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FCFLAGS</span></code> - the flags for
the C compiler, the C++ compiler and the Fortran compiler, respectively.
The same comments apply to these: setting them may cause problems, because
they are not universally respected among the Sage packages. Note
also that <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CFLAGS=&quot;&quot;</span></code> does not have the same effect as
<code class="docutils literal notranslate"><span class="pre">unset</span> <span class="pre">CFLAGS</span></code>. The latter is preferable.</p></li>
<li><p>Similar comments apply to other compiler and linker flags like
<span class="target" id="index-72"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPPFLAGS</span></code>, <span class="target" id="index-73"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code>, <span class="target" id="index-74"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXXFLAG64</span></code>,
<span class="target" id="index-75"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAG64</span></code>, and <span class="target" id="index-76"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LD</span></code>.</p></li>
<li><p><span class="target" id="index-77"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">OPENBLAS_CONFIGURE</span></code> - adds additional configuration flags for
the OpenBLAS package that gets added to the make command. (see <a class="reference external" href="https://trac.sagemath.org/23272">trac ticket #23272</a>)</p></li>
</ul>
<p>Sage uses the following environment variables when it runs:</p>
<ul class="simple">
<li><p><span class="target" id="index-78"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DOT_SAGE</span></code> - this is the directory, to which the user has read and
write access, where Sage stores a number of files.
The default location is <code class="file docutils literal notranslate"><span class="pre">$HOME/.sage/</span></code>.</p></li>
<li><p><span class="target" id="index-79"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_STARTUP_FILE</span></code> - a file including commands to be executed every
time Sage starts.
The default value is <code class="file docutils literal notranslate"><span class="pre">$DOT_SAGE/init.sage</span></code>.</p></li>
<li><p><span class="target" id="index-80"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">BROWSER</span></code> - on most platforms, Sage will detect the command to
run a web browser, but if this doesn’t seem to work on your machine, set this
variable to the appropriate command.</p></li>
</ul>
<p>Variables dealing with doctesting:</p>
<ul class="simple">
<li><p><span class="target" id="index-81"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TIMEOUT</span></code> - used for Sage’s doctesting: the number of seconds
to allow a doctest before timing it out.
If this isn’t set, the default is 300 seconds (5 minutes).</p></li>
<li><p><span class="target" id="index-82"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TIMEOUT_LONG</span></code> - used for Sage’s doctesting: the number of
seconds to allow a doctest before timing it out, if tests are run using
<code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">--long</span></code>.
If this isn’t set, the default is 1800 seconds (30 minutes).</p></li>
<li><p><span class="target" id="index-83"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TEST_GLOBAL_ITER</span></code>, <span class="target" id="index-84"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TEST_ITER</span></code>: these can
be used instead of passing the flags <code class="docutils literal notranslate"><span class="pre">--global-iterations</span></code> and
<code class="docutils literal notranslate"><span class="pre">--file-iterations</span></code>, respectively, to <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-t</span></code>. Indeed, these
variables are only used if the flags are unset. Run <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">-h</span></code>
for more information on the effects of these flags (and therefore
these variables).</p></li>
</ul>
<p>Sage sets some other environment variables. The most accurate way to
see what Sage does is to first run <code class="docutils literal notranslate"><span class="pre">env</span></code> from a shell prompt to see
what environment variables you have set. Then run <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--sh</span> <span class="pre">-c</span>
<span class="pre">env</span></code> to see the list after Sage sets its variables. (This runs a
separate shell, executes the shell command <code class="docutils literal notranslate"><span class="pre">env</span></code>, and then exits
that shell, so after running this, your settings will be restored.)
Alternatively, you can peruse the shell script
<code class="file docutils literal notranslate"><span class="pre">src/bin/sage-env</span></code>.</p>
<p>Sage also has some environment-like settings. Some of these correspond
to actual environment variables while others have names like
environment variables but are only available while Sage is running. To
see a list, execute <code class="docutils literal notranslate"><span class="pre">sage.env.[TAB]</span></code> while running Sage.</p>
</div>
<div class="section" id="installation-in-a-multiuser-environment">
<h2><a class="toc-backref" href="#id11">Installation in a Multiuser Environment</a><a class="headerlink" href="#installation-in-a-multiuser-environment" title="Permalink to this headline">¶</a></h2>
<p>This section addresses the question of how a system administrator can install
a single copy of Sage in a multi-user computer network.</p>
<div class="section" id="system-wide-install">
<h3>System-wide install<a class="headerlink" href="#system-wide-install" title="Permalink to this headline">¶</a></h3>
<p>In the instructions below, we assume that <code class="docutils literal notranslate"><span class="pre">/path/to/sage-x.y</span></code> is
the directory where you want to install Sage.</p>
<ol class="arabic">
<li><p>First of all, extract the Sage source tarball in <code class="docutils literal notranslate"><span class="pre">/path/to</span></code>
(this will create the directory <code class="docutils literal notranslate"><span class="pre">/path/to/sage-x.y</span></code>).
After extracting, you can change the directory name if you do not
like <code class="docutils literal notranslate"><span class="pre">sage-x.y</span></code>.</p></li>
<li><p>Change the ownership of the <code class="docutils literal notranslate"><span class="pre">/path/to/sage-x.y</span></code> directory tree
to your normal user account (as opposed to <code class="docutils literal notranslate"><span class="pre">root</span></code>). This is because
Sage will refuse to compile as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> chown -R user:group /path/to/sage-x.y
</pre></div>
</div>
</li>
<li><p>Using your normal user account, build Sage.
See the <a class="reference internal" href="#build-from-source-step-by-step"><span class="std std-ref">Step-by-step installation procedure</span></a> above.</p></li>
<li><p>Make a symbolic link to the <code class="docutils literal notranslate"><span class="pre">sage</span></code> script in <code class="file docutils literal notranslate"><span class="pre">/usr/local/bin</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ln -s /path/to/sage-x.y/sage /usr/local/bin/sage
</pre></div>
</div>
<p>Alternatively, copy the Sage script:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cp /path/to/sage-x.y/sage /usr/local/bin/sage
</pre></div>
</div>
<p>If you do this, make sure you edit the line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SAGE_ROOT=/path/to/sage-version</span>
</pre></div>
</div>
<p>at the beginning of the copied <code class="docutils literal notranslate"><span class="pre">sage</span></code> script according to the direction
given there to something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SAGE_ROOT</span><span class="o">=</span>&lt;SAGE_ROOT&gt;
</pre></div>
</div>
<p>(note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> above!).
It is recommended not to edit the original <code class="docutils literal notranslate"><span class="pre">sage</span></code> script, only the copy at
<code class="file docutils literal notranslate"><span class="pre">/usr/local/bin/sage</span></code>.</p>
</li>
<li><p>Optionally, you can test Sage by running:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make testlong
</pre></div>
</div>
<p>or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestlong</span></code> which tests files in parallel using multiple
processes.
You can also omit <code class="docutils literal notranslate"><span class="pre">long</span></code> to skip tests which take a long time.</p>
</li>
</ol>
<p><strong>This page was last updated in December 2020 (Sage 9.3).</strong></p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Install from Source Code</a><ul>
<li><a class="reference internal" href="#supported-platforms">Supported platforms</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li><a class="reference internal" href="#general-requirements">General requirements</a><ul>
<li><a class="reference internal" href="#disk-space-and-memory">Disk space and memory</a></li>
<li><a class="reference internal" href="#command-line-tools">Command-line tools</a></li>
<li><a class="reference internal" href="#libraries">Libraries</a><ul>
<li><a class="reference internal" href="#fortran-and-compiler-suites">Fortran and compiler suites</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-for-venv">Python for venv</a></li>
<li><a class="reference internal" href="#other-notes">Other notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-specific-requirements">System-specific requirements</a></li>
<li><a class="reference internal" href="#installing-prerequisites">Installing prerequisites</a><ul>
<li><a class="reference internal" href="#linux-recommended-installation">Linux recommended installation</a></li>
<li><a class="reference internal" href="#macos-prerequisite-installation">macOS prerequisite installation</a></li>
<li><a class="reference internal" href="#macos-recommended-installation">macOS recommended installation</a></li>
<li><a class="reference internal" href="#cygwin-prerequisite-installation">Cygwin prerequisite installation</a></li>
<li><a class="reference internal" href="#ubuntu-on-windows-subsystem-for-linux-wsl-prerequisite-installation">Ubuntu on Windows Subsystem for Linux (WSL) prerequisite installation</a></li>
<li><a class="reference internal" href="#other-platforms">Other platforms</a></li>
<li><a class="reference internal" href="#using-conda-to-provide-system-dependencies">Using conda to provide system dependencies</a></li>
<li><a class="reference internal" href="#using-conda-to-provide-all-spkgs">Using conda to provide all SPKGs</a></li>
<li><a class="reference internal" href="#notes-on-using-conda">Notes on using conda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specific-notes-for-make-and-tar">Specific notes for <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code></a></li>
<li><a class="reference internal" href="#using-alternative-compilers">Using alternative compilers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-software">Additional software</a><ul>
<li><a class="reference internal" href="#recommended-programs">Recommended programs</a></li>
<li><a class="reference internal" href="#notebook-additional-features">Notebook additional features</a></li>
<li><a class="reference internal" href="#tcl-tk">Tcl/Tk</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-by-step-installation-procedure">Step-by-step installation procedure</a><ul>
<li><a class="reference internal" href="#general-procedure">General procedure</a></li>
<li><a class="reference internal" href="#building-the-notebook-with-ssl-support">Building the notebook with SSL support</a></li>
<li><a class="reference internal" href="#rebasing-issues-on-cygwin">Rebasing issues on Cygwin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#make-targets">Make targets</a></li>
<li><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li><a class="reference internal" href="#installation-in-a-multiuser-environment">Installation in a Multiuser Environment</a><ul>
<li><a class="reference internal" href="#system-wide-install">System-wide install</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="conda.html"
                        title="previous chapter">Install from conda-forge</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="launching.html"
                        title="next chapter">Launching SageMath</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/source.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="launching.html" title="Launching SageMath"
             >next</a> |</li>
        <li class="right" >
          <a href="conda.html" title="Install from conda-forge"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Install Guide v9.3</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Install from Source Code</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2021, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>