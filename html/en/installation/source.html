<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Launching SageMath" href="launching.html" /><link rel="prev" title="Install from conda-forge" href="conda.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.06.21"/>
        <title>Install from Source Code - Installation Guide</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZGD13B5572"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ZGD13B5572');
</script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Installation Guide</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 9.7 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Installation Guide</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux package managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="binary.html">Install from Pre-built Binaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Install from conda-forge</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Install from Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="launching.html">Launching SageMath</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubles.html">Troubleshooting</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="install-from-source-code">
<span id="sec-installation-from-sources"></span><h1><a class="toc-backref" href="#id6">Install from Source Code</a><a class="headerlink" href="#install-from-source-code" title="Permalink to this headline">#</a></h1>
<div class="contents this-will-duplicate-information-and-it-is-still-useful-here topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#install-from-source-code" id="id6">Install from Source Code</a></p>
<ul>
<li><p><a class="reference internal" href="#prerequisites" id="id7">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#additional-software" id="id8">Additional software</a></p></li>
<li><p><a class="reference internal" href="#step-by-step-installation-procedure" id="id9">Step-by-step installation procedure</a></p></li>
<li><p><a class="reference internal" href="#make-targets" id="id10">Make targets</a></p></li>
<li><p><a class="reference internal" href="#environment-variables" id="id11">Environment variables</a></p></li>
<li><p><a class="reference internal" href="#installation-in-a-multiuser-environment" id="id12">Installation in a Multiuser Environment</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Some familiarity with the use of the Unix command line may be required to
build Sage from the <a class="reference external" href="https://en.wikipedia.org/wiki/Source_code">source code</a>.</p>
<p>Building Sage from the source code has the major advantage that your install
will be optimized for your particular computer and should therefore offer
better performance and compatibility than a binary install.</p>
<p>Moreover, it offers you full development capabilities:
you can change absolutely any part of Sage or the programs on which it depends,
and recompile the modified parts.</p>
<p>See the file <a class="reference external" href="https://github.com/sagemath/sage/#readme">README.md</a>
in <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> for information on supported platforms and
step-by-step instructions.</p>
<p>The following sections provide some additional details. Most users
will not need to read them.</p>
<section id="prerequisites">
<span id="section-prereqs"></span><h2><a class="toc-backref" href="#id7">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">#</a></h2>
<section id="general-requirements">
<h3>General requirements<a class="headerlink" href="#general-requirements" title="Permalink to this headline">#</a></h3>
<p>This section details the technical prerequisites needed on all platforms. See
also the <a class="reference internal" href="#system-specific-requirements">System-specific requirements</a> below.</p>
<section id="disk-space-and-memory">
<h4>Disk space and memory<a class="headerlink" href="#disk-space-and-memory" title="Permalink to this headline">#</a></h4>
<p>Your computer comes with at least 6 GB of free disk space.
It is recommended to have at least 2 GB of RAM, but you might get away
with less (be sure to have some swap space in this case).</p>
</section>
<section id="command-line-tools">
<h4>Command-line tools<a class="headerlink" href="#command-line-tools" title="Permalink to this headline">#</a></h4>
<p>In addition to standard <a class="reference external" href="https://en.wikipedia.org/wiki/POSIX">POSIX</a> utilities
and the <a class="reference external" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">bash</a> shell,
the following standard command-line development tools must be installed on your
computer:</p>
<ul class="simple">
<li><p>A <strong>C/C++ compiler</strong>: GCC versions 6.3 to 12.x are supported.
Clang (LLVM) is also supported.
See also <a class="reference internal" href="#using-alternative-compilers">Using alternative compilers</a>.</p></li>
<li><p><strong>make</strong>: GNU make, version 3.80 or later. Version 3.82 or later is recommended.</p></li>
<li><p><strong>m4</strong>: GNU m4 1.4.2 or later (non-GNU or older versions might also work).</p></li>
<li><p><strong>perl</strong>: version 5.8.0 or later.</p></li>
<li><p><strong>ar</strong> and <strong>ranlib</strong>: can be obtained as part of GNU binutils.</p></li>
<li><p><strong>tar</strong>: GNU tar version 1.17 or later, or BSD tar.</p></li>
<li><p><strong>python</strong>: Python 3.4 or later, or Python 2.7.
(This range of versions is a minimal requirement for internal purposes of the SageMath
build system, which is referred to as <code class="docutils literal notranslate"><span class="pre">sage-bootstrap-python</span></code>.)</p></li>
</ul>
<p>Other versions of these may work, but they are untested.</p>
<section id="fortran-and-compiler-suites">
<h5>Fortran and compiler suites<a class="headerlink" href="#fortran-and-compiler-suites" title="Permalink to this headline">#</a></h5>
<p>Sage installation also needs a Fortran compiler.  It is determined
automatically whether Sage’s GCC package, or just its part containing
Fortran compiler <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> needs to be installed. This can be
overwritten by running <code class="docutils literal notranslate"><span class="pre">./configure</span></code> with option
<code class="docutils literal notranslate"><span class="pre">--without-system-gcc</span></code>.</p>
<p>Officially we support
gfortran from <a class="reference external" href="https://gcc.gnu.org/">GNU Compiler Collection (GCC)</a>.
If C and C++ compilers also come from there (i.e., gcc and g++), their versions
should match.
Alternatively, one may use C and C++ compilers from
<a class="reference external" href="https://clang.llvm.org/">Clang: a C language family frontend for LLVM</a>,
and thus  matching versions of
clang, clang++ , along with a recent gfortran. (Flang (or other LLVM-based
Fortran compilers) are not officially supported, however it is possible to
to build Sage using flang, with some extra efforts needed to set various flags;
this is work in progress at the moment (May 2019)).</p>
<p>Therefore, if you plan on using your own GCC compilers, then make sure that
their versions match.</p>
<p>To force using specific compilers, set environment variables <code class="docutils literal notranslate"><span class="pre">CC</span></code>,
<code class="docutils literal notranslate"><span class="pre">CXX</span></code>, and <code class="docutils literal notranslate"><span class="pre">FC</span></code> (for C, C++, and Fortran compilers, respectively)
to the desired values, and run <code class="docutils literal notranslate"><span class="pre">./configure</span></code>. For example,
<code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">CC=clang</span> <span class="pre">CXX=clang++</span> <span class="pre">FC=gfortran</span></code> will configure Sage
to be built with Clang C/C++ compilers and Fortran compiler
<code class="docutils literal notranslate"><span class="pre">gfortran</span></code>.</p>
<p>Alternatively, Sage includes a GCC package, so that C, C++ and Fortran
compilers will be built when the build system detects that it is needed,
e.g., non-GCC compilers, or
versions of the GCC compilers known to miscompile some components of Sage,
or simply a missing Fortran compiler.
In any case, you always need at least a C/C++ compiler to build the GCC
package and its prerequisites before the compilers it provides can be used.</p>
<p>Note that you can always override this behavior through the configure
options <code class="docutils literal notranslate"><span class="pre">--without-system-gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-system-gcc</span></code>, see
<a class="reference internal" href="#section-compilers"><span class="std std-ref">Using alternative compilers</span></a>.</p>
<p>There are some known problems with old assemblers, in particular when
building the <code class="docutils literal notranslate"><span class="pre">ecm</span></code> and <code class="docutils literal notranslate"><span class="pre">fflas_ffpack</span></code> packages. You should ensure
that your assembler understands all instructions for your
processor. On Linux, this means you need a recent version of
<code class="docutils literal notranslate"><span class="pre">binutils</span></code>; on macOS you need a recent version of Xcode.</p>
</section>
</section>
<section id="python-for-venv">
<h4>Python for venv<a class="headerlink" href="#python-for-venv" title="Permalink to this headline">#</a></h4>
<p>By default, Sage will try to use system’s <code class="docutils literal notranslate"><span class="pre">python3</span></code> to set up a virtual
environment, a.k.a. <a class="reference external" href="https://docs.python.org/3.10/library/venv.html">venv</a>
rather than building a Python 3 installation from scratch.
Use the <code class="docutils literal notranslate"><span class="pre">configure</span></code> option <code class="docutils literal notranslate"><span class="pre">--without-system-python3</span></code> in case you want Python 3
built from scratch.</p>
<p>Sage will accept versions 3.8.x to 3.10.x.</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">--with-python=/path/to/python3_binary</span></code> to tell Sage to use
<code class="docutils literal notranslate"><span class="pre">/path/to/python3_binary</span></code> to set up the venv. Note that setting up venv requires
a number of Python modules to be available within the Python in question. Currently,
for Sage 9.6, these modules are as follows: <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code>, <code class="docutils literal notranslate"><span class="pre">ctypes</span></code>, <code class="docutils literal notranslate"><span class="pre">math</span></code>,
<code class="docutils literal notranslate"><span class="pre">hashlib</span></code>, <code class="docutils literal notranslate"><span class="pre">crypt</span></code>, <code class="docutils literal notranslate"><span class="pre">socket</span></code>, <code class="docutils literal notranslate"><span class="pre">zlib</span></code>, <code class="docutils literal notranslate"><span class="pre">distutils.core</span></code>, <code class="docutils literal notranslate"><span class="pre">ssl</span></code> -
they will be checked for by the <code class="docutils literal notranslate"><span class="pre">configure</span></code> script.</p>
</section>
<section id="other-notes">
<h4>Other notes<a class="headerlink" href="#other-notes" title="Permalink to this headline">#</a></h4>
<p>After extracting the Sage source tarball, the subdirectory <code class="file docutils literal notranslate"><span class="pre">upstream</span></code>
contains the source distributions for everything on which Sage depends.</p>
<p>If cloned from a git repository, the upstream tarballs will be downloaded,
verified, and cached as part of the Sage installation process.
We emphasize that all of this software is included with Sage, so you do not
have to worry about trying to download and install any one of these packages
(such as Python, for example) yourself.</p>
<p>When the Sage installation program is run,
it will check that you have each of the above-listed prerequisites,
and inform you of any that are missing, or have unsuitable versions.</p>
</section>
</section>
<section id="system-specific-requirements">
<h3>System-specific requirements<a class="headerlink" href="#system-specific-requirements" title="Permalink to this headline">#</a></h3>
<p>On macOS, there are various developer tools needed which may require
some registration on Apple’s developer site; see
<a class="reference internal" href="#section-macprereqs"><span class="std std-ref">macOS prerequisite installation</span></a>.</p>
<p>On Redhat-derived systems not all perl components are installed by
default and you might have to install the <code class="docutils literal notranslate"><span class="pre">perl-ExtUtils-MakeMaker</span></code>
package.</p>
<p>On Linux systems (e.g., Ubuntu, Redhat, etc), <code class="docutils literal notranslate"><span class="pre">ar</span></code> and <code class="docutils literal notranslate"><span class="pre">ranlib</span></code> are in the
<a class="reference external" href="https://www.gnu.org/software/binutils/">binutils</a> package.
The other programs are usually located in packages with their respective names.
Assuming you have sufficient privileges, you can install the <code class="docutils literal notranslate"><span class="pre">binutils</span></code> and
other necessary/standard components. The lists provided below are longer than
the minimal prerequisites, which are basically <code class="docutils literal notranslate"><span class="pre">binutils</span></code>, <code class="docutils literal notranslate"><span class="pre">gcc</span></code>/<code class="docutils literal notranslate"><span class="pre">clang</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span></code>,
<code class="docutils literal notranslate"><span class="pre">tar</span></code>, but there is no real need to build compilers and other standard tools
and libraries on a modern Linux system, in order to be able to build Sage.
If you do not have the privileges to do this, ask your system administrator to
do this, or build the components from source code.
The method of installing additional software varies from distribution to
distribution, but on a <a class="reference external" href="https://www.debian.org/">Debian</a> based system (e.g.
<a class="reference external" href="https://www.ubuntu.com/">Ubuntu</a> or <a class="reference external" href="https://www.linuxmint.com/">Mint</a>),
you would use
<a class="reference external" href="https://en.wikipedia.org/wiki/Advanced_Packaging_Tool">apt-get</a>.</p>
</section>
<section id="installing-prerequisites">
<h3>Installing prerequisites<a class="headerlink" href="#installing-prerequisites" title="Permalink to this headline">#</a></h3>
<p>To check if you have the above prerequisites installed, for example <code class="docutils literal notranslate"><span class="pre">perl</span></code>,
type:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">command</span> -v perl
</pre></div>
</div>
<p>or:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>which perl
</pre></div>
</div>
<p>on the command line. If it gives an error (or returns nothing), then
either <code class="docutils literal notranslate"><span class="pre">perl</span></code> is not installed, or it is installed but not in your
<a class="reference external" href="https://en.wikipedia.org/wiki/PATH_%28variable%29">PATH</a>.</p>
<section id="debian-ubuntu-prerequisite-installation">
<span id="sec-installation-from-sources-linux-recommended-installation"></span><h4>Debian/Ubuntu prerequisite installation<a class="headerlink" href="#debian-ubuntu-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<p>On Debian (“buster” or newer) or Ubuntu (“bionic” or newer):</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo apt-get install  bc binutils bzip2 ca-certificates cliquer cmake curl ecl eclib-tools fflas-ffpack flintqs g++ gcc gengetopt gfan gfortran glpk-utils gmp-ecm lcalc libatomic-ops-dev libboost-dev libbraiding-dev libbrial-dev libbrial-groebner-dev libbz2-dev libcdd-dev libcdd-tools libcliquer-dev libcurl4-openssl-dev libec-dev libecm-dev libffi-dev libflint-arb-dev libflint-dev libfplll-dev libfreetype6-dev libgc-dev libgd-dev libgf2x-dev libgiac-dev libgivaro-dev libglpk-dev libgmp-dev libgsl-dev libhomfly-dev libiml-dev liblfunction-dev liblinbox-dev liblrcalc-dev liblzma-dev libm4ri-dev libm4rie-dev libmpc-dev libmpfi-dev libmpfr-dev libncurses5-dev libntl-dev libopenblas-dev libpari-dev libpcre3-dev libplanarity-dev libppl-dev libprimesieve-dev libpython3-dev libqhull-dev libreadline-dev librw-dev libsingular4-dev libsqlite3-dev libssl-dev libsuitesparse-dev libsymmetrica2-dev libz-dev libzmq3-dev libzn-poly-dev m4 make nauty ninja-build openssl palp pari-doc pari-elldata pari-galdata pari-galpol pari-gp2c pari-seadata patch perl pkg-config planarity ppl-dev python3 python3-distutils python3-venv r-base-dev r-cran-lattice singular singular-doc sqlite3 sympow tachyon tar tox xcas xz-utils
</pre></div>
</div>
<p>If you wish to do Sage development, additionally install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo apt-get install  autoconf automake git gpgconf libtool openssh openssh-client pkg-config
</pre></div>
</div>
<p>For all users, we recommend the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo apt-get install  default-jdk dvipng ffmpeg imagemagick latexmk libavdevice-dev pandoc tex-gyre texlive-fonts-recommended texlive-lang-cyrillic texlive-lang-english texlive-lang-european texlive-lang-french texlive-lang-german texlive-lang-italian texlive-lang-japanese texlive-lang-polish texlive-lang-portuguese texlive-lang-spanish texlive-latex-extra texlive-xetex
</pre></div>
</div>
<p>In addition to these, if you don’t want Sage to build optional packages that might
be available from your OS, cf. the growing list of such packages on <a class="reference external" href="https://trac.sagemath.org/27330">trac ticket #27330</a>,
install:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo apt-get install  4ti2 clang coinor-cbc coinor-libcbc-dev graphviz libfile-slurp-perl libgraphviz-dev libigraph-dev libisl-dev libjson-perl libmongodb-perl libnauty-dev libperl-dev libpolymake-dev libsvg-perl libterm-readkey-perl libterm-readline-gnu-perl libxml-libxslt-perl libxml-writer-perl libxml2-dev lrslib pari-gp2c pdf2svg polymake texinfo
</pre></div>
</div>
</section>
<section id="fedora-redhat-centos-prerequisite-installation">
<h4>Fedora/Redhat/CentOS prerequisite installation<a class="headerlink" href="#fedora-redhat-centos-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo yum install  --setopt<span class="o">=</span><span class="nv">tsflags</span><span class="o">=</span> L-function L-function-devel R R-devel Singular Singular-devel arb arb-devel binutils boost-devel brial brial-devel bzip2 bzip2-devel cddlib cliquer cliquer-devel cmake curl diffutils ecl eclib eclib-devel fflas-ffpack-devel findutils flint flint-devel gc gc-devel gcc gcc-c++ gcc-gfortran gd gd-devel gengetopt gf2x gf2x-devel gfan giac giac-devel givaro givaro-devel glpk glpk-devel glpk-utils gmp gmp-devel gmp-ecm gmp-ecm-devel gsl gsl-devel iml iml-devel libatomic_ops libatomic_ops-devel libbraiding libcurl-devel libffi libffi-devel libfplll libfplll-devel libhomfly-devel libmpc libmpc-devel linbox lrcalc-devel m4 m4ri-devel m4rie-devel make mpfr-devel nauty ncurses-devel ninja-build ntl-devel openblas-devel openssl openssl-devel palp pari-devel pari-elldata pari-galdata pari-galpol pari-gp pari-seadata patch pcre pcre-devel perl perl-ExtUtils-MakeMaker perl-IPC-Cmd pkg-config planarity planarity-devel ppl ppl-devel primecount primecount-devel primesieve primesieve-devel python3 python3-devel qhull qhull-devel readline-devel rw-devel sqlite sqlite-devel suitesparse suitesparse-devel symmetrica-devel sympow tachyon tachyon-devel tar tox which xz xz-devel zeromq zeromq-devel zlib-devel zn_poly zn_poly-devel
</pre></div>
</div>
<p>If you wish to do Sage development, additionally install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo yum install  autoconf automake git gnupg2 libtool openssh pkg-config
</pre></div>
</div>
<p>For all users, we recommend the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo yum install  ImageMagick latexmk pandoc texlive texlive-collection-langcyrillic texlive-collection-langeuropean texlive-collection-langfrench texlive-collection-langgerman texlive-collection-langitalian texlive-collection-langjapanese texlive-collection-langpolish texlive-collection-langportuguese texlive-collection-langspanish texlive-collection-latexextra
</pre></div>
</div>
<p>In addition to these, if you don’t want Sage to build optional packages that might
be available from your OS, cf. the growing list of such packages on <a class="reference external" href="https://trac.sagemath.org/27330">trac ticket #27330</a>,
install:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo yum install  4ti2 clang coin-or-Cbc coin-or-Cbc-devel coxeter coxeter-devel coxeter-tools graphviz igraph igraph-devel isl-devel libnauty-devel libxml2-devel lrslib pari-galpol pari-seadata pdf2svg perl-ExtUtils-Embed perl-File-Slurp perl-JSON perl-MongoDB perl-Term-ReadLine-Gnu perl-TermReadKey perl-XML-LibXML perl-XML-LibXSLT perl-XML-Writer polymake texinfo
</pre></div>
</div>
</section>
<section id="arch-linux-prerequisite-installation">
<h4>Arch Linux prerequisite installation<a class="headerlink" href="#arch-linux-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo pacman -S  arb bc binutils boost brial cblas cddlib cmake ecl eclib fflas-ffpack flintqs gc gcc gcc-fortran gd gf2x gfan giac glpk gsl iml lapack lcalc libatomic_ops libbraiding libgiac libhomfly linbox lrcalc m4 m4ri m4rie make nauty ninja openblas openssl palp pari pari-elldata pari-galdata pari-galpol pari-seadata patch perl planarity ppl primecount primesieve python python-tox qhull r rankwidth readline singular sqlite3 suitesparse symmetrica sympow tachyon tar which zn_poly
</pre></div>
</div>
<p>If you wish to do Sage development, additionally install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo pacman -S  autoconf automake gnupg libtool openssh pkg-config
</pre></div>
</div>
<p>For all users, we recommend the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo pacman -S  ffmpeg imagemagick pandoc texlive-core texlive-langcyrillic texlive-langjapanese texlive-latexextra
</pre></div>
</div>
<p>In addition to these, if you don’t want Sage to build optional packages that might
be available from your OS, cf. the growing list of such packages on <a class="reference external" href="https://trac.sagemath.org/27330">trac ticket #27330</a>,
install:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo pacman -S  4ti2 clang coin-or-cbc coxeter graphviz igraph libxml2 lrs pari-elldata pari-galpol pari-seadata pdf2svg perl-term-readline-gnu polymake
</pre></div>
</div>
</section>
<section id="opensuse-prerequisite-installation">
<h4>OpenSUSE prerequisite installation<a class="headerlink" href="#opensuse-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo zypper install R-base arb-devel bc binutils boost-devel brial-devel bzip2 ca-certificates cddlib-tools cliquer cliquer-devel cmake curl diffutils edge-addition-planarity-suite edge-addition-planarity-suite-devel findutils flint-devel fplll fplll-devel gcc gcc-c++ gcc-fortran gd gfan giac-devel glibc-locale-base glpk glpk-devel gmp-devel gzip iml-devel libbraiding-devel libhomfly-devel libopenssl-3-devel libprimecount-devel m4 make mpc-devel mpfi-devel nauty nauty-devel ninja ntl-devel openblas-devel pari-devel pari-galdata pari-gp patch perl pkgconf pkgconfig<span class="o">(</span>atomic_ops<span class="o">)</span> pkgconfig<span class="o">(</span>bdw-gc<span class="o">)</span> pkgconfig<span class="o">(</span>bzip2<span class="o">)</span> pkgconfig<span class="o">(</span>cddlib<span class="o">)</span> pkgconfig<span class="o">(</span>fflas-ffpack<span class="o">)</span> pkgconfig<span class="o">(</span>fplll<span class="o">)</span> pkgconfig<span class="o">(</span>freetype2<span class="o">)</span> pkgconfig<span class="o">(</span>gdlib<span class="o">)</span> pkgconfig<span class="o">(</span>gf2x<span class="o">)</span> pkgconfig<span class="o">(</span>givaro<span class="o">)</span> pkgconfig<span class="o">(</span>gsl<span class="o">)</span> pkgconfig<span class="o">(</span>libcurl<span class="o">)</span> pkgconfig<span class="o">(</span>libffi<span class="o">)</span> pkgconfig<span class="o">(</span>liblzma<span class="o">)</span> pkgconfig<span class="o">(</span>libpcre<span class="o">)</span> pkgconfig<span class="o">(</span>libpcrecpp<span class="o">)</span> pkgconfig<span class="o">(</span>libpcreposix<span class="o">)</span> pkgconfig<span class="o">(</span>libpng16<span class="o">)</span> pkgconfig<span class="o">(</span>libzmq<span class="o">)</span> pkgconfig<span class="o">(</span>linbox<span class="o">)</span> pkgconfig<span class="o">(</span>m4ri<span class="o">)</span> pkgconfig<span class="o">(</span>m4rie<span class="o">)</span> pkgconfig<span class="o">(</span>mpfr<span class="o">)</span> pkgconfig<span class="o">(</span>ncurses<span class="o">)</span> pkgconfig<span class="o">(</span>ncursesw<span class="o">)</span> pkgconfig<span class="o">(</span>readline<span class="o">)</span> pkgconfig<span class="o">(</span>sqlite3<span class="o">)</span> pkgconfig<span class="o">(</span>zlib<span class="o">)</span> ppl-devel primecount primesieve python3 python3-devel qhull-devel readline-devel suitesparse-devel sympow tachyon tar which xz zn_poly-devel
</pre></div>
</div>
<p>If you wish to do Sage development, additionally install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo zypper install autoconf automake git gpg2 libtool openssh pkgconfig
</pre></div>
</div>
<p>For all users, we recommend the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo zypper install ImageMagick ffmpeg pandoc texlive
</pre></div>
</div>
<p>In addition to these, if you don’t want Sage to build optional packages that might
be available from your OS, cf. the growing list of such packages on <a class="reference external" href="https://trac.sagemath.org/27330">trac ticket #27330</a>,
install:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>sudo zypper install 4ti2 4ti2-devel coxeter gp2c graphviz libxml2 llvm lrslib lrslib-devel pari-elldata pari-galpol pari-nftables pari-seadata pdf2svg perl<span class="o">(</span>Term::ReadLine::Gnu<span class="o">)</span> pkgconfig<span class="o">(</span>isl<span class="o">)</span> pkgconfig<span class="o">(</span>libsemigroups<span class="o">)</span> polymake texinfo
</pre></div>
</div>
</section>
<section id="macos-prerequisite-installation">
<span id="section-macprereqs"></span><h4>macOS prerequisite installation<a class="headerlink" href="#macos-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<p>On macOS systems, you need a recent version of
<a class="reference external" href="https://developer.apple.com/downloads/index.action?=command%20line%20tools">Command Line Tools</a>.
It provides all the above requirements.</p>
<p>Run the command <code class="docutils literal notranslate"><span class="pre">xcode-select</span> <span class="pre">--install</span></code> from a Terminal window and click “Install”
in the pop-up dialog box.</p>
<p>If you have already installed <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a>
(which at the time of writing is freely available in the Mac App Store,
or through <a class="reference external" href="https://developer.apple.com/downloads/">https://developer.apple.com/downloads/</a> provided you registered for an
Apple Developer account), you can install the command line tools from
there as well.</p>
<p>If you have not installed <a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a>
you can get these tools as a relatively small download, but it does require
a registration.</p>
<ul class="simple">
<li><p>First, you will need to register as an Apple Developer at
<a class="reference external" href="https://developer.apple.com/register/">https://developer.apple.com/register/</a>.</p></li>
<li><p>Having done so, you should be able to download it for free at
<a class="reference external" href="https://developer.apple.com/downloads/index.action?=command%20line%20tools">https://developer.apple.com/downloads/index.action?=command%20line%20tools</a></p></li>
<li><p>Alternately, <a class="reference external" href="https://developer.apple.com/opensource/">https://developer.apple.com/opensource/</a> should have a link
to Command Line Tools.</p></li>
</ul>
</section>
<section id="macos-recommended-installation">
<h4>macOS recommended installation<a class="headerlink" href="#macos-recommended-installation" title="Permalink to this headline">#</a></h4>
<p>Although Sage can in theory build its own version of gfortran, this
can take a while, and the process fails on some recent versions of
OS X. So instead you can install your own copy. One advantage of this
is that you can install it once, and it will get used every time you
build Sage, rather than building gfortran every time.</p>
<p>One way to do that is with the <a class="reference external" href="https://brew.sh">Homebrew package manager</a>. Install Homebrew as their web page describes, and
then the command</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>brew install gcc
</pre></div>
</div>
<p>will install Homebrew’s gcc package, which includes gfortran. Sage
will also use other Homebrew packages, if they are present. You can
install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>brew install arb bdw-gc boost bzip2 cmake curl ecl flint fplll freetype gcc gd gengetopt gfortran glpk gmp gpatch gsl libatomic_ops libffi libiconv libmpc libpng mpfi mpfr nauty ncurses ninja ntl openblas openssl pari pari-elldata pari-galdata pari-galpol pari-seadata pcre pkg-config ppl primesieve python3 qhull r readline singular sqlite suite-sparse tox xz zeromq zlib
</pre></div>
</div>
<p>Some Homebrew packages are installed “keg-only,” meaning that they are
not available in standard paths. To make them accessible when building
Sage, run</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">source</span> SAGE_ROOT/.homebrew-build-env
</pre></div>
</div>
<p>(replacing <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> by Sage’s home directory). You can add a
command like this to your shell profile if you want the settings to
persist between shell sessions.</p>
<p>If you wish to do Sage development, additionally install the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>brew install autoconf automake git gnupg libtool pkg-config
</pre></div>
</div>
<p>For all users, we recommend the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>brew install ffmpeg imagemagick pandoc texinfo
</pre></div>
</div>
<p>Some additional optional packages are taken care of by:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>brew install apaffenholz/polymake/polymake cbc graphviz igraph isl libxml2 llvm nauty pdf2svg texinfo
</pre></div>
</div>
</section>
<section id="ubuntu-on-windows-subsystem-for-linux-wsl-prerequisite-installation">
<h4>Ubuntu on Windows Subsystem for Linux (WSL) prerequisite installation<a class="headerlink" href="#ubuntu-on-windows-subsystem-for-linux-wsl-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<p>Sage can be installed onto Linux running on Windows Subsystem for Linux (WSL). These instructions describe a fresh install of Ubuntu 20.10, but other distributions or installation methods should work too, though have not been tested.</p>
<ul>
<li><p>Enable hardware-assisted virtualization in the EFI or BIOS of your system. Refer to your system (or motherboard) maker’s documentation for instructions on how to do this.</p></li>
<li><p>Set up WSL by following the <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">official WSL setup guide</a>. Be sure to do the steps to install WSL2 and set it as default.</p></li>
<li><p>Go to the Microsoft Store and install Ubuntu.</p></li>
<li><p>Start Ubuntu from the start menu. Update all packages to the latest version.</p></li>
<li><p>Reboot the all running WSL instances one of the following ways:</p>
<ul>
<li><p>Open Windows Services and restart the LxssManager service.</p></li>
<li><p>Open the Command Prompt or Powershell and enter this command:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">wsl --shutdown</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><a class="reference external" href="https://linuxconfig.org/how-to-upgrade-ubuntu-to-20-10">Upgrade to the Ubuntu 20.10</a>. This step will not be necessary once Ubuntu 20.10 is available in the Microsoft Store.</p></li>
</ul>
<p>From this point on, follow the instructions in the <a class="reference internal" href="#sec-installation-from-sources-linux-recommended-installation"><span class="std std-ref">Debian/Ubuntu prerequisite installation</span></a> section.
It is strongly recommended to put the Sage source files in the Linux file system, for example, in the <code class="docutils literal notranslate"><span class="pre">/home/username/sage</span></code> directory, and not in the Windows file system (e.g. <code class="docutils literal notranslate"><span class="pre">/mnt/c/...</span></code>).</p>
<p>You may encounter permission errors of the kind <code class="docutils literal notranslate"><span class="pre">&quot;[Errno</span> <span class="pre">13]</span> <span class="pre">Permission</span> <span class="pre">denied:</span> <span class="pre">'build/bdist.linux-x86_64/wheel/&lt;package&gt;.dist-info'&quot;</span></code> during <code class="docutils literal notranslate"><span class="pre">make</span></code>.
This usually comes from a permission conflict between the Windows and Linux file system.
To fix it create a temporary build folder in the Linux file system using <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">~/tmp/sage</span></code> and use it for building by <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">SAGE_BUILD_DIR=&quot;~/tmp/sage&quot;</span> <span class="pre">make</span></code>.
Also see the <a class="reference external" href="https://github.com/pypa/packaging-problems/issues/258">related Github issue</a> for other workarounds.</p>
<p>When the installation is complete, you may be interested in <a class="reference internal" href="launching.html#sec-launching-wsl-post-installation"><span class="std std-ref">WSL Post-installation steps</span></a>.</p>
</section>
<section id="cygwin-prerequisite-installation">
<span id="section-cygwinprereqs"></span><h4>Cygwin prerequisite installation<a class="headerlink" href="#cygwin-prerequisite-installation" title="Permalink to this headline">#</a></h4>
<p>Previous versions of Sage targeted the Windows platform using <a class="reference external" href="https://cygwin.com/">Cygwin</a>.</p>
<p>As of Sage 9.7, we no longer recommend attempting to build Sage on
Cygwin and instead suggest that users on Windows 10 and 11 switch to
installing Sage using Windows Subsystem for Linux (WSL), which gives a
better performance and user/developer experience than Cygwin.</p>
<p>Users on hardware configurations that do not support running WSL, as
well as users on legacy versions of Windows such as Windows 8 may find
it necessary to build Sage on Cygwin.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of Sage 9.7, <a class="reference external" href="https://trac.sagemath.org/query?status=closed&amp;status=needs_info&amp;status=needs_review&amp;status=needs_work&amp;status=new&amp;status=positive_review&amp;component=porting%3A+Cygwin&amp;milestone=sage-9.8&amp;milestone=sage-9.7&amp;milestone=sage-9.6&amp;milestone=sage-9.5&amp;milestone=sage-9.4&amp;milestone=sage-9.3&amp;milestone=sage-9.2&amp;milestone=sage-9.1&amp;col=id&amp;col=summary&amp;col=milestone&amp;col=status&amp;col=priority&amp;col=changetime&amp;col=author&amp;col=reviewer&amp;desc=1&amp;order=changetime">known issues with several packages</a>
will prevent a successful installation. Users need to be prepared
to contribute to Sage by fixing these issues.</p>
</div>
<p>Use the following instructions to get started.</p>
<ol class="arabic">
<li><p>Download <a class="reference external" href="https://cygwin.com/install.html">the 64-bit version of Cygwin</a>
(do not get the 32-bit version; it is not supported by Sage).</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">setup-x86_64.exe</span></code> graphical installer.  Pick the default
options in most cases.  At the package selection screen, use the
search bar to find and select at least the following packages:
<code class="docutils literal notranslate"><span class="pre">bzip2</span></code>, <code class="docutils literal notranslate"><span class="pre">coreutils</span></code>, <code class="docutils literal notranslate"><span class="pre">curl</span></code>, <code class="docutils literal notranslate"><span class="pre">gawk</span></code>, <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">tar</span></code>, <code class="docutils literal notranslate"><span class="pre">wget</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span></code>.</p></li>
<li><p>Start the Cygwin terminal and ensure you get a working bash prompt.</p></li>
<li><p>Make sure the path of your Cygwin home directory does not contain
space characters. Also avoid building in home directories of Windows domain
users or in paths with capital letters.</p>
<p>By default, your username in Cygwin is the same as your username in
Windows.  This might contain spaces and other traditionally
non-UNIX-friendly characters, e.g., if it is your full name.  You
can check this as follows:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>whoami
<span class="go">Erik M. Bray</span>
</pre></div>
</div>
<p>This means your default home directory on Cygwin contains this
username verbatim; in the above example, <code class="docutils literal notranslate"><span class="pre">/home/Erik</span> <span class="pre">M.</span> <span class="pre">Bray</span></code>.
It will save some potential trouble if you change your Cygwin home
directory to contain only alphanumeric characters, for example,
<code class="docutils literal notranslate"><span class="pre">/home/embray</span></code>.  The easiest way to do this is to first create
the home directory you want to use instead, then create an
<code class="docutils literal notranslate"><span class="pre">/etc/passwd</span></code> file specifying that directory as your home, as follows:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">whocanibe</span><span class="o">=</span>embray
<span class="gp">$ </span>mkdir /home/<span class="nv">$whocanibe</span>
<span class="gp">$ </span>mkpasswd.exe -l -u <span class="s2">&quot;</span><span class="k">$(</span>whoami<span class="k">)</span><span class="s2">&quot;</span> <span class="p">|</span> sed -r <span class="s1">&#39;s,/home/[^:]+,/home/&#39;</span><span class="nv">$whocanibe</span>, &gt; /etc/passwd
</pre></div>
</div>
<p>After this, close all Cygwin terminals (ensure nothing in
<code class="docutils literal notranslate"><span class="pre">C:\cygwin64</span></code> is running), then start a new Cygwin terminal and
your home directory should have moved.</p>
<p>There are <a class="reference external" href="https://stackoverflow.com/questions/1494658/how-can-i-change-my-cygwin-home-folder-after-installation">other ways to do
this</a>,
but the above seems to be the simplest that’s still supported.</p>
</li>
<li><p>(Optional) Although it is possible to install Sage’s dependencies using the
Cygwin graphical installer, it is recommended to install the
<a class="reference external" href="https://github.com/transcode-open/apt-cyg">apt-cyg</a>
command-line package installer, which is used for the remainder of
these instructions.  To install <code class="docutils literal notranslate"><span class="pre">apt-cyg</span></code>, run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl -OL https://rawgit.com/transcode-open/apt-cyg/master/apt-cyg
<span class="gp">$ </span>install apt-cyg /usr/local/bin
<span class="gp">$ </span>rm -f apt-cyg
</pre></div>
</div>
</li>
<li><p>Then, to install the current set of system packages known to work for building
Sage, run the following command (or use the graphical installer to
select and install these packages):</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>apt-cyg install R binutils bzip2 cddlib-devel cddlib-tools cmake curl findutils gcc-core gcc-fortran gcc-g++ gengetopt glpk libatomic_ops-devel libboost-devel libbz2-devel libcrypt-devel libcurl-devel libffi-devel libflint-devel libfreetype-devel libgc-devel libgd-devel libglpk-devel libgmp-devel libgsl-devel libiconv-devel liblapack-devel liblzma-devel libmpc-devel libmpfr-devel libncurses-devel libntl-devel libopenblas libpcre-devel libreadline-devel libsqlite3-devel libssl-devel libsuitesparseconfig-devel libtirpc-devel libzmq-devel m4 make ninja patch perl perl-ExtUtils-MakeMaker python-pip-wheel python-setuptools-wheel python39 python39-devel python39-urllib3 qhull singular singular-devel sqlite3 tar which xz zlib-devel
</pre></div>
</div>
<p>Optional packages that are also known to be installable via system packages
include:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">  $ </span>apt-cyg install clang graphviz info lib4ti2-devel lib4ti2_0 libisl-devel libxml2-devel perl-Term-ReadLine-Gnu
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Cygwin, at any point in time after building/installing software,
it may be required to  “rebase” <code class="docutils literal notranslate"><span class="pre">dll</span></code> files.
Sage provides some scripts, located in <code class="file docutils literal notranslate"><span class="pre">$SAGE_LOCAL/bin</span></code>, to do so:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code>, a shell script which calls Cygwin’s
<code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> program.  It must be run within a <code class="docutils literal notranslate"><span class="pre">dash</span></code> shell
from the <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> directory after all other Cygwin
processes have been shut down and needs write-access to the
system-wide rebase database located at
<code class="file docutils literal notranslate"><span class="pre">/etc/rebase.db.i386</span></code>, which usually means administrator
privileges.  It updates the system-wide database and adds Sage
dlls to it, so that subsequent calls to <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> will take
them into account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sage-rebase.sh</span></code>, a shell script which calls Cygwin’s <code class="docutils literal notranslate"><span class="pre">rebase</span></code> program
together with the <code class="docutils literal notranslate"><span class="pre">-O/--oblivious</span></code> option.
It must be run within a shell from <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> directory.
Contrary to the <code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code> script, it neither updates the
system-wide database, nor adds Sage dlls to it.
Therefore, subsequent calls to <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> will not take them into account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sage-rebaseall.bat</span></code> (respectively <code class="docutils literal notranslate"><span class="pre">sage-rebase.bat</span></code>), an MS-DOS batch
file which calls the <code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code> (respectively <code class="docutils literal notranslate"><span class="pre">sage-rebase.sh</span></code>)
script.
It must be run from a Windows command prompt, after adjusting
<span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> to the Windows location of Sage’s home directory, and, if
Cygwin is installed in a non-standard location, adjusting
<span class="target" id="index-3"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CYGWIN_ROOT</span></code> as well.</p></li>
</ul>
<p>Some systems may encounter this problem frequently enough to make building or
testing difficult.
If executing the above scripts or directly calling <code class="docutils literal notranslate"><span class="pre">rebaseall</span></code> does not solve
rebasing issues, deleting the system-wide database and then regenerating it
from scratch, e.g., by executing <code class="docutils literal notranslate"><span class="pre">sage-rebaseall.sh</span></code>, might help.</p>
</div>
</section>
<section id="other-platforms">
<h4>Other platforms<a class="headerlink" href="#other-platforms" title="Permalink to this headline">#</a></h4>
<p>On Solaris, you would use <code class="docutils literal notranslate"><span class="pre">pkgadd</span></code> and on OpenSolaris <code class="docutils literal notranslate"><span class="pre">ipf</span></code> to install
the necessary software.</p>
<p>On other systems, check the documentation for your particular operating system.</p>
</section>
<section id="notes-on-using-conda">
<span id="section-conda-compilers"></span><h4>Notes on using conda<a class="headerlink" href="#notes-on-using-conda" title="Permalink to this headline">#</a></h4>
<p>If you don’t want conda to be used by sage, deactivate conda (for the current shell session).</p>
<blockquote>
<div><ul>
<li><p>Type:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda deactivate
</pre></div>
</div>
</li>
<li><p>Repeat the command until <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">info</span></code> shows:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda info

<span class="go">active environment : None</span>
<span class="go">...</span>
</pre></div>
</div>
</li>
</ul>
<p>Then SageMath will be built either using the compilers provided by the
operating system, or its own compilers.</p>
</div></blockquote>
</section>
</section>
<section id="specific-notes-for-make-and-tar">
<h3>Specific notes for <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code><a class="headerlink" href="#specific-notes-for-make-and-tar" title="Permalink to this headline">#</a></h3>
<p>On macOS, the system-wide BSD <code class="docutils literal notranslate"><span class="pre">tar</span></code> supplied will build Sage, so there is no
need to install the GNU <code class="docutils literal notranslate"><span class="pre">tar</span></code>.</p>
</section>
<section id="using-alternative-compilers">
<span id="section-compilers"></span><h3>Using alternative compilers<a class="headerlink" href="#using-alternative-compilers" title="Permalink to this headline">#</a></h3>
<p>Sage developers tend to use fairly recent versions of GCC.
Nonetheless, the Sage build process on Linux
should succeed with any reasonable C/C++ compiler;
(we do not recommend GCC older than version 5.1).
This is because Sage will build GCC first (if needed) and then use that newly
built GCC to compile Sage.</p>
<p>If you don’t want this and want to try building Sage with a different set of
compilers,
you need to pass Sage’s <code class="docutils literal notranslate"><span class="pre">./configure</span></code> compiler names, via environment
variables <code class="docutils literal notranslate"><span class="pre">CC</span></code>, <code class="docutils literal notranslate"><span class="pre">CXX</span></code>, and <code class="docutils literal notranslate"><span class="pre">FC</span></code>, for C, C++, and Fortran compilers,
respectively, e.g. if you C compiler is <code class="docutils literal notranslate"><span class="pre">clang</span></code>, your C++ compiler is <code class="docutils literal notranslate"><span class="pre">clang++</span></code>,
and your Fortran compiler is <code class="docutils literal notranslate"><span class="pre">flang</span></code> then you would need to run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">CC</span><span class="o">=</span>clang <span class="nv">CXX</span><span class="o">=</span>clang++ <span class="nv">FC</span><span class="o">=</span>flang ./configure
</pre></div>
</div>
<p>before running <code class="docutils literal notranslate"><span class="pre">make</span></code>. It is recommended that you inspect the output of <code class="docutils literal notranslate"><span class="pre">./configure</span></code>
in order to check that Sage will not try to build GCC. Namely, there should be lines like:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">gcc-7.2.0 will not be installed (configure check)</span>
<span class="go">...</span>
<span class="go">gfortran-7.2.0 will not be installed (configure check)</span>
</pre></div>
</div>
<p>indicating that Sage will not attempt to build <code class="docutils literal notranslate"><span class="pre">gcc/g++/gfortran</span></code>.</p>
<p>If you are interested in working on support for commercial compilers from
<a class="reference external" href="http://docs.hp.com/en/5966-9844/ch01s03.html">HP</a>,
<a class="reference external" href="http://www-01.ibm.com/software/awdtools/xlcpp/">IBM</a>,
<a class="reference external" href="http://software.intel.com/en-us/articles/intel-compilers/">Intel</a>,
<a class="reference external" href="http://www.oracle.com/technetwork/server-storage/solarisstudio/overview/index.html">Sun/Oracle</a>,
etc,
please email the sage-devel mailing list at <a class="reference external" href="https://groups.google.com/group/sage-devel">https://groups.google.com/group/sage-devel</a>.</p>
</section>
</section>
<section id="additional-software">
<h2><a class="toc-backref" href="#id8">Additional software</a><a class="headerlink" href="#additional-software" title="Permalink to this headline">#</a></h2>
<section id="recommended-programs">
<h3>Recommended programs<a class="headerlink" href="#recommended-programs" title="Permalink to this headline">#</a></h3>
<p>The following programs are recommended.
They are not strictly required at build time or at run time,
but provide additional capabilities:</p>
<ul class="simple">
<li><p><strong>dvipng</strong>.</p></li>
<li><p><strong>ffmpeg</strong>.</p></li>
<li><p><strong>ImageMagick</strong>.</p></li>
<li><p><strong>LaTeX</strong>: highly recommended.</p></li>
</ul>
<p>It is highly recommended that you have
<a class="reference external" href="https://en.wikipedia.org/wiki/LaTeX">LaTeX</a>
installed, but it is not required.
The most popular packaging is <a class="reference external" href="https://www.tug.org/texlive/">TeX Live</a>,
which can be installed following the directions on their web site.
On Linux systems you can alternatively install your distribution’s
texlive packages:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo apt-get install texlive       <span class="c1"># debian</span>
<span class="gp">$ </span>sudo yum install texlive           <span class="c1"># redhat</span>
</pre></div>
</div>
<p>or similar commands. In addition to the base TeX Live install, you may
need some optional TeX Live packages, for example
country-specific babel packages for the localized Sage
documentation.</p>
<p>If you don’t have either ImageMagick or ffmpeg, you won’t be able to
view animations.
ffmpeg can produce animations in more different formats than ImageMagick,
and seems to be faster than ImageMagick when creating animated GIFs.
Either ImageMagick or dvipng is used for displaying some LaTeX output in the
Sage notebook.</p>
<p>On Debian/Ubuntu, the following system packages are recommended.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-generic-extra</span></code> (to generate pdf documentation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texlive-xetex</span></code> (to convert Jupyter notebooks to pdf)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latexmk</span></code> (to generate pdf documentation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandoc</span></code> (to convert Jupyter notebooks to pdf)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dvipng</span></code> (to render text with LaTeX in Matplotlib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default-jdk</span></code> (to run the Jmol 3D viewer from the console and generate images for 3D plots in the documentation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> (to produce animations)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libavdevice-dev</span></code> (to produce animations)</p></li>
</ul>
</section>
<section id="tcl-tk">
<h3>Tcl/Tk<a class="headerlink" href="#tcl-tk" title="Permalink to this headline">#</a></h3>
<p>If you want to use <a class="reference external" href="https://www.tcl.tk/">Tcl/Tk</a> libraries in Sage,
you need to install the Tcl/Tk and its development headers before building
Sage.
Sage’s Python will then automatically recognize your system’s install of
Tcl/Tk.</p>
<p>On Linux systems, these are usually provided by the <strong>tk</strong> and <strong>tk-dev</strong>
(or <strong>tk-devel</strong>) packages which can be installed using:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo apt-get install tk tk-dev
</pre></div>
</div>
<p>or similar commands.</p>
<p>If you installed Sage first, all is not lost. You just need to rebuild
Sage’s Python and any part of Sage relying on it:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sage -f python3  <span class="c1"># rebuild Python3</span>
<span class="gp">$ </span>make             <span class="c1"># rebuild components of Sage depending on Python</span>
</pre></div>
</div>
<p>after installing the Tcl/Tk development libraries as above.</p>
<p>If</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">_tkinter</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">Tkinter</span>
</pre></div>
</div>
<p>does not raise an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>, then it worked.</p>
</section>
</section>
<section id="step-by-step-installation-procedure">
<span id="build-from-source-step-by-step"></span><h2><a class="toc-backref" href="#id9">Step-by-step installation procedure</a><a class="headerlink" href="#step-by-step-installation-procedure" title="Permalink to this headline">#</a></h2>
<section id="general-procedure">
<h3>General procedure<a class="headerlink" href="#general-procedure" title="Permalink to this headline">#</a></h3>
<ol class="arabic">
<li><p>Follow the procedure in the file <a class="reference external" href="https://github.com/sagemath/sage/#readme">README.md</a>
in <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code>.</p></li>
<li><p>Additional remarks:
You do not need to be logged in as root, since no files are
changed outside of the <code class="file docutils literal notranslate"><span class="pre">sage-x.y</span></code> directory.
In fact, <strong>it is inadvisable to build Sage as root</strong>, as the root account
should only be used when absolutely necessary and mistyped commands can have
serious consequences if you are logged in as root.</p>
<p>Typing <code class="docutils literal notranslate"><span class="pre">make</span></code> performs the usual steps for each Sage’s dependency,
but installs all the resulting files into the local build tree.
Depending on the age and the architecture of your system, it can take from
a few tens of minutes to several hours to build Sage from source.
On really slow hardware, it can even take a few days to build Sage.</p>
<p>Each component of Sage has its own build log, saved in
<code class="file docutils literal notranslate"><span class="pre">SAGE_ROOT/logs/pkgs</span></code>.
If the build of Sage fails, you will see a message mentioning which
package(s) failed to build and the location of the log file for each
failed package.
If this happens, then paste the contents of these log file(s)
to the Sage support
newsgroup at <a class="reference external" href="https://groups.google.com/group/sage-support">https://groups.google.com/group/sage-support</a>.
If the log files are very large (and many are), then don’t paste the whole
file, but make sure to include any error messages.
It would also be helpful to include the type of operating system
(Linux, macOS, Solaris, OpenSolaris, Cygwin, or any other system),
the version and release date of that operating system and the version of
the copy of Sage you are using.
(There are no formal requirements for bug reports – just send them;
we appreciate everything.)</p>
<p>See <a class="reference internal" href="#section-make"><span class="std std-ref">Make targets</span></a> for some targets for the <code class="docutils literal notranslate"><span class="pre">make</span></code> command and
<a class="reference internal" href="#section-envvar"><span class="std std-ref">Environment variables</span></a> for additional information on useful environment
variables used by Sage.</p>
</li>
<li><p>To start Sage, you can now simply type from Sage’s home directory:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./sage
</pre></div>
</div>
<p>You should see the Sage prompt, which will look something like this:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sage
<span class="go">┌────────────────────────────────────────────────────────────────────┐</span>
<span class="go">│ SageMath version 8.8, Release Date: 2019-06-26                     │</span>
<span class="go">│ Using Python 3.10.4. Type &quot;help()&quot; for help.                       │</span>
<span class="go">└────────────────────────────────────────────────────────────────────┘</span>
<span class="go">sage:</span>
</pre></div>
</div>
<p>Note that Sage should take well under a minute when it starts for the first
time, but can take several minutes if the file system is slow or busy.
Since Sage opens a lot of files, it is preferable to install Sage on a fast
filesystem if possible.</p>
<p>Just starting successfully tests that many of the components built
correctly.
Note that this should have been already automatically tested during the
build process.
If the above is not displayed (e.g., if you get a massive traceback), please
report the problem, e.g., at <a class="reference external" href="https://groups.google.com/group/sage-support">https://groups.google.com/group/sage-support</a>.</p>
<p>After Sage has started, try a simple command:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Or something slightly more complicated:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">factor</span><span class="p">(</span><span class="mi">2005</span><span class="p">)</span>
<span class="go">5 * 401</span>
</pre></div>
</div>
</li>
<li><p>Optional, but highly recommended:
Test the install by typing <code class="docutils literal notranslate"><span class="pre">./sage</span> <span class="pre">--testall</span></code>.
This runs most examples in the source code and makes sure that they run
exactly as claimed.
To test all examples, use <code class="docutils literal notranslate"><span class="pre">./sage</span> <span class="pre">--testall</span> <span class="pre">--optional=all</span> <span class="pre">--long</span></code>;
this will run examples that take a long time, and those that depend on
optional packages and software, e.g., Mathematica or Magma.
Some (optional) examples will therefore likely fail.</p>
<p>Alternatively, from within <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT</span></code>, you can type <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code>
(respectively <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptest</span></code>) to run all the standard test code serially
(respectively in parallel).</p>
<p>Testing the Sage library can take from half an hour to several hours,
depending on your hardware.
On slow hardware building and testing Sage can even take several days!</p>
</li>
<li><p>Optional:
Check the interfaces to any other software that you have available.
Note that each interface calls its corresponding program by a particular
name: <a class="reference external" href="https://www.wolfram.com/mathematica/">Mathematica</a> is invoked by
calling <code class="docutils literal notranslate"><span class="pre">math</span></code>, <a class="reference external" href="https://www.maplesoft.com/">Maple</a> by calling <code class="docutils literal notranslate"><span class="pre">maple</span></code>,
etc.
The easiest way to change this name or perform other customizations is
to create a redirection script in <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/bin</span></code>.
Sage inserts this directory at the front of your <span class="target" id="index-4"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>, so your
script may need to use an absolute path to avoid calling itself; also, your
script should pass along all of its arguments.
For example, a <code class="docutils literal notranslate"><span class="pre">maple</span></code> script might look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nb">exec</span> /etc/maple10.2/maple.tty <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
<li><p>Optional:
There are different possibilities to make using Sage a little easier:</p>
<ul>
<li><p>Make a symbolic link from <code class="file docutils literal notranslate"><span class="pre">/usr/local/bin/sage</span></code> (or another
directory in your <span class="target" id="index-5"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>) to <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/sage</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ln -s /path/to/sage-x.y/sage /usr/local/bin/sage
</pre></div>
</div>
<p>Now simply typing <code class="docutils literal notranslate"><span class="pre">sage</span></code> from any directory should be sufficient to run
Sage.</p>
</li>
<li><p>Copy <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/sage</span></code> to a location in your <span class="target" id="index-6"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.
If you do this, make sure you edit the line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SAGE_ROOT=/path/to/sage-version</span>
</pre></div>
</div>
<p>at the beginning of the copied <code class="docutils literal notranslate"><span class="pre">sage</span></code> script according to the direction
given there to something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SAGE_ROOT</span><span class="o">=</span>&lt;SAGE_ROOT&gt;
</pre></div>
</div>
<p>(note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> above!).
It is best to edit only the copy, not the original.</p>
</li>
<li><p>For <a class="reference external" href="https://www.kde.org/">KDE</a> users, create a bash script called
<code class="docutils literal notranslate"><span class="pre">sage</span></code> containing the lines
(note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> below!):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>

konsole -T <span class="s2">&quot;sage&quot;</span> -e &lt;SAGE_ROOT&gt;/sage
</pre></div>
</div>
<p>make it executable:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>chmod a+x sage
</pre></div>
</div>
<p>and put it somewhere in your <span class="target" id="index-7"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>You can also make a KDE desktop icon with this line as the command
(under the Application tab of the Properties of the icon, which you get my
right clicking the mouse on the icon).</p>
</li>
<li><p>On Linux and macOS systems, you can make an alias to
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/sage</span></code>.
For example, put something similar to the following line in your
<code class="file docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">sage</span><span class="o">=</span>&lt;SAGE_ROOT&gt;/sage
</pre></div>
</div>
<p>(Note that you have to change <code class="docutils literal notranslate"><span class="pre">&lt;SAGE_ROOT&gt;</span></code> above!)
Having done so, quit your terminal emulator and restart it.
Now typing <code class="docutils literal notranslate"><span class="pre">sage</span></code> within your terminal emulator should start Sage.</p>
</li>
</ul>
</li>
<li><p>Optional:
Install optional Sage packages and databases.
Type <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--optional</span></code> to see a list of them (this requires an Internet
connection), or visit <a class="reference external" href="https://www.sagemath.org/packages/optional/">https://www.sagemath.org/packages/optional/</a>.
Then type <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">&lt;package-name&gt;</span></code> to automatically download and install
a given package.</p></li>
<li><p>Have fun! Discover some amazing conjectures!</p></li>
</ol>
</section>
</section>
<section id="make-targets">
<span id="section-make"></span><h2><a class="toc-backref" href="#id10">Make targets</a><a class="headerlink" href="#make-targets" title="Permalink to this headline">#</a></h2>
<p>To build Sage from scratch, you would typically execute <code class="docutils literal notranslate"><span class="pre">make</span></code> in Sage’s home
directory to build Sage and its <a class="reference external" href="https://en.wikipedia.org/wiki/HTML">HTML</a>
documentation.
The <code class="docutils literal notranslate"><span class="pre">make</span></code> command is pretty smart, so if your build of Sage is interrupted,
then running <code class="docutils literal notranslate"><span class="pre">make</span></code> again should cause it to pick up where it left off.
The <code class="docutils literal notranslate"><span class="pre">make</span></code> command can also be given options, which control what is built and
how it is built:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span></code> builds Sage: it compiles all of the Sage packages.
It does not build the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code> builds Sage’s documentation in HTML format.
Note that this requires that Sage be built first, so it will automatically
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span></code> first.
Thus, running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code> is equivalent to running <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-pdf</span></code> builds Sage’s documentation in PDF format. This also
requires that Sage be built first, so it will automatically run <code class="docutils literal notranslate"><span class="pre">make</span>
<span class="pre">build</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-html-no-plot</span></code> builds Sage’s documentation in html format
but skips the inclusion of graphics auto-generated using the
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">PLOT</span></code> markup and the <code class="docutils literal notranslate"><span class="pre">sphinx_plot</span></code> function. This is
primarily intended for use when producing certain binary
distributions of Sage, to lower the size of the distribution. As of
this writing (December 2014, Sage 6.5), there are only a few such
plots, adding about 4M to the <code class="file docutils literal notranslate"><span class="pre">local/share/doc/sage/</span></code> directory.
In the future, this may grow, of course. Note: after using this, if you
want to build the documentation and include the pictures, you should
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-uninstall</span></code>, because the presence, or lack, of pictures
is cached in the documentation output.
You can benefit from this no-plot feature with other make targets by doing
<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">SAGE_DOCBUILD_OPTS+='</span> <span class="pre">--no-plot'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptest</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestlong</span></code>: these run Sage’s test suite.
The first version skips tests that need more than a few seconds to complete
and those which depend on optional packages or additional software.
The second version includes the former, and so it takes longer.
The “p” in <code class="docutils literal notranslate"><span class="pre">ptest</span></code> stands for “parallel”: tests are run in parallel.
If you want to run tests serially, you can use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code> or
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testlong</span></code> instead.
If you want to run tests depending on optional packages and additional
software, you can use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testall</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestall</span></code>,
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testalllong</span></code>, or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ptestalllong</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-uninstall</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-clean</span></code> each remove several
directories which are produced when building the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">distclean</span></code> restores the Sage directory to its state before doing any
building: it is almost equivalent to deleting Sage’s entire home directory and
unpacking the source tarfile again, the only difference being that the
<code class="file docutils literal notranslate"><span class="pre">.git</span></code> directory is preserved, so git branches are not deleted.</p></li>
</ul>
</section>
<section id="environment-variables">
<span id="section-envvar"></span><h2><a class="toc-backref" href="#id11">Environment variables</a><a class="headerlink" href="#environment-variables" title="Permalink to this headline">#</a></h2>
<p>Sage uses several environment variables to control its build process.
Most users won’t need to set any of these: the build process just works on many
platforms.
(Note though that setting <span class="target" id="index-8"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKE</span></code>, as described below, can significantly
speed up the process.)
Building Sage involves building about 100 packages, each of which has its own
compilation instructions.</p>
<p>The Sage source tarball already includes the sources for all standard
packages, that is, it allows you to build Sage without internet
connection. The git repository, however, does not contain the source
code for third-party packages. Instead, it will be downloaded as
needed (Note: you can run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">download</span></code> to force downloading
packages before building). Package downloads use the Sage mirror
network, the nearest mirror will be determined automatically for
you. This is influenced by the following environment variable:</p>
<ul>
<li><p><span class="target" id="index-9"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SERVER</span></code> - Try the specified mirror first, before
falling back to the official Sage mirror list. Note that Sage will
search the directory</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_SERVER/spkg/upstream</span></code></p></li>
</ul>
<p>for upstream tarballs.</p>
</li>
</ul>
<p>Here are some of the more commonly used variables affecting the build process:</p>
<ul>
<li><p><span class="target" id="index-10"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKE</span></code> - one useful setting for this variable when building Sage is
<code class="docutils literal notranslate"><span class="pre">MAKE='make</span> <span class="pre">-jNUM'</span></code> to tell the <code class="docutils literal notranslate"><span class="pre">make</span></code> program to run <code class="docutils literal notranslate"><span class="pre">NUM</span></code> jobs in
parallel when building.
Note that some Sage packages may not support this variable.</p>
<p>Some people advise using more jobs than there are CPU cores, at least if the
system is not heavily loaded and has plenty of RAM; for example, a good
setting for <code class="docutils literal notranslate"><span class="pre">NUM</span></code> might be between 1 and 1.5 times the number of cores.
In addition, the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option sets a load limit: <code class="docutils literal notranslate"><span class="pre">MAKE='make</span> <span class="pre">-j4</span> <span class="pre">-l5.5</span></code>,
for example, tells <code class="docutils literal notranslate"><span class="pre">make</span></code> to try to use four jobs, but to not start more
than one job if the system load average is above 5.5.
See the manual page for GNU <code class="docutils literal notranslate"><span class="pre">make</span></code>: <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html#Options-Summary">Command-line options</a>
and <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html#Parallel">Parallel building</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some users on single-core macOS machines have reported problems when
building Sage with <code class="docutils literal notranslate"><span class="pre">MAKE='make</span> <span class="pre">-jNUM'</span></code> with <code class="docutils literal notranslate"><span class="pre">NUM</span></code> greater than one.</p>
</div>
</li>
<li><p><span class="target" id="index-11"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_NUM_THREADS</span></code> - if set to a number, then when building the
documentation, parallel doctesting, or running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-b</span></code>, use this many
threads.
If this is not set, then determine the number of threads using the value of
the <span class="target" id="index-12"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKE</span></code> (see above) or <span class="target" id="index-13"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MAKEFLAGS</span></code> environment variables.
If none of these specifies a number of jobs, use one thread (except for
parallel testing: there we use a default of the number of CPU cores, with a
maximum of 8 and a minimum of 2).</p></li>
<li><p><span class="target" id="index-14"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">V</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, silence the build.  Instead of
showing a detailed compilation log, only one line of output is shown
at the beginning and at the end of the installation of each Sage
package.  To see even less output, use:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make -s <span class="nv">V</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p>(Note that the above uses the syntax of setting a Makefile variable.)</p>
</li>
<li><p><span class="target" id="index-15"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, then during the build process,
or when installing packages manually,
run the test suite for each package which has one, and stop with an error
if tests are failing.  If set to <code class="docutils literal notranslate"><span class="pre">warn</span></code>, then only a warning is printed
in this case.
See also <span class="target" id="index-16"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK_PACKAGES</span></code>.</p></li>
<li><p><span class="target" id="index-17"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK_PACKAGES</span></code> - if <span class="target" id="index-18"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK</span></code> is set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>,
then the default behavior is to run test suites for all spkgs which contain
them.
If <span class="target" id="index-19"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK_PACKAGES</span></code> is set, it should be a comma-separated list
of strings of the form <code class="docutils literal notranslate"><span class="pre">package-name</span></code> or <code class="docutils literal notranslate"><span class="pre">!package-name</span></code>.
An entry <code class="docutils literal notranslate"><span class="pre">package-name</span></code> means to run the test suite for the named package
regardless of the setting of <span class="target" id="index-20"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_CHECK</span></code>.
An entry <code class="docutils literal notranslate"><span class="pre">!package-name</span></code> means to skip its test suite.
So if this is set to <code class="docutils literal notranslate"><span class="pre">ppl,!python3</span></code>, then always run the test suite for
PPL, but always skip the test suite for Python 3.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of Sage 9.1, the test suites for the Python 2 and 3 spkgs fail
on most platforms.  So when this variable is empty or unset, Sage
uses a default of <code class="docutils literal notranslate"><span class="pre">!python2,!python3</span></code>.</p>
</div>
</li>
<li><p><span class="target" id="index-21"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_INSTALL_GCC</span></code> - <strong>Obsolete, do not use, to be removed</strong></p></li>
<li><p><span class="target" id="index-22"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_INSTALL_CCACHE</span></code> - by default Sage doesn’t install ccache,
however by setting <code class="docutils literal notranslate"><span class="pre">SAGE_INSTALL_CCACHE=yes</span></code> Sage will install ccache.
Because the Sage distribution is quite large, the maximum cache is set to 4G.
This can be changed by running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-sh</span> <span class="pre">-c</span> <span class="pre">&quot;ccache</span> <span class="pre">--max-size=SIZE&quot;</span></code>,
where <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> is specified in gigabytes, megabytes, or kilobytes by
appending a “G”, “M”, or “K”.</p>
<p>Sage does not include the sources for ccache since it is an optional package.
Because of this, it is necessary to have an Internet connection while
building ccache for Sage, so that Sage can pull down the necessary
sources.</p>
</li>
<li><p id="sage-debug"><span class="target" id="index-23"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DEBUG</span></code> - controls debugging support.
There are three different possible values:</p>
<ul class="simple">
<li><p>Not set (or set to anything else than “yes” or “no”): build binaries with
debugging symbols, but no special debug builds.
This is the default.
There is no performance impact, only additional disk space is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_DEBUG=no</span></code>: <code class="docutils literal notranslate"><span class="pre">no</span></code> means no debugging symbols (that is, no
<code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">-g</span></code>), which saves some disk space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAGE_DEBUG=yes</span></code>: build debug versions if possible (in particular,
Python is built with additional debugging turned on and Singular is built
with a different memory manager).
These will be notably slower but, for example, make it much easier to
pinpoint memory allocation problems.</p></li>
</ul>
<p>Instead of using <span class="target" id="index-24"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DEBUG</span></code> one can configure with
<code class="docutils literal notranslate"><span class="pre">--enable-debug={no|symbols|yes}</span></code>.</p>
</li>
<li><p><span class="target" id="index-25"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_PROFILE</span></code> - controls profiling support. If this is set
to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, profiling support is enabled where possible. Note that
Python-level profiling is always available; This option enables
profiling in Cython modules.</p></li>
<li><p><span class="target" id="index-26"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SPKG_INSTALL_DOCS</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, then install
package-specific documentation to
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/share/doc/PACKAGE_NAME/</span></code> when an spkg is
installed.
This option may not be supported by all spkgs.
Some spkgs might also assume that certain programs are available on the
system (for example, <code class="docutils literal notranslate"><span class="pre">latex</span></code> or <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>).</p></li>
<li><p><span class="target" id="index-27"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_DOCBUILD_OPTS</span></code> - the value of this variable is passed as an
argument to <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">all</span> <span class="pre">html</span></code> or <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">all</span> <span class="pre">pdf</span></code> when
you run <code class="docutils literal notranslate"><span class="pre">make</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code>, or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc-pdf</span></code>.
For example, you can add <code class="docutils literal notranslate"><span class="pre">--no-plot</span></code> to this variable to avoid building
the graphics coming from the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">PLOT</span></code> directive within the documentation,
or you can add <code class="docutils literal notranslate"><span class="pre">--include-tests-blocks</span></code> to include all “TESTS” blocks in the
reference manual. Run <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">help</span></code> to see the full list
of options.</p></li>
<li><p><span class="target" id="index-28"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_BUILD_DIR</span></code> - the default behavior is to build each spkg in a
subdirectory of <code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build/</span></code>; for
example, build version 7.27.0 of
<code class="file docutils literal notranslate"><span class="pre">ipython</span></code> in the directory
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build/ipython-7.27.0/</span></code>.
If this variable is set, then build in
<code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR/ipython-7.27.0/</span></code> instead.
If the directory <code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR</span></code> does not exist, it is created.
As of this writing (Sage 4.8), when building the standard Sage packages,
1.5 gigabytes of free space are required in this directory (or more if
<code class="docutils literal notranslate"><span class="pre">SAGE_KEEP_BUILT_SPKGS=yes</span></code> – see below); the exact amount of required
space varies from platform to platform.
For example, the block size of the file system will affect the amount of
space used, since some spkgs contain many small files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The variable <span class="target" id="index-29"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_BUILD_DIR</span></code> must be set to the full path name
of either an existing directory for which the user has write permissions,
or to the full path name of a nonexistent directory which the user has
permission to create.
The path name must contain <strong>no spaces</strong>.</p>
</div>
</li>
<li><p><span class="target" id="index-30"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_KEEP_BUILT_SPKGS</span></code> - the default behavior is to delete each
build directory – the appropriate subdirectory of
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build</span></code> or
<code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR</span></code> – after each spkg
is successfully built, and to keep it if there were errors installing the
spkg.
Set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code> to keep the subdirectory regardless.
Furthermore, if you install an spkg for which there is already a
corresponding subdirectory, for example left over from a previous build,
then the default behavior is to delete that old subdirectory.
If this variable is set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, then the old subdirectory is moved to
<code class="file docutils literal notranslate"><span class="pre">$SAGE_ROOT/local/var/tmp/sage/build/old/</span></code> (or
<code class="file docutils literal notranslate"><span class="pre">$SAGE_BUILD_DIR/old</span></code>),
overwriting any already existing file or directory with the same name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After a full build of Sage (as of version 4.8), these subdirectories can
take up to 6 gigabytes of storage, in total, depending on the platform
and the block size of the file system.
If you always set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, it can take even more space:
rebuilding every spkg would use double the amount of space, and any
upgrades to spkgs would create still more directories, using still more
space.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In an existing Sage installation, running <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span> <span class="pre">-s</span> <span class="pre">&lt;package-name&gt;</span></code>
or <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-f</span> <span class="pre">-s</span> <span class="pre">&lt;package-name&gt;</span></code> installs the spkg <code class="docutils literal notranslate"><span class="pre">&lt;package-name&gt;</span></code> and
keeps the corresponding build directory; thus setting
<span class="target" id="index-31"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_KEEP_BUILT_SPKGS</span></code> to <code class="docutils literal notranslate"><span class="pre">yes</span></code> mimics this behavior when
building Sage from scratch or when installing individual spkgs.
So you can set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code> instead of using the <code class="docutils literal notranslate"><span class="pre">-s</span></code> flag
for <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-i</span></code> and <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-f</span></code>.</p>
</div>
</li>
<li><p id="sage-fat-binary"><span class="target" id="index-32"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_FAT_BINARY</span></code> - to build binaries that will run on the
widest range of target CPUs set this variable to <code class="docutils literal notranslate"><span class="pre">yes</span></code> before
building Sage or configure with <code class="docutils literal notranslate"><span class="pre">--enable-fat-binary</span></code>.
This does not make the binaries relocatable, it only
avoids newer CPU instruction set extensions. For relocatable (=can
be moved to a different directory) binaries, you must use
<a class="reference external" href="https://github.com/sagemath/binary-pkg">https://github.com/sagemath/binary-pkg</a></p>
</li>
<li><p><span class="target" id="index-33"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SUDO</span></code> - set this to <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-E</span></code> or to any other
command prefix that is necessary to write into a installation
hierarchy (<span class="target" id="index-34"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_LOCAL</span></code>) owned by root or another user.
Note that this command needs to preserve environment variable
settings (plain <code class="docutils literal notranslate"><span class="pre">sudo</span></code> does not).</p>
<p>Not all Sage packages currently support <span class="target" id="index-35"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SUDO</span></code>.</p>
<p>Therefore this environment variable is most useful when a system
administrator wishes to install an additional Sage package that
supports <span class="target" id="index-36"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_SUDO</span></code>, into a root-owned installation
hierarchy (<span class="target" id="index-37"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_LOCAL</span></code>).</p>
</li>
</ul>
<p>Environment variables dealing with specific Sage packages:</p>
<ul class="simple">
<li><p><span class="target" id="index-38"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_MATPLOTLIB_GUI</span></code> - if set to anything non-empty except <code class="docutils literal notranslate"><span class="pre">no</span></code>,
then Sage will attempt to build the graphical backend when it builds the
matplotlib package.</p></li>
<li><p><span class="target" id="index-39"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PARI_CONFIGURE</span></code> - use this to pass extra parameters to
PARI’s <code class="docutils literal notranslate"><span class="pre">Configure</span></code> script, for example to specify graphics
support (which is disabled by default). See the file
<code class="file docutils literal notranslate"><span class="pre">build/pkgs/pari/spkg-install</span></code> for more information.</p></li>
<li><p><span class="target" id="index-40"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TUNE_PARI</span></code>: If yes, enable PARI self-tuning. Note that
this can be time-consuming. If you set this variable to “yes”, you
will also see this: <code class="docutils literal notranslate"><span class="pre">WARNING:</span> <span class="pre">Tuning</span> <span class="pre">PARI/GP</span> <span class="pre">is</span> <span class="pre">unreliable.</span> <span class="pre">You</span> <span class="pre">may</span>
<span class="pre">find</span> <span class="pre">your</span> <span class="pre">build</span> <span class="pre">of</span> <span class="pre">PARI</span> <span class="pre">fails,</span> <span class="pre">or</span> <span class="pre">PARI/GP</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">work</span> <span class="pre">properly</span>
<span class="pre">once</span> <span class="pre">built.</span> <span class="pre">We</span> <span class="pre">recommend</span> <span class="pre">to</span> <span class="pre">build</span> <span class="pre">this</span> <span class="pre">package</span> <span class="pre">with</span>
<span class="pre">SAGE_CHECK=&quot;yes&quot;.</span></code></p></li>
<li><p><span class="target" id="index-41"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PARI_MAKEFLAGS</span></code>: The value of this variable is passed as an
argument to the <code class="docutils literal notranslate"><span class="pre">$MAKE</span></code> command when compiling PARI.</p></li>
</ul>
<p>Some standard environment variables which are used by Sage:</p>
<ul class="simple">
<li><p><span class="target" id="index-42"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CC</span></code> - while some programs allow you to use this to specify your C
compiler, <strong>not every Sage package recognizes this</strong>.
If GCC is installed within Sage, <span class="target" id="index-43"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CC</span></code> is ignored and Sage’s <code class="docutils literal notranslate"><span class="pre">gcc</span></code>
is used instead.</p></li>
<li><p><span class="target" id="index-44"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPP</span></code> - similarly, this will set the C preprocessor for some Sage
packages, and similarly, using it is likely quite risky.
If GCC is installed within Sage, <span class="target" id="index-45"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPP</span></code> is ignored and Sage’s <code class="docutils literal notranslate"><span class="pre">cpp</span></code>
is used instead.</p></li>
<li><p><span class="target" id="index-46"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXX</span></code> - similarly, this will set the C++ compiler for some Sage
packages, and similarly, using it is likely quite risky.
If GCC is installed within Sage, <span class="target" id="index-47"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXX</span></code> is ignored and Sage’s <code class="docutils literal notranslate"><span class="pre">g++</span></code>
is used instead.</p></li>
<li><p><span class="target" id="index-48"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FC</span></code> - similarly, this will set the Fortran compiler.
This is supported by all Sage packages which have Fortran code.
However, for historical reasons, the value is hardcoded during the initial
<code class="docutils literal notranslate"><span class="pre">make</span></code> and subsequent changes to <code class="docutils literal notranslate"><span class="pre">$FC</span></code> might be ignored (in which case,
the original value will be used instead).
If GCC is installed within Sage, <span class="target" id="index-49"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FC</span></code> is ignored and Sage’s
<code class="docutils literal notranslate"><span class="pre">gfortran</span></code> is used instead.</p></li>
<li><p><span class="target" id="index-50"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code>, <span class="target" id="index-51"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXXFLAGS</span></code> and <span class="target" id="index-52"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FCFLAGS</span></code> - the flags for
the C compiler, the C++ compiler and the Fortran compiler, respectively.
The same comments apply to these: setting them may cause problems, because
they are not universally respected among the Sage packages. Note
also that <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CFLAGS=&quot;&quot;</span></code> does not have the same effect as
<code class="docutils literal notranslate"><span class="pre">unset</span> <span class="pre">CFLAGS</span></code>. The latter is preferable.</p></li>
<li><p>Similar comments apply to other compiler and linker flags like
<span class="target" id="index-53"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPPFLAGS</span></code>, <span class="target" id="index-54"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code>, <span class="target" id="index-55"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CXXFLAG64</span></code>,
<span class="target" id="index-56"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAG64</span></code>, and <span class="target" id="index-57"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LD</span></code>.</p></li>
<li><p><span class="target" id="index-58"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">OPENBLAS_CONFIGURE</span></code> - adds additional configuration flags for
the OpenBLAS package that gets added to the make command. (see <a class="reference external" href="https://trac.sagemath.org/23272">trac ticket #23272</a>)</p></li>
</ul>
<p>Sage uses the following environment variables when it runs:</p>
<ul class="simple">
<li><p><span class="target" id="index-59"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DOT_SAGE</span></code> - this is the directory, to which the user has read and
write access, where Sage stores a number of files.
The default location is <code class="file docutils literal notranslate"><span class="pre">$HOME/.sage/</span></code>.</p></li>
<li><p><span class="target" id="index-60"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_STARTUP_FILE</span></code> - a file including commands to be executed every
time Sage starts.
The default value is <code class="file docutils literal notranslate"><span class="pre">$DOT_SAGE/init.sage</span></code>.</p></li>
<li><p><span class="target" id="index-61"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">BROWSER</span></code> - on most platforms, Sage will detect the command to
run a web browser, but if this doesn’t seem to work on your machine, set this
variable to the appropriate command.</p></li>
</ul>
<p>Variables dealing with doctesting:</p>
<ul class="simple">
<li><p><span class="target" id="index-62"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TIMEOUT</span></code> - used for Sage’s doctesting: the number of seconds
to allow a doctest before timing it out.
If this isn’t set, the default is 300 seconds (5 minutes).</p></li>
<li><p><span class="target" id="index-63"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TIMEOUT_LONG</span></code> - used for Sage’s doctesting: the number of
seconds to allow a doctest before timing it out, if tests are run using
<code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">--long</span></code>.
If this isn’t set, the default is 1800 seconds (30 minutes).</p></li>
<li><p><span class="target" id="index-64"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TEST_GLOBAL_ITER</span></code>, <span class="target" id="index-65"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_TEST_ITER</span></code>: these can
be used instead of passing the flags <code class="docutils literal notranslate"><span class="pre">--global-iterations</span></code> and
<code class="docutils literal notranslate"><span class="pre">--file-iterations</span></code>, respectively, to <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-t</span></code>. Indeed, these
variables are only used if the flags are unset. Run <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">-h</span></code>
for more information on the effects of these flags (and therefore
these variables).</p></li>
</ul>
<p>Sage sets some other environment variables. The most accurate way to
see what Sage does is to first run <code class="docutils literal notranslate"><span class="pre">env</span></code> from a shell prompt to see
what environment variables you have set. Then run <code class="docutils literal notranslate"><span class="pre">sage</span> <span class="pre">--sh</span> <span class="pre">-c</span>
<span class="pre">env</span></code> to see the list after Sage sets its variables. (This runs a
separate shell, executes the shell command <code class="docutils literal notranslate"><span class="pre">env</span></code>, and then exits
that shell, so after running this, your settings will be restored.)
Alternatively, you can peruse the shell script
<code class="file docutils literal notranslate"><span class="pre">src/bin/sage-env</span></code>.</p>
<p>Sage also has some environment-like settings. Some of these correspond
to actual environment variables while others have names like
environment variables but are only available while Sage is running. To
see a list, execute <code class="docutils literal notranslate"><span class="pre">sage.env.[TAB]</span></code> while running Sage.</p>
</section>
<section id="installation-in-a-multiuser-environment">
<h2><a class="toc-backref" href="#id12">Installation in a Multiuser Environment</a><a class="headerlink" href="#installation-in-a-multiuser-environment" title="Permalink to this headline">#</a></h2>
<p>This section addresses the question of how a system administrator can install
a single copy of Sage in a multi-user computer network.</p>
<ol class="arabic">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">sudo</span></code>, create the installation directory, for example,
<code class="docutils literal notranslate"><span class="pre">/opt/sage/sage-x.y</span></code>. We refer to it as <code class="docutils literal notranslate"><span class="pre">SAGE_LOCAL</span></code> in the
instructions below. Do not try to install into a directory that
already contains other software, such as <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo mkdir -p SAGE_LOCAL
</pre></div>
</div>
</li>
<li><p>Make the directory writable for you and readable by everyone:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo chown <span class="k">$(</span>id -un<span class="k">)</span> SAGE_LOCAL
<span class="gp">$ </span>sudo chmod <span class="m">755</span> SAGE_LOCAL
</pre></div>
</div>
</li>
<li><p>Build and install Sage, following the instructions in <a class="reference external" href="https://github.com/sagemath/sage/#readme">README.md</a>, using the
<code class="docutils literal notranslate"><span class="pre">configure</span></code> option <code class="docutils literal notranslate"><span class="pre">--prefix=SAGE_LOCAL</span></code>.</p>
<p>Do not use <code class="docutils literal notranslate"><span class="pre">sudo</span></code> for this step; building Sage must be done using
your normal user account.</p>
</li>
<li><p>Optionally, create a symbolic link to the installed <code class="docutils literal notranslate"><span class="pre">sage</span></code> script
in a directory that is in the users’ <span class="target" id="index-66"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>, for example
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo ln -s SAGE_LOCAL/bin/sage /usr/local/bin/sage
</pre></div>
</div>
</li>
<li><p>Optionally, change permissions to prevent accidental changes to
the installation by yourself:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo chown -R root SAGE_LOCAL
</pre></div>
</div>
</li>
</ol>
<p><strong>This page was last updated in May 2022 (Sage 9.7).</strong></p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="launching.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Launching SageMath</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="conda.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Install from conda-forge</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2022, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Install from Source Code</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li><a class="reference internal" href="#general-requirements">General requirements</a><ul>
<li><a class="reference internal" href="#disk-space-and-memory">Disk space and memory</a></li>
<li><a class="reference internal" href="#command-line-tools">Command-line tools</a><ul>
<li><a class="reference internal" href="#fortran-and-compiler-suites">Fortran and compiler suites</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-for-venv">Python for venv</a></li>
<li><a class="reference internal" href="#other-notes">Other notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-specific-requirements">System-specific requirements</a></li>
<li><a class="reference internal" href="#installing-prerequisites">Installing prerequisites</a><ul>
<li><a class="reference internal" href="#debian-ubuntu-prerequisite-installation">Debian/Ubuntu prerequisite installation</a></li>
<li><a class="reference internal" href="#fedora-redhat-centos-prerequisite-installation">Fedora/Redhat/CentOS prerequisite installation</a></li>
<li><a class="reference internal" href="#arch-linux-prerequisite-installation">Arch Linux prerequisite installation</a></li>
<li><a class="reference internal" href="#opensuse-prerequisite-installation">OpenSUSE prerequisite installation</a></li>
<li><a class="reference internal" href="#macos-prerequisite-installation">macOS prerequisite installation</a></li>
<li><a class="reference internal" href="#macos-recommended-installation">macOS recommended installation</a></li>
<li><a class="reference internal" href="#ubuntu-on-windows-subsystem-for-linux-wsl-prerequisite-installation">Ubuntu on Windows Subsystem for Linux (WSL) prerequisite installation</a></li>
<li><a class="reference internal" href="#cygwin-prerequisite-installation">Cygwin prerequisite installation</a></li>
<li><a class="reference internal" href="#other-platforms">Other platforms</a></li>
<li><a class="reference internal" href="#notes-on-using-conda">Notes on using conda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specific-notes-for-make-and-tar">Specific notes for <code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">tar</span></code></a></li>
<li><a class="reference internal" href="#using-alternative-compilers">Using alternative compilers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-software">Additional software</a><ul>
<li><a class="reference internal" href="#recommended-programs">Recommended programs</a></li>
<li><a class="reference internal" href="#tcl-tk">Tcl/Tk</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-by-step-installation-procedure">Step-by-step installation procedure</a><ul>
<li><a class="reference internal" href="#general-procedure">General procedure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#make-targets">Make targets</a></li>
<li><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li><a class="reference internal" href="#installation-in-a-multiuser-environment">Installation in a Multiuser Environment</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    </body>
</html>