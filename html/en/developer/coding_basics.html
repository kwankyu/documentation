
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>General Conventions &#8212; Sage Developer&#39;s Guide v8.2</title>
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '8.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The reviewer’s check list" href="reviewer_checklist.html" />
    <link rel="prev" title="The Sage Trac Server" href="trac.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
    <script src="_static/thebe.js" type="text/javascript"></script>
    <script src="_static/thebe-sage.js" type="text/javascript"></script>

  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="reviewer_checklist.html" title="The reviewer’s check list"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="trac.html" title="The Sage Trac Server"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Developer&#39;s Guide v8.2</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="general-conventions">
<span id="chapter-code-basics"></span><h1>General Conventions<a class="headerlink" href="#general-conventions" title="Permalink to this headline">¶</a></h1>
<p>There are many ways to contribute to Sage including sharing scripts
and Sage worksheets that implement new functionality using Sage,
improving to the Sage library, or to working on the many underlying
libraries distributed with Sage <a class="footnote-reference" href="#id2" id="id1">[1]</a>.
This guide focuses on editing the Sage library itself.</p>
<p>Sage is not just about gathering together functionality. It is about
providing a clear, systematic and consistent way to access a large
number of algorithms, in a coherent framework that makes sense
mathematically. In the design of Sage, the semantics of objects, the
definitions, etc., are informed by how the corresponding objects are
used in everyday mathematics.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>See <a class="reference external" href="https://www.sagemath.org/links-components.html">https://www.sagemath.org/links-components.html</a> for a full list
of packages shipped with every copy of Sage</td></tr>
</tbody>
</table>
<p>To meet the goal of making Sage easy to read, maintain, and improve,
all Python/Cython code that is included with Sage should adhere to the
style conventions discussed in this chapter.</p>
<div class="section" id="python-code-style">
<span id="section-coding-python"></span><h2>Python Code Style<a class="headerlink" href="#python-code-style" title="Permalink to this headline">¶</a></h2>
<p>Follow the standard Python formatting rules when writing code for
Sage, as explained at the following URLs:</p>
<ul class="simple">
<li><span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 0008</strong></a></li>
<li><span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0257"><strong>PEP 0257</strong></a></li>
</ul>
<p>In particular,</p>
<ul>
<li><p class="first">Use 4 spaces for indentation levels. Do not use tabs as they can
result in indentation confusion. Most editors have a feature that
will insert 4 spaces when the tab key is hit. Also, many editors
will automatically search/replace leading tabs with 4 spaces.</p>
</li>
<li><p class="first">Whitespace before and after assignment and binary operator of the
lowest priority in the expression:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">No whitespace before or after the <code class="docutils literal"><span class="pre">=</span></code> sign if it is used for
keyword arguments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">complex</span><span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">magic</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">real</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">imag</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">No whitespace immediately inside parenthesis, brackets, and braces:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spam</span><span class="p">(</span><span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">{</span><span class="n">eggs</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="p">[</span><span class="n">i</span><span class="o">^</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
</pre></div>
</div>
</li>
<li><p class="first">Use all lowercase function names with words separated by
underscores. For example, you are encouraged to write Python
functions using the naming convention:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">set_some_value</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Note, however, that some functions do have uppercase letters where
it makes sense. For instance, the function for lattice reduction by
the LLL algorithm is called <code class="docutils literal"><span class="pre">Matrix_integer_dense.LLL</span></code>.</p>
</li>
<li><p class="first">Use CamelCase for class names:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeValue</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>  <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>and factory functions that mimic object constructors, for example
<code class="docutils literal"><span class="pre">PolynomialRing</span></code> or:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">SomeIdentityValue</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">SomeValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="files-and-directory-structure">
<span id="chapter-directory-structure"></span><h2>Files and Directory Structure<a class="headerlink" href="#files-and-directory-structure" title="Permalink to this headline">¶</a></h2>
<p>Roughly, the Sage directory tree is layout like this. Note that we use
<code class="docutils literal"><span class="pre">SAGE_ROOT</span></code> in the following as a shortcut for the (arbitrary) name
of the directory containing the Sage sources:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SAGE_ROOT</span><span class="o">/</span>
    <span class="n">sage</span>          <span class="c1"># the Sage launcher</span>
    <span class="n">Makefile</span>      <span class="c1"># top level Makefile</span>
    <span class="n">build</span><span class="o">/</span>        <span class="c1"># sage&#39;s build system</span>
        <span class="n">deps</span>
        <span class="n">install</span>
        <span class="o">...</span>
        <span class="n">pkgs</span><span class="o">/</span>     <span class="c1"># install, patch, and metadata from spkgs</span>
    <span class="n">src</span><span class="o">/</span>
        <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
        <span class="n">module_list</span><span class="o">.</span><span class="n">py</span>
        <span class="o">...</span>
        <span class="n">sage</span><span class="o">/</span>     <span class="c1"># sage library (formerly devel/sage-main/sage)</span>
        <span class="n">ext</span><span class="o">/</span>      <span class="c1"># extra sage resources (formerly devel/ext-main)</span>
        <span class="n">mac</span><span class="o">-</span><span class="n">app</span><span class="o">/</span>  <span class="c1"># would no longer have to awkwardly be in extcode</span>
        <span class="nb">bin</span><span class="o">/</span>      <span class="c1"># the scripts in local/bin that are tracked</span>
    <span class="n">upstream</span><span class="o">/</span>     <span class="c1"># tarballs of upstream sources</span>
    <span class="n">local</span><span class="o">/</span>        <span class="c1"># installed binaries</span>
</pre></div>
</div>
<p>Python Sage library code goes into <code class="docutils literal"><span class="pre">src/</span></code> and uses the following
conventions. Directory names may be plural (e.g. <code class="docutils literal"><span class="pre">rings</span></code>) and file
names are almost always singular (e.g. <code class="docutils literal"><span class="pre">polynomial_ring.py</span></code>). Note
that the file <code class="docutils literal"><span class="pre">polynomial_ring.py</span></code> might still contain definitions
of several different types of polynomial rings.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You are encouraged to include miscellaneous notes, emails, design
discussions, etc., in your package.  Make these plain text files
(with extension <code class="docutils literal"><span class="pre">.txt</span></code>) in a subdirectory called <code class="docutils literal"><span class="pre">notes</span></code>.</p>
</div>
<p>If you want to create a new directory in the Sage library
<code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage</span></code> (say, <code class="docutils literal"><span class="pre">measure_theory</span></code>), that directory
should contain a file <code class="docutils literal"><span class="pre">__init__.py</span></code> that contains the single line
<code class="docutils literal"><span class="pre">import</span> <span class="pre">all</span></code> in addition to whatever
files you want to add (say, <code class="docutils literal"><span class="pre">borel_measure.py</span></code> and
<code class="docutils literal"><span class="pre">banach_tarski.py</span></code>), and also a file <code class="docutils literal"><span class="pre">all.py</span></code> listing imports from
that directory that are important enough to be in the Sage’s global
namespace at startup.
The file <code class="docutils literal"><span class="pre">all.py</span></code> might look like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">borel_measure</span> <span class="k">import</span> <span class="n">BorelMeasure</span>
<span class="kn">from</span> <span class="nn">banach_tarski</span> <span class="k">import</span> <span class="n">BanachTarskiParadox</span>
</pre></div>
</div>
<p>but it is generally better to use the lazy import framework:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.misc.lazy_import</span> <span class="k">import</span> <span class="n">lazy_import</span>
<span class="n">lazy_import</span><span class="p">(</span><span class="s1">&#39;sage.measure_theory.borel_measue&#39;</span><span class="p">,</span> <span class="s1">&#39;BorelMeasure&#39;</span><span class="p">)</span>
<span class="n">lazy_import</span><span class="p">(</span><span class="s1">&#39;sage.measure_theory.banach_tarski&#39;</span><span class="p">,</span> <span class="s1">&#39;BanachTarskiParadox&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then in the file <code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage/all.py</span></code>, add a line</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.measure_theory.all</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Non-Python Sage source code and supporting files should be placed in
appropriate subdirectories of <code class="docutils literal"><span class="pre">SAGE_ROOT/src/ext/</span></code>. They will then be
automatically copied to the corresponding subdirectories of
<code class="docutils literal"><span class="pre">SAGE_ROOT/local/share/sage/ext/</span></code> during the build process and can be
accessed at runtime using <code class="docutils literal"><span class="pre">SAGE_EXTCODE</span></code>.  For example, if <code class="docutils literal"><span class="pre">file</span></code> is placed
in <code class="docutils literal"><span class="pre">SAGE_ROOT/src/ext/directory/</span></code> it can be accessed with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.env</span> <span class="k">import</span> <span class="n">SAGE_EXTCODE</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">SAGE_EXTCODE</span><span class="p">,</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">SAGE_EXTCODE</span></code> is used because not all distributions have <code class="docutils literal"><span class="pre">SAGE_ROOT</span></code>.</p>
</div>
<div class="section" id="learn-by-copy-paste">
<h2>Learn by copy/paste<a class="headerlink" href="#learn-by-copy-paste" title="Permalink to this headline">¶</a></h2>
<p>For all of the conventions discussed here, you can find many examples
in the Sage library.  Browsing through the code is helpful, but so is
searching: the functions <code class="docutils literal"><span class="pre">search_src</span></code>, <code class="docutils literal"><span class="pre">search_def</span></code>, and
<code class="docutils literal"><span class="pre">search_doc</span></code> are worth knowing about.  Briefly, from the “sage:”
prompt, <code class="docutils literal"><span class="pre">search_src(string)</span></code> searches Sage library code for the
string <code class="docutils literal"><span class="pre">string</span></code>. The command <code class="docutils literal"><span class="pre">search_def(string)</span></code> does a similar
search, but restricted to function definitions, while
<code class="docutils literal"><span class="pre">search_doc(string)</span></code> searches the Sage documentation.  See their
docstrings for more information and more options.</p>
</div>
<div class="section" id="headings-of-sage-library-code-files">
<h2>Headings of Sage Library Code Files<a class="headerlink" href="#headings-of-sage-library-code-files" title="Permalink to this headline">¶</a></h2>
<p>The top of each Sage code file should follow this format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&lt;Very short 1-line summary&gt;</span>

<span class="sd">&lt;Paragraph description&gt;</span>

<span class="sd">EXAMPLES::</span>

<span class="sd">&lt;Lots and lots of examples&gt;</span>

<span class="sd">AUTHORS:</span>

<span class="sd">- YOUR NAME (2005-01-03): initial version</span>

<span class="sd">- person (date in ISO year-month-day format): short desc</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># ****************************************************************************</span>
<span class="c1">#       Copyright (C) 2013 YOUR NAME &lt;your email&gt;</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 2 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#                  https://www.gnu.org/licenses/</span>
<span class="c1"># ****************************************************************************</span>
</pre></div>
</div>
<p>As an example, see <code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage/rings/integer.pyx</span></code>, which contains the
implementation for <span class="math">\(\ZZ\)</span>. The names of the people who made major contributions
to the file appear in the <code class="docutils literal"><span class="pre">AUTHORS</span></code> section. You can add your name to the
list if you belong to the people, but refrain from being verbose in the
description. The <code class="docutils literal"><span class="pre">AUTHORS</span></code> section shows very rough overview of the history,
especially if a lot of people have been working on that source file. The
authoritative log for who wrote what is always the git repository (see the
output of <code class="docutils literal"><span class="pre">git</span> <span class="pre">blame</span></code>).</p>
<p>All code included with Sage must be licensed under the GPLv2+ or a
compatible, that is, less restrictive license (e.g. the BSD license).</p>
</div>
<div class="section" id="documentation-strings">
<span id="section-docstrings"></span><h2>Documentation Strings<a class="headerlink" href="#documentation-strings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-docstring-of-a-function-content">
<span id="section-docstring-function"></span><h3>The docstring of a function: content<a class="headerlink" href="#the-docstring-of-a-function-content" title="Permalink to this headline">¶</a></h3>
<p><strong>Every</strong> function must have a docstring that includes the following
information. You can use the existing functions of Sage as templates.</p>
<ul>
<li><p class="first">A <strong>one-sentence description</strong> of the function.</p>
<p>It must be followed by a blank line and end in a period. It describes the
function or method’s effect as a command (“Do this”, “Return that”), not as
a description like “Returns the pathname …”.</p>
<p>For methods of a class, it is recommended to refer to the <code class="docutils literal"><span class="pre">self</span></code> argument
in a descriptive way, unless this leads to a confusion. For example, if
<code class="docutils literal"><span class="pre">self</span></code> is an integer, then <code class="docutils literal"><span class="pre">this</span> <span class="pre">integer</span></code> or <code class="docutils literal"><span class="pre">the</span> <span class="pre">integer</span></code> is more
descriptive, and it is preferable to write</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>Return whether this integer is prime.
</pre></div>
</div>
</li>
<li><p class="first">A <strong>longer description</strong>.</p>
<p>This is optional if the one-sentence description does not need
more explanations.</p>
<p>Start with assumptions of the object, if there are any. For example,</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>The poset is expected to be ranked.
</pre></div>
</div>
<p>if the function raises an exception when called on a non-ranked poset.</p>
<p>Define your terms</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>The lexicographic product of <span class="nv">`G`</span> and <span class="nv">`H`</span> is the graph with vertex set ...
</pre></div>
</div>
<p>and mention possible aliases</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>The tensor product is also known as the categorical product and ...
</pre></div>
</div>
</li>
<li><p class="first">An <strong>INPUT</strong> and an <strong>OUTPUT</strong> block describing the input/output of
the function.</p>
<p>The INPUT block describes all arguments that the function accepts.</p>
<ol class="arabic simple">
<li>The type names should be descriptive, but do not have to represent
the exact Sage/Python types. For example, use “integer” for
anything that behaves like an integer, rather than <code class="docutils literal"><span class="pre">int</span></code>.</li>
<li>Mention the default values of the input arguments when applicable.</li>
</ol>
<div class="highlight-rest"><div class="highlight"><pre><span></span>INPUT:

<span class="m">-</span> <span class="s">``n``</span> -- integer

<span class="m">-</span> <span class="s">``p``</span> -- prime integer (default: <span class="nv">`2`</span>); coprime with <span class="s">``n``</span>
</pre></div>
</div>
<p>The OUTPUT block describes the expected output. This is required if the
one-sentence description of the function needs more explanation.</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>OUTPUT: the plaintext decrypted from the ciphertext <span class="s">``C``</span>
</pre></div>
</div>
<p>It is often the case that the output consists of several items.</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>OUTPUT: a tuple of

<span class="m">-</span> the reduced echelon form <span class="nv">`H`</span> of the matrix <span class="nv">`A`</span>

<span class="m">-</span> the transformation matrix <span class="nv">`U`</span> such that <span class="nv">`UA = H`</span>
</pre></div>
</div>
<p>You are recommended to be verbose enough for complicated outputs.</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>OUTPUT:

The decomposition of the free module on which this matrix <span class="nv">`A`</span> acts from
the right (i.e., the action is <span class="nv">`x`</span> goes to <span class="nv">`xA`</span>), along with whether
this matrix acts irreducibly on each factor. The factors are guaranteed
to be sorted in the same way as the corresponding factors of the
characteristic polynomial.
</pre></div>
</div>
</li>
<li><p class="first">An <strong>EXAMPLES</strong> block for examples. This is not optional.</p>
<p>These examples are used for documentation, but they are also
tested before each release just like TESTS block.</p>
<p>They should have good coverage of the functionality in question.</p>
</li>
<li><p class="first">A <strong>SEEALSO</strong> block (highly recommended) with links to related parts of
Sage. This helps users find the features that interest them and discover
the new ones.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>.. SEEALSO::

    :ref:`chapter-sage_manuals_links`,
    :meth:`sage.somewhere.other_useful_method`,
    :mod:`sage.some.related.module`.
</pre></div>
</div>
<p>See <a class="reference internal" href="sage_manuals.html#chapter-sage-manuals-links"><span class="std std-ref">Hyperlinks</span></a> for details on how to setup
link in Sage.</p>
</li>
<li><p class="first">An <strong>ALGORITHM</strong> block (optional).</p>
<p>It indicates what algorithm and/or what software is used, e.g.
<code class="docutils literal"><span class="pre">ALGORITHM:</span> <span class="pre">Uses</span> <span class="pre">Pari</span></code>. Here’s a longer example with a
bibliographical reference:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>ALGORITHM:

The following algorithm is adapted from page 89 of [Nat2000]_.

Let `p` be an odd (positive) prime and let `g` be a generator
modulo `p`. Then `g^k` is a generator modulo `p` if and only if
`\gcd(k, p-1) = 1`. Since `p` is an odd prime and positive, then
`p - 1` is even so that any even integer between 1 and `p - 1`,
inclusive, is not relatively prime to `p - 1`. We have now
narrowed our search to all odd integers `k` between 1 and `p - 1`,
inclusive.

So now start with a generator `g` modulo an odd (positive) prime
`p`. For any odd integer `k` between 1 and `p - 1`, inclusive,
`g^k` is a generator modulo `p` if and only if `\gcd(k, p-1) = 1`.
</pre></div>
</div>
<p>The bibliographical reference should go in Sage’s master
bibliography file,
<code class="file docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/reference/references/index.rst</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="p">[</span><span class="n">Nat2000</span><span class="p">]</span> \<span class="n">M</span><span class="o">.</span> <span class="n">B</span><span class="o">.</span> <span class="n">Nathanson</span><span class="o">.</span> <span class="n">Elementary</span> <span class="n">Methods</span> <span class="ow">in</span> <span class="n">Number</span> <span class="n">Theory</span><span class="o">.</span>
   <span class="n">Springer</span><span class="p">,</span> <span class="mf">2000.</span>
</pre></div>
</div>
</li>
<li><p class="first">A <strong>NOTE</strong> block for tips/tricks (optional).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">NOTE</span><span class="p">::</span>

    <span class="n">You</span> <span class="n">should</span> <span class="n">note</span> <span class="n">that</span> <span class="n">this</span> <span class="n">sentence</span> <span class="ow">is</span> <span class="n">indented</span> <span class="n">at</span> <span class="n">least</span> <span class="mi">4</span>
    <span class="n">spaces</span><span class="o">.</span> <span class="n">Never</span> <span class="n">use</span> <span class="n">the</span> <span class="n">tab</span> <span class="n">character</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p class="first">A <strong>WARNING</strong> block for critical information about your code (optional).</p>
<p>For example known situations for which the code breaks, or anything
that the user should be aware of.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">WARNING</span><span class="p">::</span>

    <span class="n">Whenever</span> <span class="n">you</span> <span class="n">edit</span> <span class="n">the</span> <span class="n">Sage</span> <span class="n">documentation</span><span class="p">,</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">that</span>
    <span class="n">the</span> <span class="n">edited</span> <span class="n">version</span> <span class="n">still</span> <span class="n">builds</span><span class="o">.</span> <span class="n">That</span> <span class="ow">is</span><span class="p">,</span> <span class="n">you</span> <span class="n">need</span> <span class="n">to</span> <span class="n">ensure</span>
    <span class="n">that</span> <span class="n">you</span> <span class="n">can</span> <span class="n">still</span> <span class="n">build</span> <span class="n">the</span> <span class="n">HTML</span> <span class="ow">and</span> <span class="n">PDF</span> <span class="n">versions</span> <span class="n">of</span> <span class="n">the</span>
    <span class="n">updated</span> <span class="n">documentation</span><span class="o">.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">edited</span> <span class="n">documentation</span> <span class="n">fails</span> <span class="n">to</span>
    <span class="n">build</span><span class="p">,</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">likely</span> <span class="n">that</span> <span class="n">you</span> <span class="n">would</span> <span class="n">be</span> <span class="n">requested</span> <span class="n">to</span>
    <span class="n">change</span> <span class="n">your</span> <span class="n">patch</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p class="first">A <strong>TODO</strong> block for future improvements (optional).</p>
<p>It can contain disabled doctests to demonstrate the desired
feature. Here’s an example of a TODO block:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>.. TODO::

    Add to ``have_fresh_beers`` an interface with the faster
    algorithm &quot;Buy a Better Fridge&quot; (BaBF)::

        sage: have_fresh_beers(&#39;Bière de l\&#39;Yvette&#39;, algorithm=&quot;BaBF&quot;) # not implemented
        Enjoy !
</pre></div>
</div>
</li>
<li><p class="first">A <strong>PLOT</strong> block to illustrate with pictures the output of a function.</p>
<p>Generate with Sage code an object <code class="docutils literal"><span class="pre">g</span></code> with a <code class="docutils literal"><span class="pre">.plot</span></code> method, then call
<code class="docutils literal"><span class="pre">sphinx_plot(g)</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">PLOT</span><span class="p">::</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">graphs</span><span class="o">.</span><span class="n">PetersenGraph</span><span class="p">()</span>
    <span class="n">sphinx_plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">A <strong>REFERENCES</strong> block to list related books or papers (optional).</p>
<p>Almost all bibliographic information should be put in the master bibliography
file, see below. Citations will then link to the master bibliography where
the reader can find the bibliographic details (see below for citation
syntax).  REFERENCE blocks in individual docstrings are therefore usually not
necessary.</p>
<p>Nevertheless, a REFERENCE block can be useful if there are relevant sources
which are not explicitly mentioned in the docstring or if the docstring is
particularly long. In that case, add the bibliographic information to the
master bibliography file, if not already present, and add a reference block
to your docstring as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">REFERENCES</span><span class="p">:</span>

<span class="n">For</span> <span class="n">more</span> <span class="n">information</span><span class="p">,</span> <span class="n">see</span> <span class="p">[</span><span class="n">Str1969</span><span class="p">]</span><span class="n">_</span><span class="p">,</span> <span class="ow">or</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">references</span><span class="p">:</span>

<span class="o">-</span> <span class="p">[</span><span class="n">Sto2000</span><span class="p">]</span><span class="n">_</span>

<span class="o">-</span> <span class="p">[</span><span class="n">Voe2003</span><span class="p">]</span><span class="n">_</span>
</pre></div>
</div>
<p>Note the trailing underscores which makes the citations into hyperlinks. See
below for more about the master bibliography file. For more about citations,
see the <a class="reference external" href="http://www.sphinx-doc.org/rest.html#citations">Sphinx/reST markup for citations</a>. For links to trac tickets
or wikipedia, see <a class="reference internal" href="sage_manuals.html#chapter-sage-manuals-links"><span class="std std-ref">Hyperlinks</span></a>.</p>
</li>
<li><p class="first">A <strong>TESTS</strong> block (highly recommended).</p>
<p>Formatted just like EXAMPLES, containing tests that are not relevant
to users.  In particular, these blocks are not shown when users ask
for help via <code class="docutils literal"><span class="pre">foo?</span></code>: they are stripped by the function
<a class="reference external" href="../reference/misc/sage/misc/sagedoc.html#sage.misc.sagedoc.skip_TESTS_block" title="(in Sage Reference Manual: Utilities v8.2)"><code class="xref py py-func docutils literal"><span class="pre">sage.misc.sagedoc.skip_TESTS_block()</span></code></a>.</p>
<p>Special and corner cases, like number zero, one-element group etc.
should usually go to this block. This is also right place for most
tests of input validation; for example if the function accepts
<code class="docutils literal"><span class="pre">direction='up'</span></code> and <code class="docutils literal"><span class="pre">direction='down'</span></code>, you can use this block to check
that <code class="docutils literal"><span class="pre">direction='junk'</span></code> raises an exception.</p>
<p>For the purposes of removal, A “TESTS” block is a block starting
with “TEST:” or “TESTS:” (or the same with two colons), on a line on
its own, and ending either with a line indented less than “TESTS”,
or with a line with the same level of indentation – not more –
matching one of the following:</p>
<ul class="simple">
<li>a Sphinx directive of the form “.. foo:”, optionally followed by
other text.</li>
<li>text of the form “UPPERCASE:”, optionally followed by other
text.</li>
<li>lines which look like a reST header: one line containing
anything, followed by a line consisting only of whitespace,
followed by a string of hyphens, equal signs, or other
characters which are valid markers for reST
headers: <code class="docutils literal"><span class="pre">-</span> <span class="pre">=</span> <span class="pre">`</span> <span class="pre">:</span> <span class="pre">'</span> <span class="pre">&quot;</span> <span class="pre">~</span> <span class="pre">_</span> <span class="pre">^</span> <span class="pre">*</span> <span class="pre">+</span> <span class="pre">#</span> <span class="pre">&lt;</span> <span class="pre">&gt;</span></code>.</li>
</ul>
</li>
</ul>
<div class="section" id="note-about-sphinx-directives-vs-other-blocks">
<h4>Note about Sphinx directives vs. other blocks<a class="headerlink" href="#note-about-sphinx-directives-vs-other-blocks" title="Permalink to this headline">¶</a></h4>
<p>The main Sphinx directives that are used in Sage are:</p>
<p><code class="docutils literal"><span class="pre">..</span> <span class="pre">MATH::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">NOTE::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">PLOT::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">RUBRIC::</span></code>,
<code class="docutils literal"><span class="pre">..</span> <span class="pre">SEEALSO::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">TODO::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">TOPIC::</span></code> and <code class="docutils literal"><span class="pre">..</span> <span class="pre">WARNING::</span></code>.</p>
<p>They must be written exactly as above, so for example
<code class="docutils literal"><span class="pre">WARNING::</span></code> or <code class="docutils literal"><span class="pre">..</span> <span class="pre">WARNING</span> <span class="pre">::</span></code> will not work.</p>
<p>Some other directives are also available, but less frequently used, namely:</p>
<p><code class="docutils literal"><span class="pre">..</span> <span class="pre">MODULEAUTHOR::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">automethod::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">autofunction::</span></code>,
<code class="docutils literal"><span class="pre">..</span> <span class="pre">image::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">figure::</span></code>.</p>
<p>Other blocks shall not be used as directives; for example
<code class="docutils literal"><span class="pre">..</span> <span class="pre">ALGORITHM::</span></code> will not be shown at all.</p>
</div>
<div class="section" id="sage-documentation-style">
<h4>Sage documentation style<a class="headerlink" href="#sage-documentation-style" title="Permalink to this headline">¶</a></h4>
<p>All Sage documentation is written in reStructuredText (reST) and is
processed by Sphinx. See <a class="reference external" href="http://www.sphinx-doc.org/rest.html">http://www.sphinx-doc.org/rest.html</a> for an
introduction. Sage imposes these styles:</p>
<ul>
<li><p class="first">Lines should be shorter than 80 characters. If in doubt, read <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#maximum-line-length">PEP8: Maximum
Line Length</a>.</p>
</li>
<li><p class="first">All reST and Sphinx directives (like <code class="docutils literal"><span class="pre">..</span> <span class="pre">WARNING::</span></code>, <code class="docutils literal"><span class="pre">..</span> <span class="pre">NOTE::</span></code>,
<code class="docutils literal"><span class="pre">..</span> <span class="pre">MATH::</span></code>, etc.) are written in uppercase.</p>
</li>
<li><p class="first">Code fragments are quoted with double backticks. This includes function
arguments and the Python literals like <code class="docutils literal"><span class="pre">``True``</span></code>, <code class="docutils literal"><span class="pre">``False``</span></code> and
<code class="docutils literal"><span class="pre">``None``</span></code>. For example:</p>
<div class="highlight-rest"><div class="highlight"><pre><span></span>If <span class="s">``check``</span> is <span class="s">``True``</span>, then ...
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="sage-s-master-bibliography-file">
<h4>Sage’s master <strong>BIBLIOGRAPHY</strong> file<a class="headerlink" href="#sage-s-master-bibliography-file" title="Permalink to this headline">¶</a></h4>
<p>All bibliographical references should be stored in the master
bibliography file,
<code class="file docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/reference/references/index.rst</span></code>, in the
format</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>.. [Gau1801] \C. F. Gauss, *Disquisitiones Arithmeticae*, 1801.

.. [RSA1978] \R. Rivest, A. Shamir, L. Adleman,
             &quot;A Method for Obtaining Digital Signatures and
             Public-Key Cryptosystems&quot;.
             Communications of the ACM **21** (February 1978),
             120–126. :doi:`10.1145/359340.359342`.
</pre></div>
</div>
<p>The part in brackets is the citation key: given these examples, you
could then use <code class="docutils literal"><span class="pre">[Gau1801]_</span></code> in a docstring to provide a link to the
first reference. Note the trailing underscore which makes the citation a
hyperlink.</p>
<p>When possible, the key should have this form: for a single author, use the
first three letters of the family name followed by the year; for multiple
authors, use the first letter of each of the family names followed by the
year. Note that the year should be four digits, not just the last two – Sage
already has references from both 1910 and 2010, for example.</p>
<p>When abbreviating the first name of an author in a bibliography
listing, be sure to put a backslash in front of it. This ensures
that the letter (<code class="docutils literal"><span class="pre">C.</span></code> in the example above) will not be
interpreted as a list enumerator.</p>
<p>For more about citations, see the <a class="reference external" href="http://www.sphinx-doc.org/rest.html#citations">Sphinx/reST markup for citations</a>.</p>
</div>
<div class="section" id="template">
<h4>Template<a class="headerlink" href="#template" title="Permalink to this headline">¶</a></h4>
<p>Use the following template when documenting functions. Note the
indentation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the point `(x^5,y)`.</span>

<span class="sd">    INPUT:</span>

<span class="sd">    - ``x`` -- integer (default: `1`); the description of the</span>
<span class="sd">      argument ``x`` goes here. If it contains multiple lines, all</span>
<span class="sd">      the lines after the first need to begin at the same indentation</span>
<span class="sd">      as the backtick.</span>

<span class="sd">    - ``y`` -- integer (default: `2`); the description of the</span>
<span class="sd">      argument ``y``</span>

<span class="sd">    OUTPUT: the point as a tuple</span>

<span class="sd">    EXAMPLES:</span>

<span class="sd">    This example illustrates ... ::</span>

<span class="sd">        sage: A = ModuliSpace()</span>
<span class="sd">        sage: A.point(2,3)</span>
<span class="sd">        xxx</span>

<span class="sd">    We now ... ::</span>

<span class="sd">        sage: B = A.point(5,6)</span>
<span class="sd">        sage: xxx</span>

<span class="sd">    It is an error to ... ::</span>

<span class="sd">        sage: C = A.point(&#39;x&#39;,7)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        TypeError: unable to convert &#39;r&#39; to an integer</span>

<span class="sd">    .. NOTE::</span>

<span class="sd">        This function uses the algorithm of [BCDT2001]_ to determine</span>
<span class="sd">        whether an elliptic curve `E` over `Q` is modular.</span>

<span class="sd">    ...</span>

<span class="sd">    .. SEEALSO::</span>

<span class="sd">        :func:`line`</span>

<span class="sd">    TESTS::</span>

<span class="sd">        sage: A.point(42, 0)  # Check for corner case y=0</span>
<span class="sd">        xxx</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">&lt;</span><span class="n">body</span> <span class="n">of</span> <span class="n">the</span> <span class="n">function</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The master bibliography file would contain</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="p">[</span><span class="n">BCDT2001</span><span class="p">]</span> <span class="n">Breuil</span><span class="p">,</span> <span class="n">Conrad</span><span class="p">,</span> <span class="n">Diamond</span><span class="p">,</span> <span class="n">Taylor</span><span class="p">,</span>
              <span class="s2">&quot;Modularity ....&quot;</span>
</pre></div>
</div>
<p>You are strongly encouraged to:</p>
<ul>
<li><p class="first">Use LaTeX typesetting (see <a class="reference internal" href="#section-latex-typeset"><span class="std std-ref">LaTeX Typesetting</span></a>).</p>
</li>
<li><p class="first">Liberally describe what the examples do.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There must be a blank line after the example code and before the
explanatory text for the next example (indentation is not enough).</p>
</div>
</li>
<li><p class="first">Illustrate the exceptions raised by the function with examples (as
given above: “It is an error to [..]”, …)</p>
</li>
<li><p class="first">Include many examples.</p>
<p>They are helpful for the users, and are crucial for the quality and
adaptability of Sage. Without such examples, small changes to one part
of Sage that break something else might not go seen until much later
when someone uses the system, which is unacceptable.</p>
</li>
</ul>
</div>
<div class="section" id="private-functions">
<h4>Private functions<a class="headerlink" href="#private-functions" title="Permalink to this headline">¶</a></h4>
<p>Functions whose names start with an underscore are considered
private. They do not appear in the reference manual, and their docstring
should not contain any information that is crucial for Sage users. You
can make their docstrings be part of the documentation of another
method. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">SageObject</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;usual docstring&gt;</span>

<span class="sd">        .. automethod:: _f</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_f</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         This would be hidden without the ``.. automethod::``</span>
<span class="sd">         &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Private functions should contain an EXAMPLES (or TESTS) block.</p>
<p>A special case is the constructor <code class="docutils literal"><span class="pre">__init__</span></code>: due to its special
status the <code class="docutils literal"><span class="pre">__init__</span></code> docstring is used as the class docstring if
there is not one already. That is, you can do the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">SageObject</span><span class="p">):</span>
<span class="go">....:     # no class docstring</span>
<span class="go">....:     def __init__(self):</span>
<span class="go">....:         &quot;&quot;&quot;Construct a Foo.&quot;&quot;&quot;</span>
<span class="gp">sage: </span><span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdoc</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>              <span class="c1"># class docstring</span>
<span class="go">&#39;Construct a Foo.\n&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="fm">__init__</span><span class="p">)</span>     <span class="c1"># constructor docstring</span>
<span class="go">&#39;Construct a Foo.\n&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="latex-typesetting">
<span id="section-latex-typeset"></span><h3>LaTeX Typesetting<a class="headerlink" href="#latex-typesetting" title="Permalink to this headline">¶</a></h3>
<p>In Sage’s documentation LaTeX code is allowed and is marked with <strong>backticks or
dollar signs</strong>:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">`x^2</span> <span class="pre">+</span> <span class="pre">y^2</span> <span class="pre">=</span> <span class="pre">1`</span></code> and <code class="docutils literal"><span class="pre">$x^2</span> <span class="pre">+</span> <span class="pre">y^2</span> <span class="pre">=</span> <span class="pre">1$</span></code> both yield <span class="math">\(x^2 + y^2 = 1\)</span>.</div></blockquote>
<p><strong>Backslashes:</strong> For LaTeX commands containing backslashes, either use double
backslashes or begin the docstring with a <code class="docutils literal"><span class="pre">r&quot;&quot;&quot;</span></code> instead of <code class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></code>. Both of
the following are valid:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cos</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return `\\cos(x)`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">sin</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return $\sin(x)$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>MATH block:</strong> This is similar to the LaTeX syntax <code class="docutils literal"><span class="pre">\[&lt;math</span> <span class="pre">expression&gt;\]</span></code>
(or <code class="docutils literal"><span class="pre">$$&lt;math</span> <span class="pre">expression&gt;$$</span></code>). For instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">MATH</span><span class="p">::</span>

    \<span class="n">sum_</span><span class="p">{</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">}</span><span class="o">^</span><span class="p">{</span>\<span class="n">infty</span><span class="p">}</span> <span class="p">(</span><span class="n">a_1</span> <span class="n">a_2</span> \<span class="n">cdots</span> <span class="n">a_i</span><span class="p">)</span><span class="o">^</span><span class="p">{</span><span class="mi">1</span><span class="o">/</span><span class="n">i</span><span class="p">}</span>
    \<span class="n">leq</span>
    <span class="n">e</span> \<span class="n">sum_</span><span class="p">{</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">}</span><span class="o">^</span><span class="p">{</span>\<span class="n">infty</span><span class="p">}</span> <span class="n">a_i</span>
</pre></div>
</div>
<div class="math">
\[\sum_{i=1}^{\infty} (a_1 a_2 \cdots a_i)^{1/i}
\leq
e \sum_{i=1}^{\infty} a_i\]</div>
<p>The <strong>aligned</strong> environment works as it does in LaTeX:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">MATH</span><span class="p">::</span>

    \<span class="n">begin</span><span class="p">{</span><span class="n">aligned</span><span class="p">}</span>
     <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">=</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span> \\
     <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">=</span> <span class="n">x</span><span class="o">^</span><span class="n">x</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
    \<span class="n">end</span><span class="p">{</span><span class="n">aligned</span><span class="p">}</span>
</pre></div>
</div>
<div class="math">
\[\begin{split}\begin{aligned}
 f(x) &amp; = x^2 - 1 \\
 g(x) &amp; = x^x - f(x - 2)
\end{aligned}\end{split}\]</div>
<p>When building the PDF documentation, everything is translated to LaTeX
and each MATH block is automatically wrapped in a math environment –
in particular, it is turned into <code class="docutils literal"><span class="pre">\begin{gather}</span> <span class="pre">block</span>
<span class="pre">\end{gather}</span></code>.  So if you want to use a LaTeX environment (like
<code class="docutils literal"><span class="pre">align</span></code>) which in ordinary LaTeX would not be wrapped like this, you
must add a <strong>:nowrap:</strong> flag to the MATH mode. See also <a class="reference external" href="http://sphinx-doc.org/latest/ext/math.html?highlight=nowrap#directive-math">Sphinx’s
documentation for math blocks</a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">MATH</span><span class="p">::</span>
   <span class="p">:</span><span class="n">nowrap</span><span class="p">:</span>

   \<span class="n">begin</span><span class="p">{</span><span class="n">align</span><span class="p">}</span>
      <span class="mi">1</span><span class="o">+...+</span><span class="n">n</span> <span class="o">&amp;=</span> <span class="n">n</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>\\
      <span class="o">&amp;=</span> <span class="n">O</span><span class="p">(</span><span class="n">n</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>\\
   \<span class="n">end</span><span class="p">{</span><span class="n">tabular</span><span class="p">}</span>
</pre></div>
</div>
<div class="math">
\begin{align}
1+...+n &amp;= n(n+1)/2\\
&amp;= O(n^2)\\
\end{align}</div><p><strong>Readability balance:</strong> in the interactive console, LaTeX formulas contained
in the documentation are represented by their LaTeX code (with backslashes
stripped). In this situation <code class="docutils literal"><span class="pre">\\frac{a}{b}</span></code> is less readable than <code class="docutils literal"><span class="pre">a/b</span></code> or
<code class="docutils literal"><span class="pre">a</span> <span class="pre">b^{-1}</span></code> (some users may not even know LaTeX code). Make it pleasant for
everybody as much as you can manage.</p>
<p><strong>Commons rings</strong> <span class="math">\((\Bold{Z},\Bold{N},...)\)</span>: The Sage LaTeX style is to typeset
standard rings and fields using the locally-defined macro <code class="docutils literal"><span class="pre">\\Bold</span></code> (e.g.
<code class="docutils literal"><span class="pre">\\Bold{Z}</span></code> gives <span class="math">\(\Bold{Z}\)</span>).</p>
<p><strong>Shortcuts</strong> are available which preserve readability, e.g. <code class="docutils literal"><span class="pre">\\ZZ</span></code> (<span class="math">\(\ZZ\)</span>),
<code class="docutils literal"><span class="pre">\\RR</span></code> (<span class="math">\(\RR\)</span>), <code class="docutils literal"><span class="pre">\\CC</span></code> (<span class="math">\(\CC\)</span>), and <code class="docutils literal"><span class="pre">\\QQ</span></code> (<span class="math">\(\QQ\)</span>). They appear as
LaTeX-formatted <code class="docutils literal"><span class="pre">\\Bold{Z}</span></code> in the html manual, and as <code class="docutils literal"><span class="pre">Z</span></code> in the
interactive help. Other examples: <code class="docutils literal"><span class="pre">\\GF{q}</span></code> (<span class="math">\(\GF{q}\)</span>) and <code class="docutils literal"><span class="pre">\\Zmod{p}</span></code>
(<span class="math">\(\Zmod{p}\)</span>).</p>
<p>See the file <code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage/misc/latex_macros.py</span></code> for a full list and
for details about how to add more macros.</p>
</div>
<div class="section" id="writing-testable-examples">
<span id="section-doctest-writing"></span><h3>Writing Testable Examples<a class="headerlink" href="#writing-testable-examples" title="Permalink to this headline">¶</a></h3>
<p>The examples from Sage’s documentation have a double purpose:</p>
<ul class="simple">
<li>They provide <strong>illustrations</strong> of the code’s usage to the users</li>
<li>They are <strong>tests</strong> that are checked before each release, helping us avoid
new bugs.</li>
</ul>
<p>All new doctests added to Sage should <strong>pass all tests</strong> (see
<a class="reference internal" href="doctesting.html#chapter-doctesting"><span class="std std-ref">Running Sage’s doctests</span></a>), i.e. running <code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">your_file.py</span></code> should not
give any error messages. Below are instructions about how doctests should be
written.</p>
<p><strong>What doctests should test:</strong></p>
<ul>
<li><p class="first"><strong>Interesting examples</strong> of what the function can do. This will be the
most helpful to a lost user. It is also the occasion to check famous
theorems (just in case):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">is_prime</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># 6 is not prime</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="c1"># and here is a proof</span>
<span class="go">6</span>
</pre></div>
</div>
</li>
<li><p class="first">All <strong>meaningful combinations</strong> of input arguments. For example a function
may accept an <code class="docutils literal"><span class="pre">algorithm=&quot;B&quot;</span></code> argument, and doctests should involve both
<code class="docutils literal"><span class="pre">algorithm=&quot;A&quot;</span></code> and <code class="docutils literal"><span class="pre">algorithm=&quot;B&quot;</span></code>.</p>
</li>
<li><p class="first"><strong>Corner cases:</strong> the code should be able to handle a 0 input, or an empty
set, or a null matrix, or a null function, … All corner cases should be
checked, as they are the most likely to be broken, now or in the future. This
probably belongs to the TESTS block (see <a class="reference internal" href="#section-docstring-function"><span class="std std-ref">The docstring of a function: content</span></a>).</p>
</li>
<li><p class="first"><strong>Systematic tests</strong> of all small-sized inputs, or tests of <strong>random</strong>
instances if possible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that <strong>TestSuites</strong> are an automatic way to generate some of these
tests in specific situations. See
<code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage/misc/sage_unittest.py</span></code>.</p>
</div>
</li>
</ul>
<p><strong>The syntax:</strong></p>
<ul>
<li><p class="first"><strong>Environment:</strong> doctests should work if you copy/paste them in Sage’s
interactive console. For example, the function <code class="docutils literal"><span class="pre">AA()</span></code> in the file
<code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage/algebras/steenrod/steenrod_algebra.py</span></code> includes an
EXAMPLES block containing the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.algebras.steenrod.steenrod_algebra</span> <span class="kn">import</span> <span class="n">AA</span> <span class="k">as</span> <span class="n">A</span>
<span class="gp">sage: </span><span class="n">A</span><span class="p">()</span>
<span class="go">mod 2 Steenrod algebra, milnor basis</span>
</pre></div>
</div>
<p>Sage does not know about the function <code class="docutils literal"><span class="pre">AA()</span></code> by default, so it needs to be
imported before it is tested. Hence the first line in the example.</p>
</li>
<li><p class="first"><strong>Preparsing:</strong> As in Sage’s console, <span class="math">\(4/3\)</span> returns <span class="math">\(4/3\)</span> and not <span class="math">\(1\)</span> as in
Python 2.7. Testing occurs with full Sage preparsing of input within the
standard Sage shell environment, as described in <a class="reference internal" href="coding_in_python.html#section-preparsing"><span class="std std-ref">Sage Preparsing</span></a>.</p>
</li>
<li><p class="first"><strong>Writing files:</strong> If a test outputs to a file, the file should be a
temporary file.  Use <a class="reference external" href="../reference/misc/sage/misc/temporary_file.html#sage.misc.temporary_file.tmp_filename" title="(in Sage Reference Manual: Utilities v8.2)"><code class="xref py py-func docutils literal"><span class="pre">tmp_filename()</span></code></a> to get a temporary filename, or
<a class="reference external" href="../reference/misc/sage/misc/temporary_file.html#sage.misc.temporary_file.tmp_dir" title="(in Sage Reference Manual: Utilities v8.2)"><code class="xref py py-func docutils literal"><span class="pre">tmp_dir()</span></code></a> to get a temporary directory. An example from
<code class="docutils literal"><span class="pre">SAGE_ROOT/src/sage/plot/graphics.py</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.png&#39;</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Multiline doctests:</strong> You may write tests that span multiple lines, using
the line continuation marker <code class="docutils literal"><span class="pre">....:</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
<span class="go">....:     if n.is_prime():</span>
<span class="go">....:         print(n)</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">5</span>
<span class="go">7</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Python3 print:</strong> even if Python2 syntax for print can still be
used in your own code for the moment, Python3 syntax for print must
be used in Sage code and doctests. If you use an old-style print in
doctests, it will raise a SyntaxError:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">print</span> <span class="s2">&quot;not like that&quot;</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">SyntaxError</span>: <span class="n">invalid syntax</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;but like this&quot;</span><span class="p">)</span>
<span class="go">but like this</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Split long lines:</strong> You may want to split long lines of code with a
backslash. Note: this syntax is non-standard and may be removed in the
future:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">123456789123456789123456789</span>\
<span class="go">....:     123456789123456789123456789</span>
<span class="gp">sage: </span><span class="n">n</span><span class="o">.</span><span class="n">is_prime</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Doctests flags:</strong> flags are available to change the behaviour of doctests:
see <a class="reference internal" href="#section-further-conventions"><span class="std std-ref">Special Markup to Influence Doctests</span></a>.</p>
</li>
</ul>
</div>
<div class="section" id="special-markup-to-influence-doctests">
<span id="section-further-conventions"></span><h3>Special Markup to Influence Doctests<a class="headerlink" href="#special-markup-to-influence-doctests" title="Permalink to this headline">¶</a></h3>
<p>Overly complicated output in the example code can be shortened
by an ellipsis marker <code class="docutils literal"><span class="pre">...</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="p">[</span><span class="n">ZZ</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">ordinal_str</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">)]</span>
<span class="go">[&#39;0th&#39;,</span>
<span class="go"> &#39;1st&#39;,</span>
<span class="go"> &#39;2nd&#39;,</span>
<span class="go"> &#39;3rd&#39;,</span>
<span class="go"> &#39;4th&#39;,</span>
<span class="go"> &#39;5th&#39;,</span>
<span class="go"> ...</span>
<span class="go"> &#39;21st&#39;,</span>
<span class="go"> &#39;22nd&#39;,</span>
<span class="go"> &#39;23rd&#39;,</span>
<span class="go"> &#39;24th&#39;]</span>
<span class="gp">sage: </span><span class="n">ZZ</span><span class="p">(</span><span class="s1">&#39;sage&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">unable to convert &#39;sage&#39; to an integer</span>
</pre></div>
</div>
<p>On the proper usage of the ellipsis marker, see <a class="reference external" href="https://docs.python.org/release/2.7.14/library/doctest.html#doctest.ELLIPSIS">Python’s documentation</a>.</p>
<p>There are a number of magic comments that you can put into the example
code that change how the output is verified by the Sage doctest
framework. Here is a comprehensive list:</p>
<ul>
<li><p class="first"><strong>random:</strong> The line will be executed, but its output will not be checked with
the output in the documentation string:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">CombinatorialObject</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="nb">hash</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># random</span>
<span class="go">1335416675971793195</span>
<span class="gp">sage: </span><span class="nb">hash</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># random</span>
<span class="go">This doctest passes too, as the output is not checked</span>
</pre></div>
</div>
<p>However, most functions generating pseudorandom output do not need this tag
since the doctesting framework guarantees the state of the pseudorandom
number generators (PRNGs) used in Sage for a given doctest.</p>
<p>When possible, avoid the problem, e.g.: rather than checking the value of the
hash in a doctest, one could illustrate successfully using it as a key in a
dict.</p>
</li>
<li><p class="first"><strong>long time:</strong> The line is only tested if the <code class="docutils literal"><span class="pre">--long</span></code> option is given, e.g.
<code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">--long</span> <span class="pre">f.py</span></code>.</p>
<p>Use it for doctests that take more than a second to run. No example should
take more than about 30 seconds:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">E</span><span class="o">.</span><span class="n">regulator</span><span class="p">()</span>        <span class="c1"># long time (1 second)</span>
<span class="go">0.0511114082399688</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>tol</strong> or <strong>tolerance:</strong> The numerical values returned by the line are only
verified to the given tolerance. It is useful when the output is subject to
numerical noise due to system-dependent (floating point arithmetic, math
libraries, …) or non-deterministic algorithms.</p>
<ul class="simple">
<li>This may be prefixed by <code class="docutils literal"><span class="pre">abs[olute]</span></code> or <code class="docutils literal"><span class="pre">rel[ative]</span></code> to specify whether
to measure <strong>absolute</strong> or <strong>relative</strong> error (see the
<a class="reference external" href="https://en.wikipedia.org/wiki/Approximation_error">Wikipedia article Approximation_error</a>).</li>
<li>If none of <code class="docutils literal"><span class="pre">abs/rel</span></code> is specified, the error is considered to be
<code class="docutils literal"><span class="pre">absolute</span></code> when the expected value is <strong>zero</strong>, and is <code class="docutils literal"><span class="pre">relative</span></code> for
<strong>nonzero</strong> values.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">n</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># abs tol 1e-9</span>
<span class="go">3.14159265358979</span>
<span class="gp">sage: </span><span class="n">n</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># rel tol 2</span>
<span class="go">6</span>
<span class="gp">sage: </span><span class="n">n</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># abs tol 1.41593</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">K</span><span class="o">.&lt;</span><span class="n">zeta8</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">CyclotomicField</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">N</span><span class="p">(</span><span class="n">zeta8</span><span class="p">)</span>  <span class="c1"># absolute tolerance 1e-10</span>
<span class="go">0.7071067812 + 0.7071067812*I</span>
</pre></div>
</div>
<p><strong>Multiple numerical values:</strong> the representation of complex numbers,
matrices, or polynomials usually involves several numerical values. If a
doctest with tolerance contains several numbers, each of them is checked
individually:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;The sum of 1 and 1 equals 5&quot;</span><span class="p">)</span>  <span class="c1"># abs tol 1</span>
<span class="go">The sum of 2 and 2 equals 4</span>
<span class="gp">sage: </span><span class="n">e</span><span class="o">^</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">n</span><span class="p">()</span> <span class="c1"># rel tol 1e-1</span>
<span class="go">0.7 + 0.7*I</span>
<span class="gp">sage: </span><span class="p">((</span><span class="n">x</span><span class="o">+</span><span class="mf">1.001</span><span class="p">)</span><span class="o">^</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">()</span> <span class="c1"># rel tol 2</span>
<span class="go">x^4 + 4*x^3 + 6*x^2 + 4*x + 1</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">random_matrix</span><span class="p">(</span><span class="n">RR</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">3</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">^</span><span class="mi">2</span> <span class="c1"># abs tol 1e-2</span>
<span class="go">[1 0 0]</span>
<span class="go">[0 1 0]</span>
<span class="go">[0 0 1]</span>
</pre></div>
</div>
<p>The values that the doctesting framework involves in the error computations
are defined by the regular expression <code class="docutils literal"><span class="pre">float_regex</span></code> in
<a class="reference external" href="../reference/doctest/sage/doctest/parsing.html#module-sage.doctest.parsing" title="(in Sage Reference Manual: Sage's Doctesting Framework v8.2)"><code class="xref py py-mod docutils literal"><span class="pre">sage.doctest.parsing</span></code></a>.</p>
</li>
<li><p class="first"><strong>not implemented</strong> or <strong>not tested:</strong> The line is never tested.</p>
<p>Use it for very long doctests that are only meant as documentation. It can
also be used for todo notes of what will eventually be implemented:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">factor</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>    <span class="c1"># todo: not implemented</span>
</pre></div>
</div>
<p>It is also immediately clear to the user that the indicated example
does not currently work.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Skip all doctests of a file/directory</p>
<ul class="simple">
<li><strong>file:</strong> If one of the first 10 lines of a file starts with any of
<code class="docutils literal"><span class="pre">r&quot;&quot;&quot;</span> <span class="pre">nodoctest</span></code> (or <code class="docutils literal"><span class="pre">&quot;&quot;&quot;</span> <span class="pre">nodoctest</span></code> or <code class="docutils literal"><span class="pre">#</span> <span class="pre">nodoctest</span></code> or <code class="docutils literal"><span class="pre">%</span>
<span class="pre">nodoctest</span></code> or <code class="docutils literal"><span class="pre">..</span> <span class="pre">nodoctest</span></code>, or any of these with different spacing),
then that file will be skipped.</li>
<li><strong>directory:</strong> If a directory contains a file <code class="docutils literal"><span class="pre">nodoctest.py</span></code>, then that
whole directory will be skipped.</li>
</ul>
<p class="last">Neither of this applies to files or directories which are explicitly given
as command line arguments: those are always tested.</p>
</div>
</li>
<li><p class="first"><strong>py2</strong> or <strong>py3:</strong> Run the line on Python 2 <em>only</em> or Python 3 <em>only</em>
respectively.  Generally this should be avoided as code should be tested on
both Python 2 and Python 3, but there are on occasion tests that are simply
inapplicable on one or the other, such as tests that rely on optional features
that are only available on one Python version or the other.</p>
</li>
<li><p class="first"><strong>optional:</strong> A line flagged with <code class="docutils literal"><span class="pre">optional</span> <span class="pre">-</span> <span class="pre">keyword</span></code> is not tested unless
the <code class="docutils literal"><span class="pre">--optional=keyword</span></code> flag is passed to <code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span></code> (see
<a class="reference internal" href="doctesting.html#section-optional-doctest-flag"><span class="std std-ref">Run Optional Doctests</span></a>). The main applications are:</p>
<ul>
<li><p class="first"><strong>optional packages:</strong> When a line requires an optional package to be
installed (e.g. the <code class="docutils literal"><span class="pre">sloane_database</span></code> package):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">SloaneEncyclopedia</span><span class="p">[</span><span class="mi">60843</span><span class="p">]</span>    <span class="c1"># optional - sloane_database</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>internet:</strong> For lines that require an internet connection:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sloane_sequence</span><span class="p">(</span><span class="mi">60843</span><span class="p">)</span>       <span class="c1"># optional - internet</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>bug:</strong> For lines that describe bugs. Alternatively, use <code class="docutils literal"><span class="pre">#</span> <span class="pre">known</span> <span class="pre">bug</span></code>
instead: it is an alias for <code class="docutils literal"><span class="pre">optional</span> <span class="pre">bug</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>The following should yield 4.  See :trac:`2`. ::

    sage: 2+2  # optional: bug
    5
    sage: 2+2  # known bug
    5
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Any words after <code class="docutils literal"><span class="pre">#</span> <span class="pre">optional</span></code> are interpreted as a list of
package names, separated by spaces.</li>
<li>Any punctuation (periods, commas, hyphens, semicolons, …) after the
first word ends the list of packages.  Hyphens or colons between the
word <code class="docutils literal"><span class="pre">optional</span></code> and the first package name are allowed.  Therefore,
you should not write <code class="docutils literal"><span class="pre">optional:</span> <span class="pre">needs</span> <span class="pre">package</span> <span class="pre">CHomP</span></code> but simply
<code class="docutils literal"><span class="pre">optional:</span> <span class="pre">CHomP</span></code>.</li>
<li>Optional tags are case-insensitive, so you could also write <code class="docutils literal"><span class="pre">optional:</span>
<span class="pre">chOMP</span></code>.</li>
</ul>
</div>
</li>
<li><p class="first"><strong>indirect doctest:</strong> in the docstring of a function <code class="docutils literal"><span class="pre">A(...)</span></code>, a line
calling <code class="docutils literal"><span class="pre">A</span></code> and in which the name <code class="docutils literal"><span class="pre">A</span></code> does not appear should have this
flag. This prevents <code class="docutils literal"><span class="pre">sage</span> <span class="pre">--coverage</span> <span class="pre">&lt;file&gt;</span></code> from reporting the docstring as
“not testing what it should test”.</p>
<p>Use it when testing special functions like <code class="docutils literal"><span class="pre">__repr__</span></code>, <code class="docutils literal"><span class="pre">__add__</span></code>,
etc. Use it also when you test the function by calling <code class="docutils literal"><span class="pre">B</span></code> which
internally calls <code class="docutils literal"><span class="pre">A</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>This is the docstring of an ``__add__`` method. The following
example tests it, but ``__add__`` is not written anywhere::

    sage: 1+1 # indirect doctest
    2
</pre></div>
</div>
</li>
<li><p class="first"><strong>32-bit</strong> or <strong>64-bit:</strong> for tests that behave differently on 32-bit or
64-bit machines. Note that this particular flag is to be applied on the
<strong>output</strong> lines, not the input lines:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">hash</span><span class="p">(</span><span class="o">-</span><span class="mi">920390823904823094890238490238484</span><span class="p">)</span>
<span class="go">-873977844            # 32-bit</span>
<span class="go">6874330978542788722   # 64-bit</span>
</pre></div>
</div>
</li>
</ul>
<p>Using <code class="docutils literal"><span class="pre">search_src</span></code> from the Sage prompt (or <code class="docutils literal"><span class="pre">grep</span></code>), one can
easily find the aforementioned keywords. In the case of <code class="docutils literal"><span class="pre">todo:</span> <span class="pre">not</span>
<span class="pre">implemented</span></code>, one can use the results of such a search to direct
further development on Sage.</p>
</div>
</div>
<div class="section" id="running-automated-doctests">
<span id="chapter-testing"></span><h2>Running Automated Doctests<a class="headerlink" href="#running-automated-doctests" title="Permalink to this headline">¶</a></h2>
<p>This section describes Sage’s automated testing of test files of the
following types: <code class="docutils literal"><span class="pre">.py</span></code>, <code class="docutils literal"><span class="pre">.pyx</span></code>, <code class="docutils literal"><span class="pre">.sage</span></code>, <code class="docutils literal"><span class="pre">.rst</span></code>. Briefly, use
<code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">&lt;file&gt;</span></code> to test that the examples in <code class="docutils literal"><span class="pre">&lt;file&gt;</span></code> behave
exactly as claimed. See the following subsections for more
details. See also <a class="reference internal" href="#section-docstrings"><span class="std std-ref">Documentation Strings</span></a> for a discussion on how to
include examples in documentation strings and what conventions to
follow. The chapter <a class="reference internal" href="doctesting.html#chapter-doctesting"><span class="std std-ref">Running Sage’s doctests</span></a> contains a tutorial on
doctesting modules in the Sage library.</p>
<div class="section" id="testing-py-pyx-and-sage-files">
<span id="section-testpython"></span><h3>Testing .py, .pyx and .sage Files<a class="headerlink" href="#testing-py-pyx-and-sage-files" title="Permalink to this headline">¶</a></h3>
<p>Run <code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">&lt;filename.py&gt;</span></code> to test all code examples in
<code class="docutils literal"><span class="pre">filename.py</span></code>. Similar remarks apply to <code class="docutils literal"><span class="pre">.sage</span></code> and <code class="docutils literal"><span class="pre">.pyx</span></code>
files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sage</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="o">--</span><span class="n">verbose</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">optional</span><span class="p">]</span>  <span class="p">[</span><span class="n">files</span> <span class="ow">and</span> <span class="n">directories</span> <span class="o">...</span> <span class="p">]</span>
</pre></div>
</div>
<p>The Sage doctesting framework is based on the standard Python doctest
module, but with many additional features (such as parallel testing,
timeouts, optional tests).  The Sage doctester recognizes <code class="docutils literal"><span class="pre">sage:</span></code>
prompts as well as <code class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></code> prompts.  It also preparses the doctests,
just like in interactive Sage sessions.</p>
<p>Your file passes the tests if the code in it will run when entered
at the <code class="docutils literal"><span class="pre">sage:</span></code> prompt with no extra imports. Thus users are
guaranteed to be able to exactly copy code out of the examples you
write for the documentation and have them work.</p>
<p>For more information, see <a class="reference internal" href="doctesting.html#chapter-doctesting"><span class="std std-ref">Running Sage’s doctests</span></a>.</p>
</div>
<div class="section" id="testing-rest-documentation">
<h3>Testing reST Documentation<a class="headerlink" href="#testing-rest-documentation" title="Permalink to this headline">¶</a></h3>
<p>Run <code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span> <span class="pre">&lt;filename.rst&gt;</span></code> to test the examples in verbatim
environments in reST documentation.</p>
<p>Of course in reST files, one often inserts explanatory texts between
different verbatim environments. To link together verbatim
environments, use the <code class="docutils literal"><span class="pre">..</span> <span class="pre">link</span></code> comment. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>EXAMPLES::

        sage: a = 1


Next we add 1 to ``a``.

.. link::

        sage: 1 + a
        2
</pre></div>
</div>
<p>If you want to link all the verbatim environments together, you can
put <code class="docutils literal"><span class="pre">..</span> <span class="pre">linkall</span></code> anywhere in the file, on a line by itself.  (For
clarity, it might be best to put it near the top of the file.)  Then
<code class="docutils literal"><span class="pre">sage</span> <span class="pre">-t</span></code> will act as if there were a <code class="docutils literal"><span class="pre">..</span> <span class="pre">link</span></code> before each
verbatim environment.  The file
<code class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/tutorial/interfaces.rst</span></code> contains a
<code class="docutils literal"><span class="pre">..</span> <span class="pre">linkall</span></code> directive, for example.</p>
<p>You can also put <code class="docutils literal"><span class="pre">..</span> <span class="pre">skip</span></code> right before a verbatim environment to
have that example skipped when testing the file.  This goes in the
same place as the <code class="docutils literal"><span class="pre">..</span> <span class="pre">link</span></code> in the previous example.</p>
<p>See the files in <code class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/tutorial/</span></code> for many
examples of how to include automated testing in reST documentation for
Sage.</p>
</div>
</div>
<div class="section" id="general-coding-style-regarding-whitespace">
<span id="section-coding-general-whitespace"></span><h2>General Coding Style Regarding Whitespace<a class="headerlink" href="#general-coding-style-regarding-whitespace" title="Permalink to this headline">¶</a></h2>
<p>Use spaces instead of tabs for indentation.  The only exception is for
makefiles, in which tabs have a syntactic meaning different from
spaces.</p>
<p>Do not add trailing whitespace.</p>
<p>Sage provides editor configuration for Emacs, using the file
<code class="docutils literal"><span class="pre">.dir-locals.el</span></code>, to use spaces instead of tabs.  Regarding trailing
whitespace, see <a class="reference external" href="https://www.emacswiki.org/emacs/DeletingWhitespace">https://www.emacswiki.org/emacs/DeletingWhitespace</a>
for various solutions.</p>
<p>If you use another editor, we recommend to configure it so you do not
add tabs to files.</p>
</div>
<div class="section" id="global-options">
<h2>Global Options<a class="headerlink" href="#global-options" title="Permalink to this headline">¶</a></h2>
<p>Global options for classes can be defined in Sage using
<a class="reference external" href="../reference/structure/sage/structure/global_options.html#sage.structure.global_options.GlobalOptions" title="(in Sage Reference Manual: Parents and Elements v8.2)"><code class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></code></a>.</p>
</div>
<div class="section" id="miscellanous-minor-things">
<h2>Miscellanous minor things<a class="headerlink" href="#miscellanous-minor-things" title="Permalink to this headline">¶</a></h2>
<p>Some decisions are arbitrary, but common conventions make life easier.</p>
<ul>
<li><p class="first">Non-ASCII names in identifiers:</p>
<ul class="simple">
<li>Translate <em>ä</em> and <em>ö</em> to <em>ae</em> and <em>oe</em>, like <code class="docutils literal"><span class="pre">moebius_function</span></code>
for Möbius function.</li>
<li>Translate <em>á</em> to <em>a</em>, like <code class="docutils literal"><span class="pre">lovasz_number</span></code> for Lovász number.</li>
</ul>
</li>
<li><p class="first">Common function keyword arguments:</p>
<p>This is a list of some keyword arguments that many functions and
methods take.  For consistency, you should use the keywords from the
list below with the meaning as explained here. Do not use a
different keyword with the same meaning (for example, do not use
<code class="docutils literal"><span class="pre">method</span></code>; use <code class="docutils literal"><span class="pre">algorithm</span></code> instead).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">algorithm</span></code>, a string or <code class="docutils literal"><span class="pre">None</span></code>: choose between various
implementation or algorithm. Use <code class="docutils literal"><span class="pre">None</span></code> as a default that
selects a sensible default, which could depend on installed
optional packages.</li>
<li><code class="docutils literal"><span class="pre">certificate</span></code>, a Boolean with <code class="docutils literal"><span class="pre">False</span></code> as default: whether the
function should return some kind of certificate together with the
result. With <code class="docutils literal"><span class="pre">certificate=True</span></code> the return value should be a
pair <span class="math">\((r, c)\)</span> where <span class="math">\(r\)</span> is the result that would be given with
<code class="docutils literal"><span class="pre">certificate=False</span></code> and <span class="math">\(c\)</span> is the certificate or <code class="docutils literal"><span class="pre">None</span></code> if
there is no meaningfull certificate.</li>
<li><code class="docutils literal"><span class="pre">proof</span></code>, a Boolean with <code class="docutils literal"><span class="pre">True</span></code> as default: if <code class="docutils literal"><span class="pre">True</span></code>,
require a mathematically proven computation. If <code class="docutils literal"><span class="pre">False</span></code>, a
probabilistic algorithm or an algorithm relying to non-proved
hypothesis like RH can be used.</li>
<li><code class="docutils literal"><span class="pre">check</span></code>, a Boolean: do some additional checks to verify the
input parameters. This should not otherwise influence the
functioning of the code: if code works with <code class="docutils literal"><span class="pre">check=True</span></code>, it should
also work with <code class="docutils literal"><span class="pre">check=False</span></code>.</li>
<li><code class="docutils literal"><span class="pre">coerce</span></code>, a Boolean: convert the input parameters to a suitable
parent. This is typically used in constructors. You can call a
method with <code class="docutils literal"><span class="pre">coerce=False</span></code> to skip some checks if the parent is
known to be correct.</li>
<li><code class="docutils literal"><span class="pre">inplace</span></code>, a Boolean: whether to modify the object in-place or
to return a copy.</li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">General Conventions</a><ul>
<li><a class="reference internal" href="#python-code-style">Python Code Style</a></li>
<li><a class="reference internal" href="#files-and-directory-structure">Files and Directory Structure</a></li>
<li><a class="reference internal" href="#learn-by-copy-paste">Learn by copy/paste</a></li>
<li><a class="reference internal" href="#headings-of-sage-library-code-files">Headings of Sage Library Code Files</a></li>
<li><a class="reference internal" href="#documentation-strings">Documentation Strings</a><ul>
<li><a class="reference internal" href="#the-docstring-of-a-function-content">The docstring of a function: content</a><ul>
<li><a class="reference internal" href="#note-about-sphinx-directives-vs-other-blocks">Note about Sphinx directives vs. other blocks</a></li>
<li><a class="reference internal" href="#sage-documentation-style">Sage documentation style</a></li>
<li><a class="reference internal" href="#sage-s-master-bibliography-file">Sage’s master <strong>BIBLIOGRAPHY</strong> file</a></li>
<li><a class="reference internal" href="#template">Template</a></li>
<li><a class="reference internal" href="#private-functions">Private functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#latex-typesetting">LaTeX Typesetting</a></li>
<li><a class="reference internal" href="#writing-testable-examples">Writing Testable Examples</a></li>
<li><a class="reference internal" href="#special-markup-to-influence-doctests">Special Markup to Influence Doctests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-automated-doctests">Running Automated Doctests</a><ul>
<li><a class="reference internal" href="#testing-py-pyx-and-sage-files">Testing .py, .pyx and .sage Files</a></li>
<li><a class="reference internal" href="#testing-rest-documentation">Testing reST Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general-coding-style-regarding-whitespace">General Coding Style Regarding Whitespace</a></li>
<li><a class="reference internal" href="#global-options">Global Options</a></li>
<li><a class="reference internal" href="#miscellanous-minor-things">Miscellanous minor things</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="trac.html"
                                  title="previous chapter">The Sage Trac Server</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="reviewer_checklist.html"
                                  title="next chapter">The reviewer’s check list</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/coding_basics.rst.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <!-- The shading of the "Go" button should be consistent -->
                <!-- with the colour of the header and footer. See the file -->
                <!-- doc/common/themes/sage/theme.conf for colours used by -->
                <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="reviewer_checklist.html" title="The reviewer’s check list"
             >next</a> |</li>
        <li class="right" >
          <a href="trac.html" title="The Sage Trac Server"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Developer&#39;s Guide v8.2</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2018, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>