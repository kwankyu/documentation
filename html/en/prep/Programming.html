
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Sage Introductory Programming Tutorial &#8212; PREP Tutorials v9.0</title>
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial for Advanced 2d Plotting" href="Advanced-2DPlotting.html" />
    <link rel="prev" title="Tutorial for Calculus" href="Calculus.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
    <script src="_static/thebe.js" type="text/javascript"></script>
    <script src="_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Advanced-2DPlotting.html" title="Tutorial for Advanced 2d Plotting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Calculus.html" title="Tutorial for Calculus"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">PREP Tutorials v9.0</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sage-introductory-programming-tutorial">
<span id="prep-programming"></span><h1>Sage Introductory Programming Tutorial<a class="headerlink" href="#sage-introductory-programming-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This <a class="reference external" href="http://www.sagemath.org">Sage</a> document is one of the tutorials
developed for the MAA PREP Workshop “Sage: Using Open-Source
Mathematics Software with Undergraduates” (funding provided by NSF DUE
0817071). It is licensed under the Creative Commons
Attribution-ShareAlike 3.0 license (<a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA</a>).</p>
<p>This tutorial will cover the following topics (and various others
throughout):</p>
<ul class="simple">
<li><a class="reference internal" href="#methods"><span class="std std-ref">Methods and Dot Notation</span></a></li>
<li><a class="reference internal" href="#lists"><span class="std std-ref">Lists, Loops, and Set Builders</span></a></li>
<li><a class="reference internal" href="#defs"><span class="std std-ref">Defining Functions</span></a></li>
<li><a class="reference internal" href="#gotchas"><span class="std std-ref">Gotchas from names and copies</span></a></li>
<li><a class="reference internal" href="#advanced"><span class="std std-ref">Appendix: Advanced Introductory Topics</span></a></li>
</ul>
<p>We will motivate our examples using basic matrices and situations one
might want to handle in everyday use of matrices in the classroom.</p>
<div class="section" id="methods-and-dot-notation">
<span id="methods"></span><h2>Methods and Dot Notation<a class="headerlink" href="#methods-and-dot-notation" title="Permalink to this headline">¶</a></h2>
<p>Making a new matrix is not too hard in Sage.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
</pre></div>
</div>
<p>As we can see, this gives the matrix with rows given in the two
bracketed sets.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span>
<span class="go">[1 2]</span>
<span class="go">[3 4]</span>
</pre></div>
</div>
<p>Some commands are available right off the bat, like derivatives are.
This is the determinant.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">-2</span>
</pre></div>
</div>
<p>But some things are not available this way - for instance a
row-reduced echelon form.  We can ‘tab’ after this to make sure.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">r</span>
</pre></div>
</div>
<p>So, as we’ve already seen in previous tutorials, <em>many</em> of the commands
in Sage are “methods” of objects.</p>
<p>That is, we access them by typing:</p>
<ul class="simple">
<li>the name of the mathematical object,</li>
<li>a dot/period,</li>
<li>the name of the method, and</li>
<li>parentheses (possibly with an argument).</li>
</ul>
<p>This is a huge advantage, once you get familiar with it, because it
allows you to do <em>only</em> the things that are possible, and <em>all</em> such
things.</p>
<p>First, let’s do the determinant again.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">det</span><span class="p">()</span>
<span class="go">-2</span>
</pre></div>
</div>
<p>Then we do the row-reduced echelon form.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">rref</span><span class="p">()</span>
<span class="go">[1 0]</span>
<span class="go">[0 1]</span>
</pre></div>
</div>
<p>It is very important to keep in the parentheses.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Things that would be legal without them would be called ‘attributes’,
but Sage prefers stylistically to hide them, since math is made of functions
and not elements of sets. Or so a category-theorist would say.</p>
<div class="last highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">det</span> <span class="c1"># Won&#39;t work</span>
<span class="go">&lt;built-in method det of sage.matrix.matrix_integer_dense.Matrix_integer_dense object at ...&gt;</span>
</pre></div>
</div>
</div>
<p>This is so useful because we can use the ‘tab’ key, remember!</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="o">.</span>
</pre></div>
</div>
<p>Sometimes you will have surprises.  Subtle changes in an object can
affect what commands are available, or what their outcomes are.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">echelon_form</span><span class="p">()</span>
<span class="go">[1 0]</span>
<span class="go">[0 2]</span>
</pre></div>
</div>
<p>This is because our original matrix had only integer coefficients, and
you can’t make the last entry one via elementary operations unless you
multiply by a rational number!</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">change_ring</span><span class="p">(</span><span class="n">QQ</span><span class="p">);</span> <span class="n">B</span><span class="o">.</span><span class="n">echelon_form</span><span class="p">()</span>
<span class="go">[1 0]</span>
<span class="go">[0 1]</span>
</pre></div>
</div>
<p>Another question is whether one needs an argument.  Remember, it’s easy
to just read the documentation!</p>
<p>Below, let’s see whether we need an argument to get a column.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span>A.column<span class="o">?</span>
</pre></div>
</div>
<p>It looks like we do.  Let’s input <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(2, 4)</span>
</pre></div>
</div>
<p>Notice that this gives the SECOND column!</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span>
<span class="go">[1 2]</span>
<span class="go">[3 4]</span>
</pre></div>
</div>
<p>What is that about?</p>
</div>
<div class="section" id="lists-loops-and-set-builders">
<span id="lists"></span><h2>Lists, Loops, and Set Builders<a class="headerlink" href="#lists-loops-and-set-builders" title="Permalink to this headline">¶</a></h2>
<p class="rubric">(Especially List Comprehensions!)</p>
<p>In the previous example, we saw that the <code class="docutils literal notranslate"><span class="pre">1</span></code> choice for the column of
a matrix gives the <em>second</em> column.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(2, 4)</span>
</pre></div>
</div>
<p>You might have thought that the would give the first column, but Sage
(along with the Python programming language) begins numbering of
anything that is like a sequence at zero.  We’ve mentioned this once
before, but it’s very important to remember.</p>
<p>To reinforce this, let’s formally introduce a fundamental object we’ve
seen once or twice before, called a <em>list</em>.</p>
<p>You should think of a list as an ordered set, where the elements of the
set can be pretty much anything - including other lists.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">my_list</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;Grover&#39;</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]];</span> <span class="n">my_list</span>
<span class="go">[2, &#39;Grover&#39;, [3, 2, 1]]</span>
</pre></div>
</div>
<p>You can access any elements of such a list quite easily using square
brackets.  Just remember that the counting starts at zero.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">my_list</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">my_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">2</span>
<span class="go">[3, 2, 1]</span>
</pre></div>
</div>
<p>There are lots of advanced things one can do with lists.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">my_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[2, &#39;Grover&#39;]</span>
</pre></div>
</div>
<p>However, our main reason for introducing this is more practical, as
we’ll now see.</p>
<ul class="simple">
<li>One of the best uses of the computer in the classroom is to quickly
show tedious things.</li>
<li>One of the most tedious things to do by hand in linear algebra is
taking powers of matrices.</li>
<li>Here we make the first four powers of our matrix ‘by hand’.</li>
</ul>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span> <span class="n">A</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span> <span class="n">A</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span> <span class="n">A</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span> <span class="n">A</span><span class="o">^</span><span class="mi">4</span>
<span class="go">[1 0]</span>
<span class="go">[0 1]</span>
<span class="go">[1 2]</span>
<span class="go">[3 4]</span>
<span class="go">[ 7 10]</span>
<span class="go">[15 22]</span>
<span class="go">[ 37  54]</span>
<span class="go">[ 81 118]</span>
<span class="go">[199 290]</span>
<span class="go">[435 634]</span>
</pre></div>
</div>
<p>This is not terrible, but it’s not exactly nice either, particularly if
you might want to do something <em>with</em> these new matrices.</p>
<p>Instead, we can do what is known as a <em>loop</em> construction.  See the
notation below; it’s at least vaguely mathematical.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]:</span>
<span class="gp">....: </span>    <span class="n">A</span><span class="o">^</span><span class="n">i</span>
<span class="go">[1 0]</span>
<span class="go">[0 1]</span>
<span class="go">[1 2]</span>
<span class="go">[3 4]</span>
<span class="go">[ 7 10]</span>
<span class="go">[15 22]</span>
<span class="go">[ 37  54]</span>
<span class="go">[ 81 118]</span>
<span class="go">[199 290]</span>
<span class="go">[435 634]</span>
</pre></div>
</div>
<p>What did we do?</p>
<ul class="simple">
<li>For each <span class="math notranslate nohighlight">\(i\)</span> in the set <span class="math notranslate nohighlight">\(\{0,1,2,3,4\}\)</span>, return <span class="math notranslate nohighlight">\(A^i\)</span>.</li>
</ul>
<p>Yeah, that makes sense.  The square brackets created a list, and the
powers of the original matrix come in the same order as the list.</p>
<p>(The colon in the first line and the indentation in the second line are
<strong>extremely</strong> important; they are the basic syntactical structure of
Python.)</p>
<p>For the curious: this is better, but still not perfect.  It would be
best to find a quicker way to write the possible values for
<span class="math notranslate nohighlight">\(i\)</span>.  There are two ways to do this in Sage.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">4</span><span class="p">]:</span>
<span class="gp">....: </span>    <span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="o">^</span><span class="n">i</span><span class="p">)</span>
<span class="go">1</span>
<span class="go">-2</span>
<span class="go">4</span>
<span class="go">-8</span>
<span class="go">16</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="o">^</span><span class="n">i</span><span class="p">)</span>
<span class="go">1</span>
<span class="go">-2</span>
<span class="go">4</span>
<span class="go">-8</span>
<span class="go">16</span>
</pre></div>
</div>
<p>These ways of constructing lists are very useful - and demonstrate
that, like many Sage/Python things, that counting begins at zero and
ends at one less than the “end” in things like <code class="docutils literal notranslate"><span class="pre">range</span></code>.</p>
<p>Below, we show that one can get step sizes other than one as well.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1"># py2</span>
<span class="go">[3, 5, 7, 9, 11, 13, 15, 17, 19, 21]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mf">5.</span><span class="o">.</span><span class="mi">21</span><span class="p">]</span>
<span class="go">[3, 5, 7, 9, 11, 13, 15, 17, 19, 21]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is also important to emphasize that the <code class="docutils literal notranslate"><span class="pre">range</span></code> command does
<em>not</em> include its last value!  For a quick quiz, confirm this in the
examples above.</p>
</div>
<p>This all works well.  However, after a short time this will seem tedious
as well (you may have to trust us on this).  It turns out that there is
a very powerful way to create such lists in a way that very strongly
resembles the so-called set builder notation, called a <em>list
comprehension</em> .</p>
<p>We start with a relatively easy example:</p>
<div class="math notranslate nohighlight">
\[\{n^2\mid n\in\ZZ, 3 \leq n \leq 12\}\]</div>
<p>Who hasn’t written something like this at some point in a course?</p>
<p>This is a natural for the list comprehension, and can be very powerful
when used in Sage.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="p">[</span><span class="n">n</span><span class="o">^</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">3.</span><span class="o">.</span><span class="mi">12</span><span class="p">]]</span>
<span class="go">[9, 16, 25, 36, 49, 64, 81, 100, 121, 144]</span>
</pre></div>
</div>
<p>That’s it.  This sort of turns the loop around.</p>
<ul class="simple">
<li>The notation is easiest if you think of it mathematically; “The set of
<span class="math notranslate nohighlight">\(n^2\)</span>, for (all) <span class="math notranslate nohighlight">\(n\)</span> in the range between 3 and 13.”</li>
</ul>
<p>This is phenomenally useful.  Here is a nice plotting example:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">plot</span><span class="p">([</span><span class="n">x</span><span class="o">^</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">2.</span><span class="o">.</span><span class="mi">6</span><span class="p">]],(</span><span class="n">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="go">Graphics object consisting of 5 graphics primitives</span>
</pre></div>
</div>
<p>Now we apply it to the example we were doing in the first place.  Notice
we now have a nice concise description of all determinants of these
matrices, without the syntax of colon and indentation:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="p">[</span><span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="o">^</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">4</span><span class="p">]]</span>
<span class="go">[1, -2, 4, -8, 16]</span>
</pre></div>
</div>
<div class="section" id="tables">
<span id="id1"></span><h3>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h3>
<p>Finally, getting away from strictly programming, here is a useful tip.</p>
<p>Some of you may be familiar with a way to take such data and put it in
tabular form from other programs. The <code class="docutils literal notranslate"><span class="pre">table</span></code> command does this
for us:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">table</span><span class="p">(</span> <span class="p">[</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="o">^</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">4</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
<span class="go">  0   1</span>
<span class="go">  1   -2</span>
<span class="go">  2   4</span>
<span class="go">  3   -8</span>
<span class="go">  4   16</span>
</pre></div>
</div>
<p>Notice that each element of <em>this</em> list is two items in parentheses (a
so-called <em>tuple</em>).</p>
<p>Even better, we can put a header line on it to make it really clear what
we are doing, by adding lists. We’ve seen keywords like <code class="docutils literal notranslate"><span class="pre">header=True</span></code>
when doing some of our plotting and limits. What do you think will
happen if you put dollar signs around the labels in the header?</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">table</span><span class="p">(</span> <span class="p">[(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;det(A^i)&#39;</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">det</span><span class="p">(</span><span class="n">A</span><span class="o">^</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">4</span><span class="p">]</span> <span class="p">],</span> <span class="n">header_row</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">  i   det(A^i)</span>
<span class="go">+---+----------+</span>
<span class="go">  0   1</span>
<span class="go">  1   -2</span>
<span class="go">  2   4</span>
<span class="go">  3   -8</span>
<span class="go">  4   16</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="defining-functions">
<span id="defs"></span><h2>Defining Functions<a class="headerlink" href="#defining-functions" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Or, Extending Sage</p>
<p>It is often the case that Sage can do something, but doesn’t have a
simple command for it.  For instance, you might want to take a matrix
and output the square of that matrix minus the original matrix.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">^</span><span class="mi">2</span><span class="o">-</span><span class="n">A</span>
<span class="go">[ 6  8]</span>
<span class="go">[12 18]</span>
</pre></div>
</div>
<p>How might one do this for other matrices?  Of course, you could just
always do <span class="math notranslate nohighlight">\(A^2-A\)</span> again and again.  But this would be tedious and
hard to follow, as with so many things that motivate a little
programming.  Here is how we solve this problem.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">square_and_subtract</span><span class="p">(</span><span class="n">mymatrix</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">mymatrix</span><span class="o">^</span><span class="mi">2</span><span class="o">-</span><span class="n">mymatrix</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">def</span></code> command has created a new function called
<code class="docutils literal notranslate"><span class="pre">square_and_subtract</span></code>.  It should even be available using
tab-completion.</p>
<p>Here are things to note about its construction:</p>
<ul class="simple">
<li>The input is inside the parentheses.</li>
<li>The indentation and colon are crucial, as above.</li>
<li>There will usually be a return value, given by <code class="docutils literal notranslate"><span class="pre">return</span></code>.  This is
what Sage will give below the input cell.</li>
</ul>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">square_and_subtract</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">[ 6  8]</span>
<span class="go">[12 18]</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">square_and_subtract</span><span class="p">(</span><span class="n">matrix</span><span class="p">([[</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]]))</span>
<span class="go">[0.750000000000000 0.000000000000000]</span>
<span class="go">[0.000000000000000  2.00000000000000]</span>
</pre></div>
</div>
<p>We can get a documentation string available by putting it in triple
quotes <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">square_and_subtract</span><span class="p">(</span><span class="n">mymatrix</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="gp">....: </span><span class="sd">    Return `A^2-A`</span>
<span class="gp">....: </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">mymatrix</span><span class="o">^</span><span class="mi">2</span><span class="o">-</span><span class="n">mymatrix</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span>square_and_subtract<span class="o">?</span>
</pre></div>
</div>
<p>Pretty cool!  And potentially quite helpful to students - and you -
especially if the function is complicated.  The <span class="math notranslate nohighlight">\(A\)</span> typesets
properly because we put it in backticks (see above).</p>
<p>A very careful reader <em>may</em> have noticed that there is nothing that
requires the input <code class="docutils literal notranslate"><span class="pre">mymatrix</span></code> to be a matrix.  Sage will just try to
square whatever you give it and subtract the original thing.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">square_and_subtract</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="go">-sqrt(5) + 5</span>
</pre></div>
</div>
<p>This is a typical thing to watch out for; just because you define
something doesn’t mean it’s useful (though in this case it was).</p>
<p>Try to define a function which inputs a matrix and returns the
determinant of the cube of the matrix.  (There are a few ways to do
this, of course!)</p>
</div>
<div class="section" id="gotchas-from-names-and-copies">
<span id="gotchas"></span><h2>Gotchas from names and copies<a class="headerlink" href="#gotchas-from-names-and-copies" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Or, What’s in a Name</p>
<p>Before we finish the tutorial, we want to point out a few
programming-related things that often trip people up.</p>
<p>The first ‘gotcha’ is that it’s possible to clobber constants!</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">i</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Can you figure out why <code class="docutils literal notranslate"><span class="pre">i=4</span></code>?  Look carefully above to see when this
happened.</p>
<ul class="simple">
<li>This gives a valuable lesson; <em>any time</em> you use a name there is
potential for renaming.</li>
</ul>
<p>This may seem quite bad, but could be quite logical to do - for
instance, if you are only dealing with real matrices. It is definitely
is something a Sage user needs to know, though.</p>
<p>Luckily, it’s possible to restore symbolic constants.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">reset</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">i</span><span class="p">;</span> <span class="n">i</span><span class="o">^</span><span class="mi">2</span>
<span class="go">I</span>
<span class="go">-1</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.symbolic.constants_c.E&#39;&gt;</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.symbolic.expression.Expression&#39;&gt;</span>
</pre></div>
</div>
<p>Variables are another thing to keep in mind.  As mentioned briefly in
earlier tutorials, in order to maintain maximum flexibility while not
allowing things to happen which shouldn’t, only <code class="docutils literal notranslate"><span class="pre">x</span></code> is predefined,
nothing else.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.symbolic.expression.Expression&#39;&gt;</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">NameError: name &#39;y&#39; is not defined</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>There <em>is</em> a way to get around this, but it unleashes a horde of
potential misuse. See the cells below if you are interested in this.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">automatic_names</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">trig_expand</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">theta</span><span class="p">))</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># not tested</span>
<span class="go">4*(sin(theta)*cos(theta) + x + 2*y)^2</span>
</pre></div>
</div>
<p>This only works in the notebook.  Now we’ll turn it off.</p>
<div class="last highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">automatic_names</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span> <span class="c1"># not tested</span>
</pre></div>
</div>
</div>
<p>Another related issue is that a few names are “reserved” by Python/Sage,
and which aren’t allowed as variable names.</p>
<p>It’s not surprising that ‘for’ is not allowed, but neither is ‘lambda’
(<span class="math notranslate nohighlight">\(\lambda\)</span>)!  People often request a workaround for that.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;lambda&#39;</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: The name &quot;lambda&quot; is not a valid Python identifier.</span>
</pre></div>
</div>
<p>There are lots of ways to get around this.  One popular, though
annoying, way is this.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;lambda_&#39;</span><span class="p">)</span>
<span class="go">lambda_</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lambda_</span><span class="o">^</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
<span class="go">lambda_^2 - 1</span>
</pre></div>
</div>
<p>Still, in this one case, showing the expression still shows the Greek letter.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">show</span><span class="p">(</span><span class="n">lambda_</span><span class="o">^</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[\lambda^{2} - 1\]</div>
<p>Finally, there is another thing that can happen if you rename things too
loosely.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">QQ</span><span class="p">,[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">A</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>This actually has just made B and A refer to the same matrix.  B isn’t
like A, it <em>is</em> A. The <code class="docutils literal notranslate"><span class="pre">copy</span></code> command gets around this (though not
always).</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">987</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">show</span><span class="p">([</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">])</span>
</pre></div>
</div>
<div class="math notranslate nohighlight">
\[\begin{split}\left[\left(\begin{array}{rr}
987 &amp; 2 \\
3 &amp; 4
\end{array}\right), \left(\begin{array}{rr}
987 &amp; 2 \\
3 &amp; 4
\end{array}\right), \left(\begin{array}{rr}
1 &amp; 2 \\
3 &amp; 4
\end{array}\right)\right]\end{split}\]</div>
<p>This is very subtle if you’ve never programmed before.  Suffice it to
say that it is safest to let each <code class="docutils literal notranslate"><span class="pre">=</span></code> sign stand for one thing, and to
avoid redundant equals (unlike students at times).</p>
</div>
<div class="section" id="appendix-advanced-introductory-topics">
<span id="advanced"></span><h2>Appendix: Advanced Introductory Topics<a class="headerlink" href="#appendix-advanced-introductory-topics" title="Permalink to this headline">¶</a></h2>
<p>There are several things which are useful to know about, but which are
not always introduced immediately in programming.  We give a few
examples here, but they are mainly here to make sure you have seen them
so that they are not completely surprising when they come up again.</p>
<p>We saw the “block” structure of Python earlier, with the indentation.
This gives the opportunity to introduce conditional statements and
comparisons.  Here, we just give an example for those who have seen
conditionals (“if” clauses) before.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span> <span class="c1"># all integers from 0 to 4, remember</span>
<span class="gp">....: </span>    <span class="k">if</span> <span class="n">B</span><span class="o">^</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1"># We ask if the power is the zero matrix</span>
<span class="gp">....: </span>        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p>We use the double equals sign to test for equality, because <code class="docutils literal notranslate"><span class="pre">=</span></code>
assigns something to a variable name.  Notice again that colons and
indentation are the primary way that Sage/Python indicate syntax, just
as commas and spaces do in English.</p>
<p>Another useful concept is that of a <em>dictionary</em> .  This can be thought
of as a mathematical mapping from “keys” to “values”.  The order is
<em>not</em> important and <em>not</em> guaranteed.  A dictionary is delimited by
curly brackets and correspondence is indicated by colons.</p>
<p>Again, we will just give a small example to illustrate the idea.</p>
<p>What if one wants to specify a matrix using just the nonzero entries?  A
dictionary is a great way to do this.</p>
<p>This one puts 3 as an entry in the <span class="math notranslate nohighlight">\((2,3)\)</span> spot, for example
(remember, this is the <em>third</em> row and <em>fourth</em> column, since we start
with zero).</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mi">6</span><span class="p">,</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="o">-</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">C</span>
<span class="go">[ 0  0  0  0  0  0]</span>
<span class="go">[ 0  0  0  0  0  0]</span>
<span class="go">[ 0  0  0  3  0  0]</span>
<span class="go">[ 0  0  0  0  0  0]</span>
<span class="go">[ 0  0  0  0  0  6]</span>
<span class="go">[ 0  0  0  0  0  0]</span>
<span class="go">[-3  0  0  0  0  0]</span>
</pre></div>
</div>
<p>That was a lot easier than inputting the whole matrix!</p>
<p>Finally, although Sage tries to anticipate what you want, sometimes it
does matter how you define a given element in Sage.</p>
<ul class="simple">
<li>We saw this above with matrices over the rationals versus integers,
for instance.</li>
</ul>
<p>Here’s an example with straight-up numbers.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="o">/</span><span class="mi">1</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">I</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">+</span> <span class="mf">0.0</span><span class="o">*</span><span class="n">I</span>
</pre></div>
</div>
<p>We will not go in great depth about this, either, but it is worth
knowing about.  Notice that each of these types of numbers has or does
not have <span class="math notranslate nohighlight">\(I=\sqrt{-1}\)</span>, decimal points, or division.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">parent</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">Integer Ring</span>
<span class="gp">sage: </span><span class="n">parent</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Rational Field</span>
<span class="gp">sage: </span><span class="n">parent</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">Real Field with 53 bits of precision</span>
<span class="gp">sage: </span><span class="n">parent</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">Symbolic Ring</span>
<span class="gp">sage: </span><span class="n">parent</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">Symbolic Ring</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Sage Introductory Programming Tutorial</a><ul>
<li><a class="reference internal" href="#methods-and-dot-notation">Methods and Dot Notation</a></li>
<li><a class="reference internal" href="#lists-loops-and-set-builders">Lists, Loops, and Set Builders</a><ul>
<li><a class="reference internal" href="#tables">Tables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-functions">Defining Functions</a></li>
<li><a class="reference internal" href="#gotchas-from-names-and-copies">Gotchas from names and copies</a></li>
<li><a class="reference internal" href="#appendix-advanced-introductory-topics">Appendix: Advanced Introductory Topics</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Calculus.html"
                        title="previous chapter">Tutorial for Calculus</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Advanced-2DPlotting.html"
                        title="next chapter">Tutorial for Advanced 2d Plotting</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Programming.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Advanced-2DPlotting.html" title="Tutorial for Advanced 2d Plotting"
             >next</a> |</li>
        <li class="right" >
          <a href="Calculus.html" title="Tutorial for Calculus"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">PREP Tutorials v9.0</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012, Rob Beezer, Karl-Dieter Crisman, and Jason Grout.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>