
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>The Interactive Shell &#8212; Sage Tutorial v8.7</title>
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interfaces" href="interfaces.html" />
    <link rel="prev" title="Some More Advanced Mathematics" href="tour_advanced.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
    <script src="_static/thebe.js" type="text/javascript"></script>
    <script src="_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tour_advanced.html" title="Some More Advanced Mathematics"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Sage Tutorial v8.7</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-interactive-shell">
<span id="chapter-interactive-shell"></span><h1>The Interactive Shell<a class="headerlink" href="#the-interactive-shell" title="Permalink to this headline">¶</a></h1>
<p>In most of this tutorial, we assume you start the Sage interpreter
using the <code class="docutils literal notranslate"><span class="pre">sage</span></code> command. This starts a customized version of the
IPython shell, and imports many functions and classes, so they are
ready to use from the command prompt. Further customization is
possible by editing the <code class="docutils literal notranslate"><span class="pre">$SAGE_ROOT/ipythonrc</span></code> file. Upon starting
Sage, you get output similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">SAGE</span> <span class="n">Version</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">Release</span> <span class="n">Date</span><span class="p">:</span> <span class="mi">2008</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">24</span>                       <span class="o">|</span>
<span class="o">|</span> <span class="n">Type</span> <span class="n">notebook</span><span class="p">()</span> <span class="k">for</span> <span class="n">the</span> <span class="n">GUI</span><span class="p">,</span> <span class="ow">and</span> <span class="n">license</span><span class="p">()</span> <span class="k">for</span> <span class="n">information</span><span class="o">.</span>        <span class="o">|</span>
<span class="o">----------------------------------------------------------------------</span>


<span class="n">sage</span><span class="p">:</span>
</pre></div>
</div>
<p>To quit Sage either press Ctrl-D or type
<code class="docutils literal notranslate"><span class="pre">quit</span></code> or <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">quit</span>
<span class="go">Exiting SAGE (CPU time 0m0.00s, Wall time 0m0.89s)</span>
</pre></div>
</div>
<p>The wall time is the time that elapsed on the clock hanging from
your wall. This is relevant, since CPU time does not track time
used by subprocesses like GAP or Singular.</p>
<p>(Avoid killing a Sage process with <code class="docutils literal notranslate"><span class="pre">kill</span> <span class="pre">-9</span></code> from a terminal,
since Sage might not kill child processes, e.g.,
Maple processes, or cleanup temporary files from
<code class="docutils literal notranslate"><span class="pre">$HOME/.sage/tmp</span></code>.)</p>
<div class="section" id="your-sage-session">
<h2>Your Sage Session<a class="headerlink" href="#your-sage-session" title="Permalink to this headline">¶</a></h2>
<p>The session is the sequence of input and output
from when you start Sage until you quit. Sage logs all Sage input,
via IPython. In fact, if you’re using the interactive shell (not the
notebook interface), then at any point you may type <code class="docutils literal notranslate"><span class="pre">%history</span></code> (or <code class="docutils literal notranslate"><span class="pre">%hist</span></code>) to
get a listing of all input lines typed so far. You can type <code class="docutils literal notranslate"><span class="pre">?</span></code> at
the Sage prompt to find out more about IPython, e.g.,
“IPython offers numbered prompts … with input and output
caching. All input is saved and can be retrieved as variables (besides
the usual arrow key recall). The following GLOBAL variables always
exist (so don’t overwrite them!)”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="p">:</span>  <span class="n">previous</span> <span class="nb">input</span> <span class="p">(</span><span class="n">interactive</span> <span class="n">shell</span> <span class="ow">and</span> <span class="n">notebook</span><span class="p">)</span>
<span class="n">__</span><span class="p">:</span> <span class="nb">next</span> <span class="n">previous</span> <span class="nb">input</span> <span class="p">(</span><span class="n">interactive</span> <span class="n">shell</span> <span class="n">only</span><span class="p">)</span>
<span class="n">_oh</span> <span class="p">:</span> <span class="nb">list</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">inputs</span> <span class="p">(</span><span class="n">interactive</span> <span class="n">shell</span> <span class="n">only</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">factor</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="go"> _1 = 2^2 * 5^2</span>
<span class="gp">sage: </span><span class="n">kronecker_symbol</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="go"> _2 = -1</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">hist</span>   <span class="c1">#This only works from the interactive shell, not the notebook.</span>
<span class="go">1: factor(100)</span>
<span class="go">2: kronecker_symbol(3,5)</span>
<span class="go">3: %hist</span>
<span class="gp">sage: </span><span class="n">_oh</span>
<span class="go"> _4 = {1: 2^2 * 5^2, 2: -1}</span>
<span class="gp">sage: </span><span class="n">_i1</span>
<span class="go"> _5 = &#39;factor(ZZ(100))\n&#39;</span>
<span class="gp">sage: </span><span class="nb">eval</span><span class="p">(</span><span class="n">_i1</span><span class="p">)</span>
<span class="go"> _6 = 2^2 * 5^2</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">hist</span>
<span class="go">1: factor(100)</span>
<span class="go">2: kronecker_symbol(3,5)</span>
<span class="go">3: %hist</span>
<span class="go">4: _oh</span>
<span class="go">5: _i1</span>
<span class="go">6: eval(_i1)</span>
<span class="go">7: %hist</span>
</pre></div>
</div>
<p>We omit the output numbering in the rest of this tutorial and the
other Sage documentation.</p>
<p>You can also store a list of input from session in a macro for that
session.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">ModularSymbols</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">hist</span>
<span class="go">1: E = EllipticCurve([1,2,3,4,5])</span>
<span class="go">2: M = ModularSymbols(37)</span>
<span class="go">3: %hist</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">macro</span> <span class="n">em</span> <span class="mi">1</span><span class="o">-</span><span class="mi">2</span>
<span class="go">Macro `em` created. To execute, type its name (without quotes).</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span>
<span class="go">Elliptic Curve defined by y^2 + x*y + 3*y = x^3 + 2*x^2 + 4*x + 5 over</span>
<span class="go">Rational Field</span>
<span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">sage: </span><span class="n">em</span>
<span class="go">Executing Macro...</span>
<span class="gp">sage: </span><span class="n">E</span>
<span class="go">Elliptic Curve defined by y^2 + x*y + 3*y = x^3 + 2*x^2 + 4*x + 5 over</span>
<span class="go">Rational Field</span>
</pre></div>
</div>
<p>When using the interactive shell, any UNIX shell command can be
executed from Sage by prefacing it by an exclamation point <code class="docutils literal notranslate"><span class="pre">!</span></code>. For
example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: !ls
auto  example.sage glossary.tex  t  tmp  tut.log  tut.tex
</pre></div>
</div>
<p>returns the listing of the current directory.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PATH</span></code> has the Sage bin directory at the front, so if you run <code class="docutils literal notranslate"><span class="pre">gp</span></code>,
<code class="docutils literal notranslate"><span class="pre">gap</span></code>, <code class="docutils literal notranslate"><span class="pre">singular</span></code>, <code class="docutils literal notranslate"><span class="pre">maxima</span></code>, etc., you get the versions included
with Sage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: !gp
Reading GPRC: /etc/gprc ...Done.

                           GP/PARI CALCULATOR Version 2.2.11 (alpha)
                  i686 running linux (ix86/GMP-4.1.4 kernel) 32-bit version
...
sage: !singular
                     SINGULAR                             /  Development
 A Computer Algebra System for Polynomial Computations   /   version 3-0-1
                                                       0&lt;
     by: G.-M. Greuel, G. Pfister, H. Schoenemann        \   October 2005
FB Mathematik der Universitaet, D-67653 Kaiserslautern    \
</pre></div>
</div>
</div>
<div class="section" id="logging-input-and-output">
<h2>Logging Input and Output<a class="headerlink" href="#logging-input-and-output" title="Permalink to this headline">¶</a></h2>
<p>Logging your Sage session is not the same as saving it (see
<a class="reference internal" href="#section-save"><span class="std std-ref">Saving and Loading Complete Sessions</span></a> for that). To log input (and optionally output) use the
<code class="docutils literal notranslate"><span class="pre">logstart</span></code> command. Type <code class="docutils literal notranslate"><span class="pre">logstart?</span></code> for more details. You can use
this command to log all input you type, all output, and even play
back that input in a future session (by simply reloading the log
file).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>was@form:~$ sage
----------------------------------------------------------------------
| SAGE Version 3.0.2, Release Date: 2008-05-24                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------

sage: logstart setup
Activating auto-logging. Current session state plus future input saved.
Filename       : setup
Mode           : backup
Output logging : False
Timestamping   : False
State          : active
sage: E = EllipticCurve([1,2,3,4,5]).minimal_model()
sage: F = QQ^3
sage: x,y = QQ[&#39;x,y&#39;].gens()
sage: G = E.gens()
sage:
Exiting SAGE (CPU time 0m0.61s, Wall time 0m50.39s).
was@form:~$ sage
----------------------------------------------------------------------
| SAGE Version 3.0.2, Release Date: 2008-05-24                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------

sage: load(&quot;setup&quot;)
Loading log file &lt;setup&gt; one line at a time...
Finished replaying log file &lt;setup&gt;
sage: E
Elliptic Curve defined by y^2 + x*y  = x^3 - x^2 + 4*x + 3 over Rational
Field
sage: x*y
x*y
sage: G
[(2 : 3 : 1)]
</pre></div>
</div>
<p>If you use Sage in the Linux KDE
terminal <code class="docutils literal notranslate"><span class="pre">konsole</span></code> then you can save your session as follows: after
starting Sage in <code class="docutils literal notranslate"><span class="pre">konsole</span></code>, select “settings”, then “history…”,
then “set unlimited”. When you are ready to save your session,
select “edit” then “save history as…” and type in a name to save
the text of your session to your computer. After saving this file,
you could then load it into an editor, such as xemacs, and print
it.</p>
</div>
<div class="section" id="paste-ignores-prompts">
<h2>Paste Ignores Prompts<a class="headerlink" href="#paste-ignores-prompts" title="Permalink to this headline">¶</a></h2>
<p>Suppose you are reading a session of Sage or Python computations
and want to copy them into Sage. But there are annoying <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> or
<code class="docutils literal notranslate"><span class="pre">sage:</span></code> prompts to worry about. In fact, you can copy and paste an
example, including the prompts if you want, into Sage. In other
words, by default the Sage parser strips any leading <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> or
<code class="docutils literal notranslate"><span class="pre">sage:</span></code> prompt before passing it to Python. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">2</span><span class="o">^</span><span class="mi">10</span>
<span class="go">1024</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="p">:</span> <span class="n">sage</span><span class="p">:</span> <span class="mi">2</span><span class="o">^</span><span class="mi">10</span>
<span class="go">1024</span>
<span class="gp">sage: </span><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="o">^</span><span class="mi">10</span>
<span class="go">1024</span>
</pre></div>
</div>
</div>
<div class="section" id="timing-commands">
<h2>Timing Commands<a class="headerlink" href="#timing-commands" title="Permalink to this headline">¶</a></h2>
<p>If you place the <code class="docutils literal notranslate"><span class="pre">%time</span></code> command at the beginning of an input line,
the time the command takes to run will be displayed after the
output. For example, we can compare the running time for a certain
exponentiation operation in several ways. The timings below will
probably be much different on your computer, or even between
different versions of Sage. First, native Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="n">time</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="nb">int</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="go">CPU times: user 0.66 s, sys: 0.00 s, total: 0.66 s</span>
<span class="go">Wall time: 0.66</span>
</pre></div>
</div>
<p>This means that 0.66 seconds total were taken, and the “Wall time”,
i.e., the amount of time that elapsed on your wall clock, is also
0.66 seconds. If your computer is heavily loaded with other
programs, the wall time may be much larger than the CPU time.</p>
<p>It’s also possible to use the <code class="docutils literal notranslate"><span class="pre">timeit</span></code> function to try to get
timing over a large number of iterations of a command.  This gives
slightly different information, and requires the input of a string
with the command you want to time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;int(1938)^int(99484)&quot;</span><span class="p">)</span>
<span class="go">5 loops, best of 3: 44.8 ms per loop</span>
</pre></div>
</div>
<p>Next we time exponentiation using the native Sage Integer type,
which is implemented (in Cython) using the GMP library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="n">time</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1938</span><span class="o">^</span><span class="mi">99484</span>
<span class="go">CPU times: user 0.04 s, sys: 0.00 s, total: 0.04 s</span>
<span class="go">Wall time: 0.04</span>
</pre></div>
</div>
<p>Using the PARI C-library interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="n">time</span> <span class="n">a</span> <span class="o">=</span> <span class="n">pari</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="n">pari</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="go">CPU times: user 0.05 s, sys: 0.00 s, total: 0.05 s</span>
<span class="go">Wall time: 0.05</span>
</pre></div>
</div>
<p>GMP is better, but only slightly (as expected, since the version of
PARI built for Sage uses GMP for integer arithmetic).</p>
<p>You can also time a block of commands using
the <code class="docutils literal notranslate"><span class="pre">cputime</span></code> command, as illustrated below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">cputime</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="nb">int</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="mi">1938</span><span class="o">^</span><span class="mi">99484</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pari</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="n">pari</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">cputime</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>                       <span class="c1"># somewhat random output</span>
<span class="go">0.64</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: cputime?
...
    Return the time in CPU second since SAGE started, or with optional
    argument t, return the time since time t.
    INPUT:
        t -- (optional) float, time in CPU seconds
    OUTPUT:
        float -- time in CPU seconds
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">walltime</span></code> command behaves just like the <code class="docutils literal notranslate"><span class="pre">cputime</span></code> command,
except that it measures wall time.</p>
<p>We can also compute the above power in some of the computer algebra
systems that Sage includes. In each case we execute a trivial command in
the system, in order to start up the server for that program. The
most relevant time is the wall time. However, if there is a
significant difference between the wall time and the CPU time then
this may indicate a performance issue worth looking into.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">time</span> <span class="mi">1938</span><span class="o">^</span><span class="mi">99484</span><span class="p">;</span>
<span class="go">CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s</span>
<span class="go">Wall time: 0.01</span>
<span class="gp">sage: </span><span class="n">gp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">gp</span><span class="p">(</span><span class="s1">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.04</span>
<span class="gp">sage: </span><span class="n">maxima</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">maxima</span><span class="p">(</span><span class="s1">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.30</span>
<span class="gp">sage: </span><span class="n">kash</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">kash</span><span class="p">(</span><span class="s1">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.04</span>
<span class="gp">sage: </span><span class="n">mathematica</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">        0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">mathematica</span><span class="p">(</span><span class="s1">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.03</span>
<span class="gp">sage: </span><span class="n">maple</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">maple</span><span class="p">(</span><span class="s1">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.11</span>
<span class="gp">sage: </span><span class="n">gap</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;1938^99484;;&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 1.02</span>
</pre></div>
</div>
<p>Note that GAP and Maxima are the slowest in this test (this was run
on the machine <code class="docutils literal notranslate"><span class="pre">sage.math.washington.edu</span></code>). Because of the pexpect
interface overhead, it is perhaps unfair to compare these to Sage,
which is the fastest.</p>
</div>
<div class="section" id="other-ipython-tricks">
<h2>Other IPython tricks<a class="headerlink" href="#other-ipython-tricks" title="Permalink to this headline">¶</a></h2>
<p>As noted above, Sage uses IPython as its front end, and so you can use
any of IPython’s commands and features.  You can read the <a class="reference external" href="http://ipython.scipy.org/moin/Documentation">full
IPython documentation</a>.
Meanwhile, here are some fun tricks – these are called “Magic
commands” in IPython:</p>
<ul>
<li><p class="first">You can use <code class="docutils literal notranslate"><span class="pre">%bg</span></code> to run a command in the background, and then use
<code class="docutils literal notranslate"><span class="pre">jobs</span></code> to access the results, as follows.  (The comments <code class="docutils literal notranslate"><span class="pre">not</span>
<span class="pre">tested</span></code> are here because the <code class="docutils literal notranslate"><span class="pre">%bg</span></code> syntax doesn’t work well with
Sage’s automatic testing facility.  If you type this in yourself, it
should work as written.  This is of course most useful with commands
which take a while to complete.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">quick</span><span class="p">(</span><span class="n">m</span><span class="p">):</span> <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">m</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">bg</span> <span class="n">quick</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># not tested</span>
<span class="go">Starting job # 0 in a separate thread.</span>
<span class="gp">sage: </span><span class="n">jobs</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>  <span class="c1"># not tested</span>
<span class="go">Completed jobs:</span>
<span class="go">0 : quick(20)</span>
<span class="gp">sage: </span><span class="n">jobs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">result</span>  <span class="c1"># the actual answer, not tested</span>
<span class="go">40</span>
</pre></div>
</div>
<p>Note that jobs run in the background don’t use the Sage preparser –
see <a class="reference internal" href="afterword.html#section-mathannoy"><span class="std std-ref">The Pre-Parser: Differences between Sage and Python</span></a> for more information.  One
(perhaps awkward) way to get around this would be to run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="n">bg</span> <span class="nb">eval</span><span class="p">(</span><span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;quick(20)&#39;</span><span class="p">))</span> <span class="c1"># not tested</span>
</pre></div>
</div>
<p>It is safer and easier, though, to just use <code class="docutils literal notranslate"><span class="pre">%bg</span></code> on commands
which don’t require the preparser.</p>
</li>
<li><p class="first">You can use <code class="docutils literal notranslate"><span class="pre">%edit</span></code> (or <code class="docutils literal notranslate"><span class="pre">%ed</span></code> or <code class="docutils literal notranslate"><span class="pre">ed</span></code>) to open an editor, if
you want to type in some complex code.  Before you start Sage, make
sure that the <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">EDITOR</span></code> environment variable is set to your
favorite editor (by putting <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">EDITOR=/usr/bin/emacs</span></code> or
<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">EDITOR=/usr/bin/vim</span></code> or something similar in the
appropriate place, like a <code class="docutils literal notranslate"><span class="pre">.profile</span></code> file).  From the Sage prompt,
executing <code class="docutils literal notranslate"><span class="pre">%edit</span></code> will open up the named editor.  Then within the
editor you can define a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Save and quit from the editor.  For the rest of your Sage session,
you can then use <code class="docutils literal notranslate"><span class="pre">some_function</span></code>.  If you want to modify it, type
<code class="docutils literal notranslate"><span class="pre">%edit</span> <span class="pre">some_function</span></code> from the Sage prompt.</p>
</li>
<li><p class="first">If you have a computation and you want to modify its output for
another use, perform the computation and type <code class="docutils literal notranslate"><span class="pre">%rep</span></code>: this will
place the output from the previous command at the Sage prompt, ready
for you to edit it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">derivative</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">-sin(x)</span>
</pre></div>
</div>
<p>At this point, if you type <code class="docutils literal notranslate"><span class="pre">%rep</span></code> at the Sage prompt, you will get
a new Sage prompt, followed by <code class="docutils literal notranslate"><span class="pre">-sin(x)</span></code>, with the cursor at the
end of the line.</p>
</li>
</ul>
<p>For more, type <code class="docutils literal notranslate"><span class="pre">%quickref</span></code> to get a quick reference guide to
IPython.  As of this writing (April 2011), Sage uses version 0.9.1 of
IPython, and the <a class="reference external" href="http://ipython.org/ipython-doc/dev/interactive/tutorial.html#magic-functions">documentation for its magic commands</a>
is available online. Various slightly advanced aspects of magic command system are documented <a class="reference external" href="http://ipython.org/ipython-doc/stable/interactive/reference.html#magic-command-system">here</a> in IPython.</p>
</div>
<div class="section" id="errors-and-exceptions">
<h2>Errors and Exceptions<a class="headerlink" href="#errors-and-exceptions" title="Permalink to this headline">¶</a></h2>
<p>When something goes wrong, you will usually see a Python
“exception”. Python even tries to suggest what raised the
exception. Often you see the name of the exception, e.g.,
<code class="docutils literal notranslate"><span class="pre">NameError</span></code> or <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (see the Python Reference Manual <a class="reference internal" href="bibliography.html#py" id="id1">[Py]</a>
for a complete list of exceptions). For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">3</span><span class="n">_2</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">   File &quot;&lt;console&gt;&quot;, line 1</span>
<span class="go">     ZZ(3)_2</span>
<span class="go">           ^</span>
<span class="go">SyntaxError: invalid syntax</span>

<span class="gp">sage: </span><span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="n">infinity</span><span class="p">])</span>
<span class="go">------------------------------------------------------------</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">Unable to coerce Infinity (&lt;class &#39;sage...Infinity&#39;&gt;) to Rational</span>
</pre></div>
</div>
<p>The interactive debugger is sometimes useful for understanding what
went wrong. You can toggle it on or off using <code class="docutils literal notranslate"><span class="pre">%pdb</span></code> (the
default is off). The prompt <code class="docutils literal notranslate"><span class="pre">ipdb&gt;</span></code> appears if an exception is
raised and the debugger is on. From within the debugger, you can
print the state of any local variable, and move up and down the
execution stack. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="n">pdb</span>
<span class="go">Automatic pdb calling has been turned ON</span>
<span class="gp">sage: </span><span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">infinity</span><span class="p">])</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">&lt;type &#39;exceptions.TypeError&#39;&gt;             Traceback (most recent call last)</span>
<span class="gp">...</span>

<span class="go">ipdb&gt;</span>
</pre></div>
</div>
<p>For a list of commands in the debugger, type <code class="docutils literal notranslate"><span class="pre">?</span></code> at the <code class="docutils literal notranslate"><span class="pre">ipdb&gt;</span></code>
prompt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ipdb&gt; ?

Documented commands (type help &lt;topic&gt;):
========================================
EOF    break  commands   debug    h       l     pdef   quit    tbreak
a      bt     condition  disable  help    list  pdoc   r       u
alias  c      cont       down     ignore  n     pinfo  return  unalias
args   cl     continue   enable   j       next  pp     s       up
b      clear  d          exit     jump    p     q      step    w
whatis where

Miscellaneous help topics:
==========================
exec  pdb

Undocumented commands:
======================
retval  rv
</pre></div>
</div>
<p>Type Ctrl-D or <code class="docutils literal notranslate"><span class="pre">quit</span></code> to return to Sage.</p>
</div>
<div class="section" id="reverse-search-and-tab-completion">
<span id="section-tabcompletion"></span><h2>Reverse Search and Tab Completion<a class="headerlink" href="#reverse-search-and-tab-completion" title="Permalink to this headline">¶</a></h2>
<p>Reverse search:
Type the beginning of a command, then <code class="docutils literal notranslate"><span class="pre">Ctrl-p</span></code> (or just hit the up
arrow key) to go back to each line you have entered that begins in
that way. This works even if you completely exit Sage and restart
later. You can also do a reverse search through the history using
<code class="docutils literal notranslate"><span class="pre">Ctrl-r</span></code>. All these features use the <code class="docutils literal notranslate"><span class="pre">readline</span></code> package, which is
available on most flavors of Linux.</p>
<p>To illustrate tab completion,
first create the three dimensional vector space
<span class="math notranslate nohighlight">\(V=\QQ^3\)</span> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">VectorSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">V</span>
<span class="go">Vector space of dimension 3 over Rational Field</span>
</pre></div>
</div>
<p>You can also use the following more concise notation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">QQ</span><span class="o">^</span><span class="mi">3</span>
</pre></div>
</div>
<p>Then it is easy to list all member functions for <span class="math notranslate nohighlight">\(V\)</span> using tab
completion. Just type <code class="docutils literal notranslate"><span class="pre">V.</span></code>, then type the <code class="docutils literal notranslate"><span class="pre">[tab</span> <span class="pre">key]</span></code> key on your
keyboard:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span><span class="o">.</span><span class="p">[</span><span class="n">tab</span> <span class="n">key</span><span class="p">]</span>
<span class="go">V._VectorSpace_generic__base_field</span>
<span class="gp">...</span>
<span class="go">V.ambient_space</span>
<span class="go">V.base_field</span>
<span class="go">V.base_ring</span>
<span class="go">V.basis</span>
<span class="go">V.coordinates</span>
<span class="gp">...</span>
<span class="go">V.zero_vector</span>
</pre></div>
</div>
<p>If you type the first few letters of a function, then <code class="docutils literal notranslate"><span class="pre">[tab</span> <span class="pre">key]</span></code>,
you get only functions that begin as indicated.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="n">tab</span> <span class="n">key</span><span class="p">]</span>
<span class="go">V.is_ambient  V.is_dense    V.is_full     V.is_sparse</span>
</pre></div>
</div>
<p>If you wonder what a particular function does, e.g., the
coordinates function, type <code class="docutils literal notranslate"><span class="pre">V.coordinates?</span></code> for help or
<code class="docutils literal notranslate"><span class="pre">V.coordinates??</span></code> for the source code, as explained in the next
section.</p>
</div>
<div class="section" id="integrated-help-system">
<h2>Integrated Help System<a class="headerlink" href="#integrated-help-system" title="Permalink to this headline">¶</a></h2>
<p>Sage features an integrated help facility. Type a function name
followed by ? for the documentation for that function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: V = QQ^3
sage: V.coordinates?
Type:           instancemethod
Base Class:     &lt;type &#39;instancemethod&#39;&gt;
String Form:    &lt;bound method FreeModule_ambient_field.coordinates of Vector
space of dimension 3 over Rational Field&gt;
Namespace:      Interactive
File:           /home/was/s/local/lib/python2.4/site-packages/sage/modules/f
ree_module.py
Definition:     V.coordinates(self, v)
Docstring:
    Write v in terms of the basis for self.

    Returns a list c such that if B is the basis for self, then

            sum c_i B_i = v.

    If v is not in self, raises an ArithmeticError exception.

    EXAMPLES:
        sage: M = FreeModule(IntegerRing(), 2); M0,M1=M.gens()
        sage: W = M.submodule([M0 + M1, M0 - 2*M1])
        sage: W.coordinates(2*M0-M1)
        [2, -1]
</pre></div>
</div>
<p>As shown above, the output tells you the type of the object, the
file in which it is defined, and a useful description of the
function with examples that you can paste into your current
session. Almost all of these examples are regularly automatically
tested to make sure they work and behave exactly as claimed.</p>
<p>Another feature that is very much in the spirit of the open source
nature of Sage is that if <code class="docutils literal notranslate"><span class="pre">f</span></code> is a Python function, then typing <code class="docutils literal notranslate"><span class="pre">f??</span></code>
displays the source code that defines <code class="docutils literal notranslate"><span class="pre">f</span></code>. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: V = QQ^3
sage: V.coordinates??
Type:           instancemethod
...
Source:
def coordinates(self, v):
        &quot;&quot;&quot;
        Write $v$ in terms of the basis for self.
        ...
        &quot;&quot;&quot;
        return self.coordinate_vector(v).list()
</pre></div>
</div>
<p>This tells us that all the <code class="docutils literal notranslate"><span class="pre">coordinates</span></code> function does is call the
<code class="docutils literal notranslate"><span class="pre">coordinate_vector</span></code> function and change the result into a list.
What does the <code class="docutils literal notranslate"><span class="pre">coordinate_vector</span></code> function do?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: V = QQ^3
sage: V.coordinate_vector??
...
def coordinate_vector(self, v):
        ...
        return self.ambient_vector_space()(v)
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">coordinate_vector</span></code> function coerces its input into the
ambient space, which has the effect of computing the vector of
coefficients of <span class="math notranslate nohighlight">\(v\)</span> in terms of <span class="math notranslate nohighlight">\(V\)</span>. The space
<span class="math notranslate nohighlight">\(V\)</span> is already ambient since it’s just <span class="math notranslate nohighlight">\(\QQ^3\)</span>.
There is also a <code class="docutils literal notranslate"><span class="pre">coordinate_vector</span></code> function for subspaces, and
it’s different. We create a subspace and see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: V = QQ^3; W = V.span_of_basis([V.0, V.1])
sage: W.coordinate_vector??
...
def coordinate_vector(self, v):
        &quot;&quot;&quot;
         ...
        &quot;&quot;&quot;
        # First find the coordinates of v wrt echelon basis.
        w = self.echelon_coordinate_vector(v)
        # Next use transformation matrix from echelon basis to
        # user basis.
        T = self.echelon_to_user_matrix()
        return T.linear_combination_of_rows(w)
</pre></div>
</div>
<p>(If you think the implementation is inefficient, please sign up to
help optimize linear algebra.)</p>
<p>You may also type <code class="docutils literal notranslate"><span class="pre">help(command_name)</span></code> or <code class="docutils literal notranslate"><span class="pre">help(class)</span></code> for a
manpage-like help file about a given class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">help</span><span class="p">(</span><span class="n">VectorSpace</span><span class="p">)</span>
<span class="go">Help on class VectorSpace ...</span>

<span class="go">class VectorSpace(__builtin__.object)</span>
<span class="go"> |  Create a Vector Space.</span>
<span class="go"> |</span>
<span class="go"> |  To create an ambient space over a field with given dimension</span>
<span class="go"> |  using the calling syntax ...</span>
<span class="go"> :</span>
<span class="go"> :</span>
</pre></div>
</div>
<p>When you type <code class="docutils literal notranslate"><span class="pre">q</span></code> to exit the help system, your session appears
just as it was. The help listing does not clutter up your session,
unlike the output of <code class="docutils literal notranslate"><span class="pre">function_name?</span></code> sometimes does. It’s
particularly helpful to type <code class="docutils literal notranslate"><span class="pre">help(module_name)</span></code>. For example,
vector spaces are defined in <code class="docutils literal notranslate"><span class="pre">sage.modules.free_module</span></code>, so type
<code class="docutils literal notranslate"><span class="pre">help(sage.modules.free_module)</span></code> for documentation about that
whole module. When viewing documentation using help, you can search
by typing <code class="docutils literal notranslate"><span class="pre">/</span></code> and in reverse by typing <code class="docutils literal notranslate"><span class="pre">?</span></code>.</p>
</div>
<div class="section" id="saving-and-loading-individual-objects">
<h2>Saving and Loading Individual Objects<a class="headerlink" href="#saving-and-loading-individual-objects" title="Permalink to this headline">¶</a></h2>
<p>Suppose you compute a matrix or worse, a complicated space of
modular symbols, and would like to save it for later use. What can
you do? There are several approaches that computer algebra systems
take to saving individual objects.</p>
<ol class="arabic simple">
<li><strong>Save your Game:</strong> Only support saving and loading of complete
sessions (e.g., GAP, Magma).</li>
<li><strong>Unified Input/Output:</strong> Make every object print in a way that
can be read back in (GP/PARI).</li>
<li><strong>Eval</strong>: Make it easy to evaluate arbitrary code in the
interpreter (e.g., Singular, PARI).</li>
</ol>
<p>Because Sage uses Python, it takes a different approach, which is that
every object can be serialized, i.e., turned into a string from
which that object can be recovered. This is in spirit similar to
the unified I/O approach of PARI, except it doesn’t have the
drawback that objects print to screen in too complicated of a way.
Also, support for saving and loading is (in most cases) completely
automatic, requiring no extra programming; it’s simply a feature of
Python that was designed into the language from the ground up.</p>
<p>Almost all Sage objects x can be saved in compressed form to disk using
<code class="docutils literal notranslate"><span class="pre">save(x,</span> <span class="pre">filename)</span></code> (or in many cases <code class="docutils literal notranslate"><span class="pre">x.save(filename)</span></code>). To load
the object back in, use <code class="docutils literal notranslate"><span class="pre">load(filename)</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">3</span><span class="p">)(</span><span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span><span class="o">^</span><span class="mi">2</span>
<span class="gp">sage: </span><span class="n">A</span>
<span class="go">[ 15  18  21]</span>
<span class="go">[ 42  54  66]</span>
<span class="go">[ 69  90 111]</span>
<span class="gp">sage: </span><span class="n">save</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You should now quit Sage and restart. Then you can get <code class="docutils literal notranslate"><span class="pre">A</span></code> back:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span>
<span class="go">[ 15  18  21]</span>
<span class="go">[ 42  54  66]</span>
<span class="go">[ 69  90 111]</span>
</pre></div>
</div>
<p>You can do the same with more complicated objects, e.g., elliptic
curves. All data about the object that is cached is stored with the
object. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="s1">&#39;11a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">E</span><span class="o">.</span><span class="n">anlist</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>              <span class="c1"># takes a while</span>
<span class="gp">sage: </span><span class="n">save</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">quit</span>
</pre></div>
</div>
<p>The saved version of <code class="docutils literal notranslate"><span class="pre">E</span></code> takes 153 kilobytes, since it stores the
first 100000 <span class="math notranslate nohighlight">\(a_n\)</span> with it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~/tmp$ ls -l E.sobj
-rw-r--r--  1 was was 153500 2006-01-28 19:23 E.sobj
~/tmp$ sage [...]
sage: E = load(&#39;E&#39;)
sage: v = E.anlist(100000)              # instant!
</pre></div>
</div>
<p>(In Python, saving and loading is accomplished using
the <code class="docutils literal notranslate"><span class="pre">cPickle</span></code> module.   In particular, a Sage object <code class="docutils literal notranslate"><span class="pre">x</span></code>
can be saved via <code class="docutils literal notranslate"><span class="pre">cPickle.dumps(x,</span> <span class="pre">2)</span></code>.  Note the <code class="docutils literal notranslate"><span class="pre">2</span></code>!)</p>
<p>Sage cannot save and load individual objects created in some other
computer algebra systems, e.g., GAP, Singular, Maxima, etc. They
reload in a state marked “invalid”. In GAP, though many objects
print in a form from which they can be reconstructed, many don’t,
so reconstructing from their print representation is purposely not
allowed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">gap</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">The session in which this object was defined is no longer</span>
<span class="go">running.</span>
</pre></div>
</div>
<p>GP/PARI objects can be saved and loaded since their print
representation is enough to reconstruct them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">gp</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Saved objects can be re-loaded later on computers with different
architectures or operating systems, e.g., you could save a huge
matrix on 32-bit OS X and reload it on 64-bit Linux, find the
echelon form, then move it back. Also, in many cases you can even
load objects into versions of Sage that are different than the versions
they were saved in, as long as the code for that object isn’t too
different. All the attributes of the objects are saved, along with
the class (but not source code) that defines the object. If that
class no longer exists in a new version of Sage, then the object can’t be
reloaded in that newer version. But you could load it in an old
version, get the objects dictionary (with <code class="docutils literal notranslate"><span class="pre">x.__dict__</span></code>), and
save the dictionary, and load that into the newer version.</p>
<div class="section" id="saving-as-text">
<h3>Saving as Text<a class="headerlink" href="#saving-as-text" title="Permalink to this headline">¶</a></h3>
<p>You can also save the ASCII text representation of objects to a
plain text file by simply opening a file in write mode and writing
the string representation of the object (you can write many objects
this way as well). When you’re done writing objects, close the
file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">^</span><span class="mi">7</span>
<span class="gp">sage: </span><span class="n">o</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">o</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">o</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="saving-and-loading-complete-sessions">
<span id="section-save"></span><h2>Saving and Loading Complete Sessions<a class="headerlink" href="#saving-and-loading-complete-sessions" title="Permalink to this headline">¶</a></h2>
<p>Sage has very flexible support for saving and loading complete
sessions.</p>
<p>The command <code class="docutils literal notranslate"><span class="pre">save_session(sessionname)</span></code> saves all the variables
you’ve defined in the current session as a dictionary in the given
<code class="docutils literal notranslate"><span class="pre">sessionname</span></code>. (In the rare case when a variable does not support
saving, it is simply not saved to the dictionary.) The resulting
file is an <code class="docutils literal notranslate"><span class="pre">.sobj</span></code> file and can be loaded just like any other
object that was saved. When you load the objects saved in a
session, you get a dictionary whose keys are the variables names
and whose values are the objects.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">load_session(sessionname)</span></code> command to load the
variables defined in <code class="docutils literal notranslate"><span class="pre">sessionname</span></code> into the current session. Note
that this does not wipe out variables you’ve already defined in
your current session; instead, the two sessions are merged.</p>
<p>First we start Sage and define some variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="s1">&#39;11a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">ModularSymbols</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="mi">389</span>
<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="mi">2003</span><span class="p">)</span><span class="o">.</span><span class="n">matrix</span><span class="p">();</span> <span class="n">t</span><span class="o">.</span><span class="n">charpoly</span><span class="p">()</span><span class="o">.</span><span class="n">factor</span><span class="p">()</span>
<span class="go"> _4 = (x - 2004) * (x - 12)^2 * (x + 54)^2</span>
</pre></div>
</div>
<p>Next we save our session, which saves each of the above variables
into a file. Then we view the file, which is about 3K in size.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">save_session</span><span class="p">(</span><span class="s1">&#39;misc&#39;</span><span class="p">)</span>
<span class="go">Saving a</span>
<span class="go">Saving M</span>
<span class="go">Saving t</span>
<span class="go">Saving E</span>
<span class="gp">sage: </span><span class="n">quit</span>
<span class="go">was@form:~/tmp$ ls -l misc.sobj</span>
<span class="go">-rw-r--r--  1 was was 2979 2006-01-28 19:47 misc.sobj</span>
</pre></div>
</div>
<p>Finally we restart Sage, define an extra variable, and load our saved
session.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">sage: </span><span class="n">load_session</span><span class="p">(</span><span class="s1">&#39;misc&#39;</span><span class="p">)</span>
<span class="go">Loading a</span>
<span class="go">Loading M</span>
<span class="go">Loading E</span>
<span class="go">Loading t</span>
</pre></div>
</div>
<p>Each saved variable is again available. Moreover, the variable
<code class="docutils literal notranslate"><span class="pre">b</span></code> was not overwritten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">M</span>
<span class="go">Full Modular Symbols space for Gamma_0(37) of weight 2 with sign 0</span>
<span class="go">and dimension 5 over Rational Field</span>
<span class="gp">sage: </span><span class="n">E</span>
<span class="go">Elliptic Curve defined by y^2 + y = x^3 - x^2 - 10*x - 20 over Rational</span>
<span class="go">Field</span>
<span class="gp">sage: </span><span class="n">b</span>
<span class="go">19</span>
<span class="gp">sage: </span><span class="n">a</span>
<span class="go">389</span>
</pre></div>
</div>
</div>
<div class="section" id="the-legacy-notebook-interface">
<span id="section-notebook"></span><h2>The legacy Notebook Interface<a class="headerlink" href="#the-legacy-notebook-interface" title="Permalink to this headline">¶</a></h2>
<p>This section refers to the legacy Sage notebook, or “sagenb”.</p>
<p>SageMath is transitioning to using the
<a class="reference external" href="http://jupyter-notebook.readthedocs.io/en/latest/notebook.html">Jupyter notebook</a>
as a default, which has a different structure.  The most important
difference for users is that individual worksheets in Jupyter
are saved on your local system just like any other file, whereas
in the Sage notebook the main point of access is in the files
described below via the server.</p>
<div class="section" id="legacy-sagenb-notebook">
<h3>Legacy SageNB Notebook<a class="headerlink" href="#legacy-sagenb-notebook" title="Permalink to this headline">¶</a></h3>
<p>The Sage notebook is run by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">notebook</span><span class="p">()</span>
</pre></div>
</div>
<p>on the command line of Sage. This starts the Sage notebook and
opens your default web browser to view it. The server’s state files
are stored in <code class="docutils literal notranslate"><span class="pre">$HOME/.sage/sage\_notebook.sagenb</span></code>.</p>
<p>Other options include:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">notebook</span><span class="p">(</span><span class="s2">&quot;directory&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>which starts a new notebook server using files in the given
directory <code class="docutils literal notranslate"><span class="pre">directory.sagenb</span></code>, instead of the default directory
<code class="docutils literal notranslate"><span class="pre">$HOME/.sage/sage_notebook</span></code>. This can be useful if you want to
have a collection of worksheets associated with a specific project,
or run several separate notebook servers at the same time.</p>
<p>When you start the notebook, it first creates the following files
in <code class="docutils literal notranslate"><span class="pre">$HOME/.sage/sage_notebook.sagenb</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conf</span><span class="o">.</span><span class="n">pickle</span>
<span class="n">openid</span><span class="o">.</span><span class="n">pickle</span>
<span class="n">twistedconf</span><span class="o">.</span><span class="n">tac</span>
<span class="n">sagenb</span><span class="o">.</span><span class="n">pid</span>
<span class="n">users</span><span class="o">.</span><span class="n">pickle</span>
<span class="n">home</span><span class="o">/</span><span class="n">admin</span><span class="o">/</span> <span class="p">(</span><span class="n">a</span> <span class="n">directory</span> <span class="k">for</span> <span class="n">the</span> <span class="n">admin</span> <span class="n">user</span><span class="p">)</span>
<span class="n">home</span><span class="o">/</span><span class="n">guest</span><span class="o">/</span> <span class="p">(</span><span class="n">a</span> <span class="n">directory</span> <span class="k">for</span> <span class="n">guests</span><span class="p">)</span>
<span class="n">home</span><span class="o">/</span><span class="n">pub</span><span class="o">/</span> <span class="p">(</span><span class="n">a</span> <span class="n">directory</span> <span class="k">for</span> <span class="n">published</span> <span class="n">worksheets</span><span class="p">)</span>
</pre></div>
</div>
<p>After creating the above files, the notebook starts a web server.</p>
<p>A “notebook” is a collection of user accounts, each of which can
have any number of worksheets. When you create a new worksheet, the
data that defines it is stored in the <code class="docutils literal notranslate"><span class="pre">home/username/number</span></code>
directories. In each such directory there is a plain text file
<code class="docutils literal notranslate"><span class="pre">worksheet.html</span></code> - if anything ever happens to your worksheets, or Sage,
or whatever, that human-readable file contains everything needed to
reconstruct your worksheet.  Each worksheet also has, at a minimum,
the files/folders:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cells</span><span class="o">/</span>
<span class="n">worksheet</span><span class="o">.</span><span class="n">html</span>
<span class="n">data</span><span class="o">/</span>
<span class="n">worksheet_conf</span><span class="o">.</span><span class="n">pickle</span>
</pre></div>
</div>
<p>From within Sage, type <code class="docutils literal notranslate"><span class="pre">notebook?</span></code> for much more about how to start a
notebook server.</p>
<p>The following diagram illustrates the architecture of the Sage
Notebook:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----------------------</span>
<span class="o">|</span>                    <span class="o">|</span>
<span class="o">|</span>                    <span class="o">|</span>
<span class="o">|</span>   <span class="n">firefox</span><span class="o">/</span><span class="n">safari</span>   <span class="o">|</span>
<span class="o">|</span>                    <span class="o">|</span>
<span class="o">|</span>     <span class="n">javascript</span>     <span class="o">|</span>
<span class="o">|</span>      <span class="n">program</span>       <span class="o">|</span>
<span class="o">|</span>                    <span class="o">|</span>
<span class="o">|</span>                    <span class="o">|</span>
<span class="o">----------------------</span>
      <span class="o">|</span>      <span class="o">^</span>
      <span class="o">|</span> <span class="n">AJAX</span> <span class="o">|</span>
      <span class="n">V</span>      <span class="o">|</span>
<span class="o">----------------------</span>
<span class="o">|</span>                    <span class="o">|</span>
<span class="o">|</span>       <span class="n">sage</span>         <span class="o">|</span>                <span class="n">SAGE</span> <span class="n">process</span> <span class="mi">1</span>
<span class="o">|</span>       <span class="n">web</span>          <span class="o">|</span> <span class="o">------------&gt;</span>  <span class="n">SAGE</span> <span class="n">process</span> <span class="mi">2</span>    <span class="p">(</span><span class="n">Python</span> <span class="n">processes</span><span class="p">)</span>
<span class="o">|</span>      <span class="n">server</span>        <span class="o">|</span>   <span class="n">pexpect</span>      <span class="n">SAGE</span> <span class="n">process</span> <span class="mi">3</span>
<span class="o">|</span>                    <span class="o">|</span>                    <span class="o">.</span>
<span class="o">|</span>                    <span class="o">|</span>                    <span class="o">.</span>
<span class="o">----------------------</span>                    <span class="o">.</span>
</pre></div>
</div>
<p>For help on a Sage command, <code class="docutils literal notranslate"><span class="pre">cmd</span></code>, in the notebook browser box,
type <code class="docutils literal notranslate"><span class="pre">cmd?</span></code> and now hit <code class="docutils literal notranslate"><span class="pre">&lt;tab&gt;</span></code> (not <code class="docutils literal notranslate"><span class="pre">&lt;shift-enter&gt;</span></code>).</p>
<p>For help on the keyboard shortcuts available in the notebook
interface, click on the <code class="docutils literal notranslate"><span class="pre">Help</span></code> link.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Interactive Shell</a><ul>
<li><a class="reference internal" href="#your-sage-session">Your Sage Session</a></li>
<li><a class="reference internal" href="#logging-input-and-output">Logging Input and Output</a></li>
<li><a class="reference internal" href="#paste-ignores-prompts">Paste Ignores Prompts</a></li>
<li><a class="reference internal" href="#timing-commands">Timing Commands</a></li>
<li><a class="reference internal" href="#other-ipython-tricks">Other IPython tricks</a></li>
<li><a class="reference internal" href="#errors-and-exceptions">Errors and Exceptions</a></li>
<li><a class="reference internal" href="#reverse-search-and-tab-completion">Reverse Search and Tab Completion</a></li>
<li><a class="reference internal" href="#integrated-help-system">Integrated Help System</a></li>
<li><a class="reference internal" href="#saving-and-loading-individual-objects">Saving and Loading Individual Objects</a><ul>
<li><a class="reference internal" href="#saving-as-text">Saving as Text</a></li>
</ul>
</li>
<li><a class="reference internal" href="#saving-and-loading-complete-sessions">Saving and Loading Complete Sessions</a></li>
<li><a class="reference internal" href="#the-legacy-notebook-interface">The legacy Notebook Interface</a><ul>
<li><a class="reference internal" href="#legacy-sagenb-notebook">Legacy SageNB Notebook</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tour_advanced.html"
                        title="previous chapter">Some More Advanced Mathematics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="interfaces.html"
                        title="next chapter">Interfaces</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/interactive_shell.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             >next</a> |</li>
        <li class="right" >
          <a href="tour_advanced.html" title="Some More Advanced Mathematics"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Sage Tutorial v8.7</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2019, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>