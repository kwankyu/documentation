
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Sage, LaTeX and Friends &#8212; Sage Tutorial v8.5</title>
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Programming" href="programming.html" />
    <link rel="prev" title="Interfaces" href="interfaces.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
    <script src="_static/thebe.js" type="text/javascript"></script>
    <script src="_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="programming.html" title="Programming"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Sage Tutorial v8.5</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sage-latex-and-friends">
<h1>Sage, LaTeX and Friends<a class="headerlink" href="#sage-latex-and-friends" title="Permalink to this headline">¶</a></h1>
<p>AUTHOR:  Rob Beezer (2010-05-23)</p>
<p>Sage and the LaTeX dialect of TeX have an
intensely synergistic relationship. This section aims to
introduce the variety of interactions, beginning with the most
basic and proceeding to the more unusual and arcane.  (So you may
not want to read this entire section on your first pass through
this tutorial.)</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>It may be easiest to understand the various uses of LaTeX with a
brief overview of the mechanics of the three principal methods
employed by Sage.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Every “object” in Sage is required to have a LaTeX representation.
You can access this representation by executing, in the notebook or
at the sage command line, <code class="docutils literal notranslate"><span class="pre">latex(foo)</span></code> where <code class="docutils literal notranslate"><span class="pre">foo</span></code> is some object
in Sage.  The output is a string that should render a reasonably accurate
representation of <code class="docutils literal notranslate"><span class="pre">foo</span></code> when used in TeX’s math-mode (for example,
when enclosed between a pair of single dollar signs).  Some examples of
this follow below.</p>
<p>In this way, Sage can be used effectively for constructing portions of
a LaTeX document: create or compute an object in Sage, print <code class="docutils literal notranslate"><span class="pre">latex()</span></code>
of the object and cut/paste it into your document.</p>
</li>
<li><p class="first">The notebook interface is configured to use
<a class="reference external" href="http://www.mathjax.org">MathJax</a>
to render mathematics
cleanly in a web browser.  MathJax is an open source JavaScript
display engine for mathematics that works in all modern
browsers.  It is able to render a large, but not totally
complete, subset of TeX.  It has no support for
things like complicated tables, sectioning or document
management, as it is oriented towards accurately rendering
“snippets” of TeX. Seemingly automatic rendering of math in the
notebook is provided by converting the <code class="docutils literal notranslate"><span class="pre">latex()</span></code>
representation of an object (as described above) into a form of
HTML palatable to MathJax.</p>
<p>Since MathJax uses its own scalable fonts, it is superior to other methods that
rely on converting equations, or other snippets of TeX, into static inline images.</p>
</li>
<li><p class="first">At the Sage command-line, or in the notebook when LaTeX code is
more involved than MathJax can handle, a system-wide installation of
LaTeX can be employed.  Sage includes almost everything you need to
build and use Sage, but a significant exception is TeX itself.  So in these
situations you need to have TeX installed, along with some associated
conversion utilities, to utilize the full power.</p>
</li>
</ol>
</div></blockquote>
<p>Here we demonstrate some basic uses of the <code class="docutils literal notranslate"><span class="pre">latex()</span></code> function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">z</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">12</span><span class="p">)</span>
<span class="go">z^{12}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">integrate</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">4</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>
<span class="go">\frac{1}{5} \, z^{5}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="s1">&#39;a string&#39;</span><span class="p">)</span>
<span class="go">\text{\texttt{a{ }string}}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">\Bold{Q}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">matrix</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]]))</span>
<span class="go">\left(\begin{array}{rrr}</span>
<span class="go">2 &amp; 4 &amp; 6 \\</span>
<span class="go">-1 &amp; -1 &amp; -1</span>
<span class="go">\end{array}\right)</span>
</pre></div>
</div>
<p>Basic MathJax functionality is largely automatic in the notebook, but
we can partially demonstrate this support with the <code class="docutils literal notranslate"><span class="pre">MathJax</span></code> class.
The <code class="docutils literal notranslate"><span class="pre">eval</span></code> function of this class converts a Sage object to its
LaTeX representation and then wraps it in HTML that invokes the CSS
“math” class, which then employs MathJax.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">MathJax</span>
<span class="gp">sage: </span><span class="n">mj</span> <span class="o">=</span> <span class="n">MathJax</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">z</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">12</span><span class="p">)</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbf{#1}}z^{12}&lt;/script&gt;&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbf{#1}}\Bold{Q}&lt;/script&gt;&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbf{#1}}\Bold{Z}[x]&lt;/script&gt;&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">integrate</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">4</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbf{#1}}\frac{1}{5} \, z^{5}&lt;/script&gt;&lt;/html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-use">
<h2>Basic Use<a class="headerlink" href="#basic-use" title="Permalink to this headline">¶</a></h2>
<p>As indicated in the overview, the simplest way to exploit Sage’s
support of LaTeX is to use the <code class="docutils literal notranslate"><span class="pre">latex()</span></code> function to create
legitimate LaTeX code to represent mathematical objects.  These
strings can then be incorporated into standalone LaTeX documents.
This works identically in the notebook and at the Sage command
line.</p>
<p>At the other extreme is the <code class="docutils literal notranslate"><span class="pre">view()</span></code> command.  At the Sage
command line the command <code class="docutils literal notranslate"><span class="pre">view(foo)</span></code> will create the LaTeX
representation of <code class="docutils literal notranslate"><span class="pre">foo</span></code>, incorporate this into a simple LaTeX
document, and then process that document with your system-wide
TeX installation.  Finally, the appropriate viewer will be called
to display the output from the TeX command.  Which version of TeX
is used, and therefore the nature of the output and associated
viewer, can be customized (see <a class="reference internal" href="#sec-custom-processing"><span class="std std-ref">Customizing LaTeX Processing</span></a>).</p>
<p>In the notebook, the <code class="docutils literal notranslate"><span class="pre">view(foo)</span></code> command creates the
appropriate combination of HTML and CSS so that MathJax will
render the LaTeX representation properly in the worksheet.  To the
user, it simply creates a nicely formatted version of the output,
distinct from the default ASCII output of Sage.  Not every
mathematical object in Sage has a LaTeX representation amenable to
the limited capabilities of MathJax.  In these cases, the MathJax
interpretation can be bypassed, the system-wide TeX called
instead, and the subsequent output converted to a graphic image
for display in the worksheet.  Affecting and controlling this
process is discussed below in the section
<a class="reference internal" href="#sec-custom-generation"><span class="std std-ref">Customizing LaTeX Generation</span></a>.</p>
<p>The notebook has two other features for employing TeX.
The first is the “Typeset” button just above the first cell of a
worksheet, to the right of the four drop-down boxes.  When
checked, any subsequent evaluations of cells will result in
output interpreted by MathJax, hence of a typeset quality.  Note
that this effect is not retroactive – previously evaluated cells
need to be re-evaluated.  Essentially, checking the “Typeset”
button is identical to wrapping the output of each cell in the
<code class="docutils literal notranslate"><span class="pre">view()</span></code> command.</p>
<p>A second feature of the notebook is entering TeX as
part of annotating a worksheet.  When the cursor is placed
between cells of a worksheet so that a blue bar appears, then a
shift-click will open a mini-word-processor, TinyMCE.  This
allows for the entry of text, using a WSIWYG editor to create
HTML and CSS command for styled text.  So it is possible to add
formatted text as commentary within a worksheet.  However, text
between pairs of dollar signs, or pairs of double dollar signs is
interpreted by MathJax as inline or display math (respectively).</p>
</div>
<div class="section" id="customizing-latex-generation">
<span id="sec-custom-generation"></span><h2>Customizing LaTeX Generation<a class="headerlink" href="#customizing-latex-generation" title="Permalink to this headline">¶</a></h2>
<p>There are several ways to customize the actual LaTeX code generated by
the <code class="docutils literal notranslate"><span class="pre">latex()</span></code> command.  In the notebook and at the Sage command-line
there is a pre-defined object named <code class="docutils literal notranslate"><span class="pre">latex</span></code> which has several methods,
which you can list by typing <code class="docutils literal notranslate"><span class="pre">latex.</span></code>, followed by the tab key
(note the period).</p>
<p>A good example is the <code class="docutils literal notranslate"><span class="pre">latex.matrix_delimiters</span></code> method.  It can be
used to change the notation surrounding a matrix – large parentheses,
brackets, braces, vertical bars.  No notion of style is enforced,
you can mix and match as you please.  Notice how the backslashes
needed in LaTeX require an extra slash so they are escaped
properly within the Python string.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">\left(\begin{array}{rr}</span>
<span class="go">0 &amp; 1 \\</span>
<span class="go">2 &amp; 3</span>
<span class="go">\end{array}\right)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">matrix_delimiters</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">\left[\begin{array}{rr}</span>
<span class="go">0 &amp; 1 \\</span>
<span class="go">2 &amp; 3</span>
<span class="go">\end{array}\right]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">matrix_delimiters</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">{&#39;</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">\left\{\begin{array}{rr}</span>
<span class="go">0 &amp; 1 \\</span>
<span class="go">2 &amp; 3</span>
<span class="go">\end{array}\right\}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">latex.vector_delimiters</span></code> method works similarly.</p>
<p>The way common rings and fields (integers, rational, reals, etc.)
are typeset can be controlled by the <code class="docutils literal notranslate"><span class="pre">latex.blackboard_bold</span></code>
method.  These sets are by default typeset in bold, but may
optionally be written in a double-struck fashion as sometimes
done in written work.  This is accomplished by redefining the
<code class="docutils literal notranslate"><span class="pre">\Bold{}</span></code> macro which is built-in to Sage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">\Bold{Q}</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">MathJax</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="o">=</span><span class="n">MathJax</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbf{#1}}\Bold{Q}&lt;/script&gt;&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">blackboard_bold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbb{#1}}\Bold{Q}&lt;/script&gt;&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">blackboard_bold</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>It is possible to take advantage of the extensible nature of
TeX by adding in new macros and new packages.  First,
individual macros can be added so that they are used when
MathJax interprets a snippet of TeX in the notebook.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">()</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_macro</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">newcommand{</span><span class="se">\\</span><span class="s2">foo}{bar}&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">()</span>
<span class="go">&#39;\\newcommand{\\foo}{bar}&#39;</span>
<span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;x y&#39;</span><span class="p">)</span>
<span class="go">(x, y)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="go">x + y</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">MathJax</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="o">=</span><span class="n">MathJax</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="go">&lt;html&gt;&lt;script type=&quot;math/tex; mode=display&quot;&gt;\newcommand{\Bold}[1]{\mathbf{#1}}\newcommand{\foo}{bar}x + y&lt;/script&gt;&lt;/html&gt;</span>
</pre></div>
</div>
<p>Additional macros added this way will also be used in the event
that the system-wide version of TeX is called on
something larger than MathJax can handle.  The command
<code class="docutils literal notranslate"><span class="pre">latex_extra_preamble</span></code> is used to build the preamble of a
complete LaTeX document, so the following illustrates
how this is accomplished. As usual note the need for the
double-backslashes in the Python strings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">latex_extra_preamble</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">latex_extra_preamble</span><span class="p">())</span>
<span class="go">\newcommand{\ZZ}{\Bold{Z}}</span>
<span class="gp">...</span>
<span class="go">\newcommand{\Bold}[1]{\mathbf{#1}}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_macro</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">newcommand{</span><span class="se">\\</span><span class="s2">foo}{bar}&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">latex_extra_preamble</span><span class="p">())</span>
<span class="go">\newcommand{\ZZ}{\Bold{Z}}</span>
<span class="gp">...</span>
<span class="go">\newcommand{\Bold}[1]{\mathbf{#1}}</span>
<span class="go">\newcommand{\foo}{bar}</span>
</pre></div>
</div>
<p>Again, for larger or more complicated LaTeX
expressions, it is possible to add packages (or anything else) to
the preamble of the LaTeX file.  Anything may be
incorporated into the preamble with the <code class="docutils literal notranslate"><span class="pre">latex.add_to_preamble</span></code>
command, and the specialized command
<code class="docutils literal notranslate"><span class="pre">latex.add_package_to_preamble_if_available</span></code> will first check
if a certain package is actually available before trying to add
it to the preamble.</p>
<p>Here we add the geometry package to the preamble and use it to
set the size of the region on the page that TeX will
use (effectively setting the margins).  As usual, note the need
for the double-backslashes in the Python strings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">latex_extra_preamble</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_preamble</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">usepackage{geometry}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_preamble</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">geometry{letterpaper,total={8in,10in}}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;\\usepackage{geometry}\\geometry{letterpaper,total={8in,10in}}&#39;</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">latex_extra_preamble</span><span class="p">())</span>
<span class="go">\usepackage{geometry}\geometry{letterpaper,total={8in,10in}}</span>
<span class="go">\newcommand{\ZZ}{\Bold{Z}}</span>
<span class="gp">...</span>
<span class="go">\newcommand{\Bold}[1]{\mathbf{#1}}</span>
</pre></div>
</div>
<p>A particular package may be added along with a check on its existence,
as follows.  As an example, we just illustrate an attempt to add to
the preamble a package that presumably does not exist.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_preamble</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">usepackage{foo-bar-unchecked}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;\\usepackage{foo-bar-unchecked}&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_package_to_preamble_if_available</span><span class="p">(</span><span class="s1">&#39;foo-bar-checked&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;\\usepackage{foo-bar-unchecked}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-latex-processing">
<span id="sec-custom-processing"></span><h2>Customizing LaTeX Processing<a class="headerlink" href="#customizing-latex-processing" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to control which variant of TeX is
used for system-wide invocations, thus also influencing the
nature of the output.  Similarly, it is also possible to control
when the notebook will use MathJax (simple TeX snippets)
or the system-wide TeX installation (more complicated
LaTeX expressions).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">latex.engine()</span></code> command can be used to control if the
system-wide executables <code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> or <code class="docutils literal notranslate"><span class="pre">xelatex</span></code>
are employed for more complicated LaTeX expressions.
When <code class="docutils literal notranslate"><span class="pre">view()</span></code> is called from the sage command-line and the
engine is set to <code class="docutils literal notranslate"><span class="pre">latex</span></code>, a dvi file is produced and Sage will
use a dvi viewer (like xdvi) to display the result.  In contrast,
using <code class="docutils literal notranslate"><span class="pre">view()</span></code> at the Sage command-line, when the engine is set
to <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, will produce a PDF as the result and Sage will
call your system’s utility for displaying PDF files (acrobat,
okular, evince, etc.).</p>
<p>In the notebook, it is necessary to intervene in the decision as
to whether MathJax will interpret a snippet of TeX, or
if the LaTeX is complicated enough that the system-wide
installation of TeX should do the work instead.  The
device is a list of strings, which if any one is discovered in a
piece of LaTeX code signal the notebook to bypass
MathJax and invoke latex (or whichever executable is set by the
<code class="docutils literal notranslate"><span class="pre">latex.engine()</span></code> command).  This list is managed by the
<code class="docutils literal notranslate"><span class="pre">latex.add_to_mathjax_avoid_list</span></code> and
<code class="docutils literal notranslate"><span class="pre">latex.mathjax_avoid_list</span></code> commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">([])</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_mathjax_avoid_list</span><span class="p">(</span><span class="s1">&#39;tikzpicture&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;, &#39;tikzpicture&#39;]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">([])</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Suppose a LaTeX expression is produced in the notebook
with <code class="docutils literal notranslate"><span class="pre">view()</span></code> or while the “Typeset” button is checked, and
then recognized as requiring the external LaTeX
installation through the “mathjax avoid list.”  Then the selected
executable (as specified by <code class="docutils literal notranslate"><span class="pre">latex.engine()</span></code>) will process the
LaTeX.  However, instead of then spawning an external
viewer (which is the command-line behavior), Sage will attempt to
convert the result into a single, tightly-cropped image, which is
then inserted into the worksheet as the output of the cell.</p>
<p>Just how this conversion proceeds depends on several factors –
mostly which executable you have specified as the engine and
which conversion utilities are available on your system.  Four
useful converters that will cover all eventualities are
<code class="docutils literal notranslate"><span class="pre">dvips</span></code>, <code class="docutils literal notranslate"><span class="pre">ps2pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">dvipng</span></code> and from the <code class="docutils literal notranslate"><span class="pre">ImageMagick</span></code> suite,
<code class="docutils literal notranslate"><span class="pre">convert</span></code>.  The goal is to produce a PNG file as the output for
inclusion back into the worksheet.  When a LaTeX
expression can be converted successfully to a dvi by the latex
engine, then dvipng should accomplish the conversion.  If the
LaTeX expression and chosen engine creates a dvi with
specials that dvipng cannot handle, then dvips will create a
PostScript file. Such a PostScript file, or a PDF file created by
an engine such as <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, is then processed into a PNG with
the <code class="docutils literal notranslate"><span class="pre">convert</span></code> utility.  The presence of two of these converters
can be tested with the <code class="docutils literal notranslate"><span class="pre">have_dvipng()</span></code> and <code class="docutils literal notranslate"><span class="pre">have_convert()</span></code>
routines.</p>
<p>These conversions are done automatically if you have the necessary
converters installed; if not, then an error message is printed telling
you what’s missing and where to download it.</p>
<p>For a concrete example of how complicated LaTeX
expressions can be processed, see the example in the next section
(<a class="reference internal" href="#sec-tkz-graph"><span class="std std-ref">An Example: Combinatorial Graphs with tkz-graph</span></a>) for using the LaTeX
<code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code> package to produce high-quality renderings of
combinatorial graphs.  For other examples, there are some
pre-packaged test cases.  To use these, it is necessary to import
the <code class="docutils literal notranslate"><span class="pre">sage.misc.latex.latex_examples</span></code> object, which is an
instance of the <code class="docutils literal notranslate"><span class="pre">sage.misc.latex.LatexExamples</span></code> class, as
illustrated below.  This class currently has examples of
commutative diagrams, combinatorial graphs, knot theory and
pstricks, which respectively exercise the following packages:
xy, tkz-graph, xypic, pstricks.  After the import, use
tab-completion on <code class="docutils literal notranslate"><span class="pre">latex_examples</span></code> to see the pre-packaged
examples.  Calling each example will give you back some
explanation about what is required to make the example render
properly.  To actually see the examples, it is necessary to use
<code class="docutils literal notranslate"><span class="pre">view()</span></code> (once the preamble, engine, etc are all set properly).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">latex_examples</span>
<span class="gp">sage: </span><span class="n">latex_examples</span><span class="o">.</span><span class="n">diagram</span><span class="p">()</span>
<span class="go">LaTeX example for testing display of a commutative diagram produced</span>
<span class="go">by xypic.</span>

<span class="go">To use, try to view this object -- it won&#39;t work.  Now try</span>
<span class="go">&#39;latex.add_to_preamble(&quot;\\usepackage[matrix,arrow,curve,cmtip]{xy}&quot;)&#39;,</span>
<span class="go">and try viewing again -- it should work in the command line but not</span>
<span class="go">from the notebook.  In the notebook, run</span>
<span class="go">&#39;latex.add_to_mathjax_avoid_list(&quot;xymatrix&quot;)&#39; and try again -- you</span>
<span class="go">should get a picture (a part of the diagram arising from a filtered</span>
<span class="go">chain complex).</span>
</pre></div>
</div>
</div>
<div class="section" id="an-example-combinatorial-graphs-with-tkz-graph">
<span id="sec-tkz-graph"></span><h2>An Example: Combinatorial Graphs with tkz-graph<a class="headerlink" href="#an-example-combinatorial-graphs-with-tkz-graph" title="Permalink to this headline">¶</a></h2>
<p>High-quality illustrations of combinatorial graphs (henceforth
just “graphs”) are possible with the <code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code> package.
This package is built on top of the <code class="docutils literal notranslate"><span class="pre">tikz</span></code> front-end to the
<code class="docutils literal notranslate"><span class="pre">pgf</span></code> library.  So all of these components need to be part
of a system-wide TeX installation, and it may be possible
that these components may not be at their most current
versions as packaged in some TeX implementations. So for
best results, it could be necessary or advisable to install
these as part of your personal texmf tree.  Creating,
maintaining and customizing a system-wide or personal TeX
installation is beyond the scope of this document, but it should
be easy to find instructions.  The necessary files are listed in
<a class="reference internal" href="#sec-system-wide-tex"><span class="std std-ref">A Fully Capable TeX Installation</span></a>.</p>
<p>Thus, to start we need to insure that the relevant packages
are included by adding them to the preamble of the eventual
LaTeX document.  The images of graphs do not form properly
when a dvi file is used as an intermediate format, so it is
best to set the latex engine to the <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> executable.
At this point a command like <code class="docutils literal notranslate"><span class="pre">view(graphs.CompleteGraph(4))</span></code>
should succeed at the Sage command-line and produce a PDF
with an appropriate image of the complete graph <span class="math notranslate nohighlight">\(K_4\)</span>.</p>
<p>For a similar experience in the notebook, it is necessary
to disable MathJax processing of the LaTeX code for the graph
by using the “mathjax avoid list.”  Graphs are included with a
<code class="docutils literal notranslate"><span class="pre">tikzpicture</span></code> environment, so this is a good choice for
a string to include in the avoidance list.  Now,
<code class="docutils literal notranslate"><span class="pre">view(graphs.CompleteGraph(4))</span></code> in a worksheet
should call pdflatex to create a PDF and then the
<code class="docutils literal notranslate"><span class="pre">convert</span></code> utility will extract a PNG graphic to
insert into the output cell of the worksheet.
The following commands illustrate the steps to get
graphs processed by LaTeX in the notebook.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.graph_latex</span> <span class="kn">import</span> <span class="n">setup_latex_preamble</span>
<span class="gp">sage: </span><span class="n">setup_latex_preamble</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span> <span class="c1"># random - depends on system&#39;s TeX installation</span>
<span class="go">&#39;\\usepackage{tikz}\n\\usepackage{tkz-graph}\n\\usepackage{tkz-berge}\n&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">engine</span><span class="p">(</span><span class="s1">&#39;pdflatex&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_mathjax_avoid_list</span><span class="p">(</span><span class="s1">&#39;tikzpicture&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>
<span class="go">[&#39;tikz&#39;, &#39;tikzpicture&#39;]</span>
</pre></div>
</div>
<p>At this point, a command like <code class="docutils literal notranslate"><span class="pre">view(graphs.CompleteGraph(4))</span></code>
should produce a graphic version of the graph pasted into the
notebook, having used <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> to process <code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code>
commands to realize the graph. Note that there is a variety of
options to affect how a graph is rendered in LaTeX via
<code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code>, which is again outside the scope of this section,
see the section of the Reference manual titled “LaTeX Options for
Graphs” for instructions and details.</p>
</div>
<div class="section" id="a-fully-capable-tex-installation">
<span id="sec-system-wide-tex"></span><h2>A Fully Capable TeX Installation<a class="headerlink" href="#a-fully-capable-tex-installation" title="Permalink to this headline">¶</a></h2>
<p>Many of the more advanced features of the integration of
TeX with Sage requires a system-wide installation of
TeX.  Many versions of Linux have base TeX
packages based on TeX-live, for OSX there is
TeXshop and for Windows there is MikTeX.
The <code class="docutils literal notranslate"><span class="pre">convert</span></code> utility is part of the
<a class="reference external" href="http://www.imagemagick.org/">ImageMagick</a> suite (which
should be a package or an easy download), and the three
programs <code class="docutils literal notranslate"><span class="pre">dvipng</span></code>, <code class="docutils literal notranslate"><span class="pre">ps2pdf</span></code>, and <code class="docutils literal notranslate"><span class="pre">dvips</span></code> may be
included with your TeX distribution.  The first two may
also be obtained, respectively, from
<a class="reference external" href="http://sourceforge.net/projects/dvipng/">http://sourceforge.net/projects/dvipng/</a> and as part of
<a class="reference external" href="http://www.ghostscript.com/">Ghostscript</a>.</p>
<p>Rendering combinatorial graphs requires a recent version of the
PGF library, and the files <code class="docutils literal notranslate"><span class="pre">tkz-graph.sty</span></code>, <code class="docutils literal notranslate"><span class="pre">tkz-arith.sty</span></code>
and perhaps <code class="docutils literal notranslate"><span class="pre">tkz-berge.sty</span></code>, all from the <a class="reference external" href="http://altermundus.com/pages/tkz/graph/">Altermundus site</a>.</p>
</div>
<div class="section" id="external-programs">
<h2>External Programs<a class="headerlink" href="#external-programs" title="Permalink to this headline">¶</a></h2>
<p>There are three programs available to further integrate
TeX and Sage. The first is sagetex.  A concise
description of sagetex is that it is a collection of
TeX macros that allow a LaTeX document to
include instructions to have Sage compute various objects and/or
format objects using the <code class="docutils literal notranslate"><span class="pre">latex()</span></code> support built in to Sage.
So as an intermediate step of compiling a LaTeX
document, all of the computational and LaTeX-formatting
features of Sage can be handled automatically.  As an example, a
mathematics examination can maintain a correct correspondence
between questions and answers by using sagetex to have Sage
compute one from the other.  See <a class="reference internal" href="sagetex.html#sec-sagetex"><span class="std std-ref">Using SageTeX</span></a> for more
information.</p>
<p>tex2sws begins with a LaTeX document, but defines extra
environments for the placement of Sage code.  When processed with
the right tools, the result is a Sage worksheet, with content
properly formatted for MathJax and the Sage code incorporated as
input cells.  So a textbook or article can be authored in
LaTeX, blocks of Sage code included, and the whole
document can be transformed into a Sage worksheet where the
mathematical text is nicely formatted and the blocks of Sage code
are “live.”  Currently in development, see <a class="reference external" href="http://bitbucket.org/rbeezer/tex2sws/">tex2sws &#64; BitBucket</a> for more information.</p>
<p>sws2tex reverses the process by beginning with a Sage worksheet
and converting it to legitimate LaTeX for subsequent
processing with all the tools available for LaTeX
documents.  Currently in development, see <a class="reference external" href="http://bitbucket.org/whuss/sws2tex/">sws2tex &#64; BitBucket</a> for more information.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Sage, LaTeX and Friends</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#basic-use">Basic Use</a></li>
<li><a class="reference internal" href="#customizing-latex-generation">Customizing LaTeX Generation</a></li>
<li><a class="reference internal" href="#customizing-latex-processing">Customizing LaTeX Processing</a></li>
<li><a class="reference internal" href="#an-example-combinatorial-graphs-with-tkz-graph">An Example: Combinatorial Graphs with tkz-graph</a></li>
<li><a class="reference internal" href="#a-fully-capable-tex-installation">A Fully Capable TeX Installation</a></li>
<li><a class="reference internal" href="#external-programs">External Programs</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="interfaces.html"
                        title="previous chapter">Interfaces</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="programming.html"
                        title="next chapter">Programming</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/latex.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="programming.html" title="Programming"
             >next</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Sage Tutorial v8.5</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2018, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>